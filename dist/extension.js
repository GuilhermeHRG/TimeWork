"use strict";var eb=Object.create;var yo=Object.defineProperty;var tb=Object.getOwnPropertyDescriptor;var nb=Object.getOwnPropertyNames;var rb=Object.getPrototypeOf,ib=Object.prototype.hasOwnProperty;var I=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),sb=(n,e)=>{for(var t in e)yo(n,t,{get:e[t],enumerable:!0})},Im=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nb(e))!ib.call(n,i)&&i!==t&&yo(n,i,{get:()=>e[i],enumerable:!(r=tb(e,i))||r.enumerable});return n};var Br=(n,e,t)=>(t=n!=null?eb(rb(n)):{},Im(e||!n||!n.__esModule?yo(t,"default",{value:n,enumerable:!0}):t,n)),ob=n=>Im(yo({},"__esModule",{value:!0}),n);var ie=I(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=ft.DEFAULT_MAX_SEND_MESSAGE_LENGTH=ft.Propagate=ft.LogVerbosity=ft.Status=void 0;var Ng;(function(n){n[n.OK=0]="OK",n[n.CANCELLED=1]="CANCELLED",n[n.UNKNOWN=2]="UNKNOWN",n[n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n[n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n[n.NOT_FOUND=5]="NOT_FOUND",n[n.ALREADY_EXISTS=6]="ALREADY_EXISTS",n[n.PERMISSION_DENIED=7]="PERMISSION_DENIED",n[n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n[n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n[n.ABORTED=10]="ABORTED",n[n.OUT_OF_RANGE=11]="OUT_OF_RANGE",n[n.UNIMPLEMENTED=12]="UNIMPLEMENTED",n[n.INTERNAL=13]="INTERNAL",n[n.UNAVAILABLE=14]="UNAVAILABLE",n[n.DATA_LOSS=15]="DATA_LOSS",n[n.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(Ng||(ft.Status=Ng={}));var kg;(function(n){n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR",n[n.NONE=3]="NONE"})(kg||(ft.LogVerbosity=kg={}));var Pg;(function(n){n[n.DEADLINE=1]="DEADLINE",n[n.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",n[n.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",n[n.CANCELLATION=8]="CANCELLATION",n[n.DEFAULTS=65535]="DEFAULTS"})(Pg||(ft.Propagate=Pg={}));ft.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;ft.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var fu=I((RF,h0)=>{h0.exports={name:"@grpc/grpc-js",version:"1.9.15",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var pe=I(Qe=>{"use strict";var pu,mu,gu,yu;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.isTracerEnabled=Qe.trace=Qe.log=Qe.setLoggerVerbosity=Qe.setLogger=Qe.getLogger=void 0;var kn=ie(),f0=require("process"),p0=fu().version,m0={error:(n,...e)=>{console.error("E "+n,...e)},info:(n,...e)=>{console.error("I "+n,...e)},debug:(n,...e)=>{console.error("D "+n,...e)}},fr=m0,Wr=kn.LogVerbosity.ERROR,g0=(mu=(pu=process.env.GRPC_NODE_VERBOSITY)!==null&&pu!==void 0?pu:process.env.GRPC_VERBOSITY)!==null&&mu!==void 0?mu:"";switch(g0.toUpperCase()){case"DEBUG":Wr=kn.LogVerbosity.DEBUG;break;case"INFO":Wr=kn.LogVerbosity.INFO;break;case"ERROR":Wr=kn.LogVerbosity.ERROR;break;case"NONE":Wr=kn.LogVerbosity.NONE;break;default:}var y0=()=>fr;Qe.getLogger=y0;var v0=n=>{fr=n};Qe.setLogger=v0;var _0=n=>{Wr=n};Qe.setLoggerVerbosity=_0;var T0=(n,...e)=>{let t;if(n>=Wr){switch(n){case kn.LogVerbosity.DEBUG:t=fr.debug;break;case kn.LogVerbosity.INFO:t=fr.info;break;case kn.LogVerbosity.ERROR:t=fr.error;break}t||(t=fr.error),t&&t.bind(fr)(...e)}};Qe.log=T0;var S0=(yu=(gu=process.env.GRPC_NODE_TRACE)!==null&&gu!==void 0?gu:process.env.GRPC_TRACE)!==null&&yu!==void 0?yu:"",vu=new Set,xg=new Set;for(let n of S0.split(","))n.startsWith("-")?xg.add(n.substring(1)):vu.add(n);var E0=vu.has("all");function b0(n,e,t){Mg(e)&&(0,Qe.log)(n,new Date().toISOString()+" | v"+p0+" "+f0.pid+" | "+e+" | "+t)}Qe.trace=b0;function Mg(n){return!xg.has(n)&&(E0||vu.has(n))}Qe.isTracerEnabled=Mg});var Wo=I(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.getErrorCode=Hr.getErrorMessage=void 0;function w0(n){return n instanceof Error?n.message:String(n)}Hr.getErrorMessage=w0;function C0(n){return typeof n=="object"&&n!==null&&"code"in n&&typeof n.code=="number"?n.code:null}Hr.getErrorCode=C0});var Xe=I($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.Metadata=void 0;var I0=pe(),A0=ie(),R0=Wo(),D0=/^[0-9a-z_.-]+$/,O0=/^[ -~]*$/;function N0(n){return D0.test(n)}function k0(n){return O0.test(n)}function Fg(n){return n.endsWith("-bin")}function P0(n){return!n.startsWith("grpc-")}function Ho(n){return n.toLowerCase()}function Lg(n,e){if(!N0(n))throw new Error('Metadata key "'+n+'" contains illegal characters');if(e!=null)if(Fg(n)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!k0(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var _u=class n{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){e=Ho(e),Lg(e,t),this.internalRepr.set(e,[t])}add(e,t){e=Ho(e),Lg(e,t);let r=this.internalRepr.get(e);r===void 0?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=Ho(e),this.internalRepr.delete(e)}get(e){return e=Ho(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let i=r[0];e[t]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new n(this.options),t=e.internalRepr;for(let[r,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);t.set(r,s)}return e}merge(e){for(let[t,r]of e.internalRepr){let i=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(x0);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new n;for(let r of Object.keys(e)){if(r.charAt(0)===":")continue;let i=e[r];try{Fg(r)?Array.isArray(i)?i.forEach(s=>{t.add(r,Buffer.from(s,"base64"))}):i!==void 0&&(P0(r)?i.split(",").forEach(s=>{t.add(r,Buffer.from(s.trim(),"base64"))}):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{t.add(r,s)}):i!==void 0&&t.add(r,i)}catch(s){let o=`Failed to add metadata entry ${r}: ${i}. ${(0,R0.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,I0.log)(A0.LogVerbosity.ERROR,o)}}return t}};$o.Metadata=_u;var x0=n=>Buffer.isBuffer(n)?n.toString("base64"):n});var wu=I(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.CallCredentials=void 0;var bu=Xe();function M0(n){return"getRequestHeaders"in n&&typeof n.getRequestHeaders=="function"}var $r=class n{static createFromMetadataGenerator(e){return new Su(e)}static createFromGoogleCredential(e){return n.createFromMetadataGenerator((t,r)=>{let i;M0(e)?i=e.getRequestHeaders(t.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(t.service_url,(a,c)=>{if(a){o(a);return}if(!c){o(new Error("Headers not set by metadata plugin"));return}s(c)})}),i.then(s=>{let o=new bu.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);r(null,o)},s=>{r(s)})})}static createEmpty(){return new Eu}};Ko.CallCredentials=$r;var Tu=class n extends $r{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new bu.Metadata,r=await Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of r)t.merge(i);return t}compose(e){return new n(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof n?this.creds.every((t,r)=>t._equals(e.creds[r])):!1}},Su=class n extends $r{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?t(s):r(i)})})}compose(e){return new Tu([this,e])}_equals(e){return this===e?!0:e instanceof n?this.metadataGenerator===e.metadataGenerator:!1}},Eu=class n extends $r{generateMetadata(e){return Promise.resolve(new bu.Metadata)}compose(e){return e}_equals(e){return e instanceof n}}});var Iu=I(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getDefaultRootsData=Kr.CIPHER_SUITES=void 0;var L0=require("fs");Kr.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var Bg=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,Cu=null;function F0(){return Bg?(Cu===null&&(Cu=L0.readFileSync(Bg)),Cu):null}Kr.getDefaultRootsData=F0});var Jo=I(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.ChannelCredentials=void 0;var B0=require("tls"),U0=wu(),Ug=Iu();function Au(n,e){if(n&&!(n instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var Qr=class{constructor(e){this.callCredentials=e||U0.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var s;if(Au(e,"Root certificate"),Au(t,"Private key"),Au(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,B0.createSecureContext)({ca:(s=e??(0,Ug.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:t??void 0,cert:r??void 0,ciphers:Ug.CIPHER_SUITES});return new Qo(o,i??{})}static createFromSecureContext(e,t){return new Qo(e,t??{})}static createInsecure(){return new Ru}};Yo.ChannelCredentials=Qr;var Ru=class n extends Qr{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof n}},Qo=class n extends Qr{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},t?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){let t=this.callCredentials.compose(e);return new Du(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},Du=class n extends Qr{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new n(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var xn=I(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.validateLoadBalancingConfig=Be.getFirstUsableConfig=Be.isLoadBalancerNameRegistered=Be.createLoadBalancer=Be.registerDefaultLoadBalancerType=Be.registerLoadBalancerType=Be.createChildChannelControlHelper=void 0;function q0(n,e){var t,r,i,s,o,a,c,l,u,p;return{createSubchannel:(r=(t=e.createSubchannel)===null||t===void 0?void 0:t.bind(e))!==null&&r!==void 0?r:n.createSubchannel.bind(n),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:n.updateState.bind(n),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:n.requestReresolution.bind(n),addChannelzChild:(l=(c=e.addChannelzChild)===null||c===void 0?void 0:c.bind(e))!==null&&l!==void 0?l:n.addChannelzChild.bind(n),removeChannelzChild:(p=(u=e.removeChannelzChild)===null||u===void 0?void 0:u.bind(e))!==null&&p!==void 0?p:n.removeChannelzChild.bind(n)}}Be.createChildChannelControlHelper=q0;var Pn={},Ou=null;function V0(n,e,t){Pn[n]={LoadBalancer:e,LoadBalancingConfig:t}}Be.registerLoadBalancerType=V0;function z0(n){Ou=n}Be.registerDefaultLoadBalancerType=z0;function G0(n,e){let t=n.getLoadBalancerName();return t in Pn?new Pn[t].LoadBalancer(e):null}Be.createLoadBalancer=G0;function j0(n){return n in Pn}Be.isLoadBalancerNameRegistered=j0;function W0(n,e=!1){for(let t of n)if(t.getLoadBalancerName()in Pn)return t;return e&&Ou?new Pn[Ou].LoadBalancingConfig:null}Be.getFirstUsableConfig=W0;function H0(n){if(!(n!==null&&typeof n=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(n);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let t=e[0];if(t in Pn)return Pn[t].LoadBalancingConfig.createFromJson(n[t]);throw new Error(`Unrecognized load balancing config name ${t}`)}Be.validateLoadBalancingConfig=H0});var Nu=I(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.extractAndSelectServiceConfig=Mn.validateServiceConfig=Mn.validateRetryThrottling=void 0;var $0=require("os"),Xo=ie(),K0=xn(),Zo=/^\d+(\.\d{1,9})?s$/,Q0="node";function Y0(n){if("service"in n&&n.service!==""){if(typeof n.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof n.service}`);if("method"in n&&n.method!==""){if(typeof n.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof n.service}`);return{service:n.service,method:n.method}}else return{service:n.service}}else{if("method"in n&&n.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function J0(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in n)||typeof n.initialBackoff!="string"||!Zo.test(n.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in n)||typeof n.maxBackoff!="string"||!Zo.test(n.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in n)||typeof n.backoffMultiplier!="number"||n.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in n&&Array.isArray(n.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(n.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of n.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(Xo.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(Xo.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:n.maxAttempts,initialBackoff:n.initialBackoff,maxBackoff:n.maxBackoff,backoffMultiplier:n.backoffMultiplier,retryableStatusCodes:n.retryableStatusCodes}}function X0(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in n&&(typeof n.hedgingDelay!="string"||!Zo.test(n.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in n&&Array.isArray(n.nonFatalStatusCodes))for(let t of n.nonFatalStatusCodes)if(typeof t=="number"){if(!Object.values(Xo.Status).includes(t))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof t=="string"){if(!Object.values(Xo.Status).includes(t.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:n.maxAttempts};return n.hedgingDelay&&(e.hedgingDelay=n.hedgingDelay),n.nonFatalStatusCodes&&(e.nonFatalStatusCodes=n.nonFatalStatusCodes),e}function Z0(n){var e;let t={name:[]};if(!("name"in n)||!Array.isArray(n.name))throw new Error("Invalid method config: invalid name array");for(let r of n.name)t.name.push(Y0(r));if("waitForReady"in n){if(typeof n.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");t.waitForReady=n.waitForReady}if("timeout"in n)if(typeof n.timeout=="object"){if(!("seconds"in n.timeout)||typeof n.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in n.timeout)||typeof n.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");t.timeout=n.timeout}else if(typeof n.timeout=="string"&&Zo.test(n.timeout)){let r=n.timeout.substring(0,n.timeout.length-1).split(".");t.timeout={seconds:r[0]|0,nanos:((e=r[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in n){if(typeof n.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxRequestBytes=n.maxRequestBytes}if("maxResponseBytes"in n){if(typeof n.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxResponseBytes=n.maxResponseBytes}if("retryPolicy"in n){if("hedgingPolicy"in n)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");t.retryPolicy=J0(n.retryPolicy)}else"hedgingPolicy"in n&&(t.hedgingPolicy=X0(n.hedgingPolicy));return t}function qg(n){if(!("maxTokens"in n)||typeof n.maxTokens!="number"||n.maxTokens<=0||n.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in n)||typeof n.tokenRatio!="number"||n.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+n.maxTokens.toFixed(3),tokenRatio:+n.tokenRatio.toFixed(3)}}Mn.validateRetryThrottling=qg;function Vg(n){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in n)if(typeof n.loadBalancingPolicy=="string")e.loadBalancingPolicy=n.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in n)if(Array.isArray(n.loadBalancingConfig))for(let r of n.loadBalancingConfig)e.loadBalancingConfig.push((0,K0.validateLoadBalancingConfig)(r));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in n&&Array.isArray(n.methodConfig))for(let r of n.methodConfig)e.methodConfig.push(Z0(r));"retryThrottling"in n&&(e.retryThrottling=qg(n.retryThrottling));let t=[];for(let r of e.methodConfig)for(let i of r.name){for(let s of t)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);t.push(i)}return e}Mn.validateServiceConfig=Vg;function eC(n){if(!("serviceConfig"in n))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:Vg(n.serviceConfig)};if("clientLanguage"in n)if(Array.isArray(n.clientLanguage)){e.clientLanguage=[];for(let r of n.clientLanguage)if(typeof r=="string")e.clientLanguage.push(r);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in n)if(Array.isArray(n.clientHostname)){e.clientHostname=[];for(let r of n.clientHostname)if(typeof r=="string")e.clientHostname.push(r);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in n)if(typeof n.percentage=="number"&&0<=n.percentage&&n.percentage<=100)e.percentage=n.percentage;else throw new Error("Invalid service config choice: invalid percentage");let t=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let r in n)if(!t.includes(r))throw new Error(`Invalid service config choice: unexpected field ${r}`);return e}function tC(n,e){if(!Array.isArray(n))throw new Error("Invalid service config list");for(let t of n){let r=eC(t);if(!(typeof r.percentage=="number"&&e>r.percentage)){if(Array.isArray(r.clientHostname)){let i=!1;for(let s of r.clientHostname)s===$0.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(r.clientLanguage)){let i=!1;for(let s of r.clientLanguage)s===Q0&&(i=!0);if(!i)continue}return r.serviceConfig}}throw new Error("No matching service config found")}function nC(n,e){for(let t of n)if(t.length>0&&t[0].startsWith("grpc_config=")){let r=t.join("").substring(12),i=JSON.parse(r);return tC(i,e)}return null}Mn.extractAndSelectServiceConfig=nC});var pt=I(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.ConnectivityState=void 0;var zg;(function(n){n[n.IDLE=0]="IDLE",n[n.CONNECTING=1]="CONNECTING",n[n.READY=2]="READY",n[n.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",n[n.SHUTDOWN=4]="SHUTDOWN"})(zg||(ea.ConnectivityState=zg={}))});var it=I(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.uriToString=Ln.splitHostPort=Ln.parseUri=void 0;var rC=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function iC(n){let e=rC.exec(n);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}Ln.parseUri=iC;var Gg=/^\d+$/;function sC(n){if(n.startsWith("[")){let e=n.indexOf("]");if(e===-1)return null;let t=n.substring(1,e);if(t.indexOf(":")===-1)return null;if(n.length>e+1)if(n[e+1]===":"){let r=n.substring(e+2);return Gg.test(r)?{host:t,port:+r}:null}else return null;else return{host:t}}else{let e=n.split(":");return e.length===2?Gg.test(e[1])?{host:e[0],port:+e[1]}:null:{host:n}}}Ln.splitHostPort=sC;function oC(n){let e="";return n.scheme!==void 0&&(e+=n.scheme+":"),n.authority!==void 0&&(e+="//"+n.authority+"/"),e+=n.path,e}Ln.uriToString=oC});var qt=I(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.mapUriDefaultScheme=mt.getDefaultAuthority=mt.createResolver=mt.registerDefaultScheme=mt.registerResolver=void 0;var Pu=it(),Yr={},ku=null;function aC(n,e){Yr[n]=e}mt.registerResolver=aC;function cC(n){ku=n}mt.registerDefaultScheme=cC;function lC(n,e,t){if(n.scheme!==void 0&&n.scheme in Yr)return new Yr[n.scheme](n,e,t);throw new Error(`No resolver could be created for target ${(0,Pu.uriToString)(n)}`)}mt.createResolver=lC;function uC(n){if(n.scheme!==void 0&&n.scheme in Yr)return Yr[n.scheme].getDefaultAuthority(n);throw new Error(`Invalid target ${(0,Pu.uriToString)(n)}`)}mt.getDefaultAuthority=uC;function dC(n){return n.scheme===void 0||!(n.scheme in Yr)?ku!==null?{scheme:ku,authority:void 0,path:(0,Pu.uriToString)(n)}:null:n}mt.mapUriDefaultScheme=dC});var Bn=I(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.QueuePicker=Fn.UnavailablePicker=Fn.PickResultType=void 0;var hC=Xe(),fC=ie(),ta;(function(n){n[n.COMPLETE=0]="COMPLETE",n[n.QUEUE=1]="QUEUE",n[n.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",n[n.DROP=3]="DROP"})(ta||(Fn.PickResultType=ta={}));var xu=class{constructor(e){this.status=Object.assign({code:fC.Status.UNAVAILABLE,details:"No connection established",metadata:new hC.Metadata},e)}pick(e){return{pickResultType:ta.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Fn.UnavailablePicker=xu;var Mu=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:ta.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Fn.QueuePicker=Mu});var us=I(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.BackoffTimeout=void 0;var pC=1e3,mC=1.6,gC=12e4,yC=.2;function vC(n,e){return Math.random()*(e-n)+n}var Lu=class{constructor(e,t){this.callback=e,this.initialDelay=pC,this.multiplier=mC,this.maxDelay=gC,this.jitter=yC,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(r=(t=this.timerId).unref)===null||r===void 0||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+vC(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,(t=(e=this.timerId).ref)===null||t===void 0||t.call(e)}unref(){var e,t;this.hasRef=!1,(t=(e=this.timerId).unref)===null||t===void 0||t.call(e)}getEndTime(){return this.endTime}};na.BackoffTimeout=Lu});var ia=I(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.ChildLoadBalancerHandler=void 0;var _C=xn(),TC=pt(),SC="child_load_balancer_helper",Fu=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(t){this.parent=t,this.child=null}createSubchannel(t,r){return this.parent.channelControlHelper.createSubchannel(t,r)}updateState(t,r){var i;if(this.calledByPendingChild()){if(t===TC.ConnectivityState.CONNECTING)return;(i=this.parent.currentChild)===null||i===void 0||i.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(t,r)}requestReresolution(){var t;let r=(t=this.parent.pendingChild)!==null&&t!==void 0?t:this.parent.currentChild;this.child===r&&this.parent.channelControlHelper.requestReresolution()}setChild(t){this.child=t}addChannelzChild(t){this.parent.channelControlHelper.addChannelzChild(t)}removeChannelzChild(t){this.parent.channelControlHelper.removeChannelzChild(t)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let s=new this.ChildPolicyHelper(this),o=(0,_C.createLoadBalancer)(t,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,i=this.pendingChild)}else this.pendingChild===null?i=this.currentChild:i=this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return SC}};ra.ChildLoadBalancerHandler=Fu});var Wg=I(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.ResolvingLoadBalancer=void 0;var EC=xn(),bC=Nu(),Ze=pt(),wC=qt(),Jr=Bn(),CC=us(),Bu=ie(),IC=Xe(),AC=pe(),RC=ie(),DC=it(),OC=ia(),NC="resolving_load_balancer";function jg(n){AC.trace(RC.LogVerbosity.DEBUG,NC,n)}var kC=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function PC(n,e,t,r){for(let i of t.name)switch(r){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===n&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===n&&i.method===e)return!0}return!1}function xC(n,e,t,r){for(let i of t)if(PC(n,e,i,r))return i;return null}function MC(n){return function(t,r){var i,s;let o=t.split("/").filter(l=>l.length>0),a=(i=o[0])!==null&&i!==void 0?i:"",c=(s=o[1])!==null&&s!==void 0?s:"";if(n&&n.methodConfig)for(let l of kC){let u=xC(a,c,n.methodConfig,l);if(u)return{methodConfig:u,pickInformation:{},status:Bu.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:Bu.Status.OK,dynamicFilterFactories:[]}}}var Uu=class{constructor(e,t,r,i,s){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=Ze.ConnectivityState.IDLE,this.latestChildPicker=new Jr.QueuePicker(this),this.currentState=Ze.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,bC.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(Ze.ConnectivityState.IDLE,new Jr.QueuePicker(this)),this.childLoadBalancer=new OC.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(jg("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,c)=>{this.latestChildState=a,this.latestChildPicker=c,this.updateState(a,c)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,wC.createResolver)(e,{onSuccessfulResolution:(a,c,l,u,p)=>{var m;this.backoffTimeout.stop(),this.backoffTimeout.reset();let S=null;c===null?l===null?(this.previousServiceConfig=null,S=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(l):S=this.previousServiceConfig:(S=c,this.previousServiceConfig=c);let E=(m=S?.loadBalancingConfig)!==null&&m!==void 0?m:[],w=(0,EC.getFirstUsableConfig)(E,!0);if(w===null){this.handleResolutionFailure({code:Bu.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new IC.Metadata});return}this.childLoadBalancer.updateAddressList(a,w,p);let C=S??this.defaultServiceConfig;this.onSuccessfulResolution(C,u??MC(C))},onError:a=>{this.handleResolutionFailure(a)}},r);let o={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new CC.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===Ze.ConnectivityState.IDLE&&this.updateState(Ze.ConnectivityState.CONNECTING,new Jr.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){jg((0,DC.uriToString)(this.target)+" "+Ze.ConnectivityState[this.currentState]+" -> "+Ze.ConnectivityState[e]),e===Ze.ConnectivityState.IDLE&&(t=new Jr.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===Ze.ConnectivityState.IDLE&&(this.updateState(Ze.ConnectivityState.TRANSIENT_FAILURE,new Jr.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===Ze.ConnectivityState.IDLE||this.currentState===Ze.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=Ze.ConnectivityState.IDLE,this.latestChildPicker=new Jr.QueuePicker(this),this.currentState=Ze.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};sa.ResolvingLoadBalancer=Uu});var Hg=I(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.channelOptionsEqual=Xr.recognizedOptions=void 0;Xr.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function LC(n,e){let t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1)if(t[i]!==r[i]||n[t[i]]!==e[r[i]])return!1;return!0}Xr.channelOptionsEqual=LC});var zt=I(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.stringToSubchannelAddress=Vt.subchannelAddressToString=Vt.subchannelAddressEqual=Vt.isTcpSubchannelAddress=void 0;var FC=require("net");function ds(n){return"port"in n}Vt.isTcpSubchannelAddress=ds;function BC(n,e){return!n&&!e?!0:!n||!e?!1:ds(n)?ds(e)&&n.host===e.host&&n.port===e.port:!ds(e)&&n.path===e.path}Vt.subchannelAddressEqual=BC;function UC(n){return ds(n)?n.host+":"+n.port:n.path}Vt.subchannelAddressToString=UC;var qC=443;function VC(n,e){return(0,FC.isIP)(n)?{host:n,port:e??qC}:{path:n}}Vt.stringToSubchannelAddress=VC});var oa=I(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.addAdminServicesToServer=Zr.registerAdminService=void 0;var $g=[];function zC(n,e){$g.push({getServiceDefinition:n,getHandlers:e})}Zr.registerAdminService=zC;function GC(n){for(let{getServiceDefinition:e,getHandlers:t}of $g)n.addService(e(),t())}Zr.addAdminServicesToServer=GC});var Kg=I(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.ClientDuplexStreamImpl=gt.ClientWritableStreamImpl=gt.ClientReadableStreamImpl=gt.ClientUnaryCallImpl=gt.callErrorFromStatus=void 0;var jC=require("events"),ju=require("stream"),hs=ie();function WC(n,e){let t=`${n.code} ${hs.Status[n.code]}: ${n.details}`,i=`${new Error(t).stack}
for call at
${e}`;return Object.assign(new Error(t),n,{stack:i})}gt.callErrorFromStatus=WC;var qu=class extends jC.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(hs.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}};gt.ClientUnaryCallImpl=qu;var Vu=class extends ju.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(hs.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}};gt.ClientReadableStreamImpl=Vu;var zu=class extends ju.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(hs.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};gt.ClientWritableStreamImpl=zu;var Gu=class extends ju.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(hs.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};gt.ClientDuplexStreamImpl=Gu});var Qg=I(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.InterceptingListenerImpl=ei.isInterceptingListener=void 0;function HC(n){return n.onReceiveMetadata!==void 0&&n.onReceiveMetadata.length===1}ei.isInterceptingListener=HC;var Wu=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,t=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(t),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,t=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=t,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(t),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,t=>{this.processingMetadata||this.processingMessage?this.pendingStatus=t:this.nextListener.onReceiveStatus(t)})}};ei.InterceptingListenerImpl=Wu});var Xu=I(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.getInterceptingCall=yt.InterceptingCall=yt.RequesterBuilder=yt.ListenerBuilder=yt.InterceptorConfigurationError=void 0;var $C=Xe(),Yg=Qg(),Jg=ie(),Xg=Wo(),ps=class n extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,n)}};yt.InterceptorConfigurationError=ps;var $u=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};yt.ListenerBuilder=$u;var Ku=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};yt.RequesterBuilder=Ku;var Hu={onReceiveMetadata:(n,e)=>{e(n)},onReceiveMessage:(n,e)=>{e(n)},onReceiveStatus:(n,e)=>{e(n)}},fs={start:(n,e,t)=>{t(n,e)},sendMessage:(n,e)=>{e(n)},halfClose:n=>{n()},cancel:n=>{n()}},Qu=class{constructor(e,t){var r,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:(r=t.start)!==null&&r!==void 0?r:fs.start,sendMessage:(i=t.sendMessage)!==null&&i!==void 0?i:fs.sendMessage,halfClose:(s=t.halfClose)!==null&&s!==void 0?s:fs.halfClose,cancel:(o=t.cancel)!==null&&o!==void 0?o:fs.cancel}:this.requester=fs}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,i,s,o,a,c;let l={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:u=>{},onReceiveMessage:(o=(s=t?.onReceiveMessage)===null||s===void 0?void 0:s.bind(t))!==null&&o!==void 0?o:u=>{},onReceiveStatus:(c=(a=t?.onReceiveStatus)===null||a===void 0?void 0:a.bind(t))!==null&&c!==void 0?c:u=>{}};this.processingMetadata=!0,this.requester.start(e,l,(u,p)=>{var m,S,E;this.processingMetadata=!1;let w;if((0,Yg.isInterceptingListener)(p))w=p;else{let C={onReceiveMetadata:(m=p.onReceiveMetadata)!==null&&m!==void 0?m:Hu.onReceiveMetadata,onReceiveMessage:(S=p.onReceiveMessage)!==null&&S!==void 0?S:Hu.onReceiveMessage,onReceiveStatus:(E=p.onReceiveStatus)!==null&&E!==void 0?E:Hu.onReceiveStatus};w=new Yg.InterceptingListenerImpl(C,l)}this.nextCall.start(u,w),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};yt.InterceptingCall=Qu;function KC(n,e,t){var r,i;let s=(r=t.deadline)!==null&&r!==void 0?r:1/0,o=t.host,a=(i=t.parent)!==null&&i!==void 0?i:null,c=t.propagate_flags,l=t.credentials,u=n.createCall(e,s,o,a,c);return l&&u.setCredentials(l),u}var aa=class{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(i){this.call.cancelWithStatus(Jg.Status.INTERNAL,`Request message serialization failure: ${(0,Xg.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=t?.onReceiveMetadata)===null||s===void 0||s.call(t,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){r={code:Jg.Status.INTERNAL,details:`Response message parsing error: ${(0,Xg.getErrorMessage)(a)}`,metadata:new $C.Metadata},this.call.cancelWithStatus(r.code,r.details);return}(s=t?.onReceiveMessage)===null||s===void 0||s.call(t,o)},onReceiveStatus:i=>{var s,o;r?(s=t?.onReceiveStatus)===null||s===void 0||s.call(t,r):(o=t?.onReceiveStatus)===null||o===void 0||o.call(t,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},Yu=class extends aa{constructor(e,t){super(e,t)}start(e,t){var r,i;let s=!1,o={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:a=>{},onReceiveMessage:a=>{var c;s=!0,(c=t?.onReceiveMessage)===null||c===void 0||c.call(t,a)},onReceiveStatus:a=>{var c,l;s||(c=t?.onReceiveMessage)===null||c===void 0||c.call(t,null),(l=t?.onReceiveStatus)===null||l===void 0||l.call(t,a)}};super.start(e,o),this.call.startRead()}},Ju=class extends aa{};function QC(n,e,t){let r=KC(n,t.path,e);return t.responseStream?new Ju(r,t):new Yu(r,t)}function YC(n,e,t,r){if(n.clientInterceptors.length>0&&n.clientInterceptorProviders.length>0)throw new ps("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(n.callInterceptors.length>0&&n.callInterceptorProviders.length>0)throw new ps("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];n.callInterceptors.length>0||n.callInterceptorProviders.length>0?i=[].concat(n.callInterceptors,n.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(n.clientInterceptors,n.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},t,{method_definition:e});return i.reduceRight((a,c)=>l=>c(l,a),a=>QC(r,a,e))(s)}yt.getInterceptingCall=YC});var td=I(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.Client=void 0;var Gt=Kg(),JC=nd(),XC=pt(),Un=ie(),ti=Xe(),ca=Xu(),Ct=Symbol(),ni=Symbol(),ri=Symbol(),dn=Symbol();function Zu(n){return typeof n=="function"}function ii(n){return n.stack.split(`
`).slice(1).join(`
`)}var ed=class{constructor(e,t,r={}){var i,s;if(r=Object.assign({},r),this[ni]=(i=r.interceptors)!==null&&i!==void 0?i:[],delete r.interceptors,this[ri]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[],delete r.interceptor_providers,this[ni].length>0&&this[ri].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[dn]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[Ct]=r.channelOverride;else if(r.channelFactoryOverride){let o=r.channelFactoryOverride;delete r.channelFactoryOverride,this[Ct]=o(e,t,r)}else this[Ct]=new JC.ChannelImplementation(e,t,r)}close(){this[Ct].close()}getChannel(){return this[Ct]}waitForReady(e,t){let r=i=>{if(i){t(new Error("Failed to connect before the deadline"));return}let s;try{s=this[Ct].getConnectivityState(!0)}catch{t(new Error("The channel has been closed"));return}if(s===XC.ConnectivityState.READY)t();else try{this[Ct].watchConnectivityState(s,e,r)}catch{t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(Zu(e))return{metadata:new ti.Metadata,options:{},callback:e};if(Zu(t))return e instanceof ti.Metadata?{metadata:e,options:{},callback:t}:{metadata:new ti.Metadata,options:e,callback:t};if(!(e instanceof ti.Metadata&&t instanceof Object&&Zu(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,a){var c,l;let u=this.checkOptionalUnaryResponseArguments(s,o,a),p={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},m={argument:i,metadata:u.metadata,call:new Gt.ClientUnaryCallImpl,channel:this[Ct],methodDefinition:p,callOptions:u.options,callback:u.callback};this[dn]&&(m=this[dn](m));let S=m.call,E={clientInterceptors:this[ni],clientInterceptorProviders:this[ri],callInterceptors:(c=m.callOptions.interceptors)!==null&&c!==void 0?c:[],callInterceptorProviders:(l=m.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},w=(0,ca.getInterceptingCall)(E,m.methodDefinition,m.callOptions,m.channel);S.call=w;let C=null,N=!1,x=new Error;return w.start(m.metadata,{onReceiveMetadata:M=>{S.emit("metadata",M)},onReceiveMessage(M){C!==null&&w.cancelWithStatus(Un.Status.INTERNAL,"Too many responses received"),C=M},onReceiveStatus(M){if(!N){if(N=!0,M.code===Un.Status.OK)if(C===null){let b=ii(x);m.callback((0,Gt.callErrorFromStatus)({code:Un.Status.INTERNAL,details:"No message received",metadata:M.metadata},b))}else m.callback(null,C);else{let b=ii(x);m.callback((0,Gt.callErrorFromStatus)(M,b))}x=null,S.emit("status",M)}}}),w.sendMessage(i),w.halfClose(),S}makeClientStreamRequest(e,t,r,i,s,o){var a,c;let l=this.checkOptionalUnaryResponseArguments(i,s,o),u={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},p={metadata:l.metadata,call:new Gt.ClientWritableStreamImpl(t),channel:this[Ct],methodDefinition:u,callOptions:l.options,callback:l.callback};this[dn]&&(p=this[dn](p));let m=p.call,S={clientInterceptors:this[ni],clientInterceptorProviders:this[ri],callInterceptors:(a=p.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(c=p.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},E=(0,ca.getInterceptingCall)(S,p.methodDefinition,p.callOptions,p.channel);m.call=E;let w=null,C=!1,N=new Error;return E.start(p.metadata,{onReceiveMetadata:x=>{m.emit("metadata",x)},onReceiveMessage(x){w!==null&&E.cancelWithStatus(Un.Status.INTERNAL,"Too many responses received"),w=x},onReceiveStatus(x){if(!C){if(C=!0,x.code===Un.Status.OK)if(w===null){let M=ii(N);p.callback((0,Gt.callErrorFromStatus)({code:Un.Status.INTERNAL,details:"No message received",metadata:x.metadata},M))}else p.callback(null,w);else{let M=ii(N);p.callback((0,Gt.callErrorFromStatus)(x,M))}N=null,m.emit("status",x)}}}),m}checkMetadataAndOptions(e,t){let r,i;return e instanceof ti.Metadata?(r=e,t?i=t:i={}):(e?i=e:i={},r=new ti.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,t,r,i,s,o){var a,c;let l=this.checkMetadataAndOptions(s,o),u={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},p={argument:i,metadata:l.metadata,call:new Gt.ClientReadableStreamImpl(r),channel:this[Ct],methodDefinition:u,callOptions:l.options};this[dn]&&(p=this[dn](p));let m=p.call,S={clientInterceptors:this[ni],clientInterceptorProviders:this[ri],callInterceptors:(a=p.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(c=p.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},E=(0,ca.getInterceptingCall)(S,p.methodDefinition,p.callOptions,p.channel);m.call=E;let w=!1,C=new Error;return E.start(p.metadata,{onReceiveMetadata(N){m.emit("metadata",N)},onReceiveMessage(N){m.push(N)},onReceiveStatus(N){if(!w){if(w=!0,m.push(null),N.code!==Un.Status.OK){let x=ii(C);m.emit("error",(0,Gt.callErrorFromStatus)(N,x))}C=null,m.emit("status",N)}}}),E.sendMessage(i),E.halfClose(),m}makeBidiStreamRequest(e,t,r,i,s){var o,a;let c=this.checkMetadataAndOptions(i,s),l={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},u={metadata:c.metadata,call:new Gt.ClientDuplexStreamImpl(t,r),channel:this[Ct],methodDefinition:l,callOptions:c.options};this[dn]&&(u=this[dn](u));let p=u.call,m={clientInterceptors:this[ni],clientInterceptorProviders:this[ri],callInterceptors:(o=u.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=u.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},S=(0,ca.getInterceptingCall)(m,u.methodDefinition,u.callOptions,u.channel);p.call=S;let E=!1,w=new Error;return S.start(u.metadata,{onReceiveMetadata(C){p.emit("metadata",C)},onReceiveMessage(C){p.push(C)},onReceiveStatus(C){if(!E){if(E=!0,p.push(null),C.code!==Un.Status.OK){let N=ii(w);p.emit("error",(0,Gt.callErrorFromStatus)(C,N))}w=null,p.emit("status",C)}}}),p}};la.Client=ed});var id=I(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.loadPackageDefinition=si.makeClientConstructor=void 0;var ms=td(),ZC={unary:ms.Client.prototype.makeUnaryRequest,server_stream:ms.Client.prototype.makeServerStreamRequest,client_stream:ms.Client.prototype.makeClientStreamRequest,bidi:ms.Client.prototype.makeBidiStreamRequest};function rd(n){return["__proto__","prototype","constructor"].includes(n)}function Zg(n,e,t){t||(t={});class r extends ms.Client{}return Object.keys(n).forEach(i=>{if(rd(i))return;let s=n[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,c=s.responseDeserialize,l=eI(ZC[o],s.path,a,c);r.prototype[i]=l,Object.assign(r.prototype[i],s),s.originalName&&!rd(s.originalName)&&(r.prototype[s.originalName]=r.prototype[i])}),r.service=n,r.serviceName=e,r}si.makeClientConstructor=Zg;function eI(n,e,t,r){return function(...i){return n.call(this,e,t,r,...i)}}function tI(n){return"format"in n}function nI(n){let e={};for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t],i=t.split(".");if(i.some(a=>rd(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];tI(r)?o[s]=r:o[s]=Zg(r,s,{})}return e}si.loadPackageDefinition=nI});var wy=I((ZF,by)=>{var rI=1/0,iI="[object Symbol]",sI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oI=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,da="\\ud800-\\udfff",ay="\\u0300-\\u036f\\ufe20-\\ufe23",cy="\\u20d0-\\u20f0",ly="\\u2700-\\u27bf",uy="a-z\\xdf-\\xf6\\xf8-\\xff",aI="\\xac\\xb1\\xd7\\xf7",cI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lI="\\u2000-\\u206f",uI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dy="A-Z\\xc0-\\xd6\\xd8-\\xde",hy="\\ufe0e\\ufe0f",fy=aI+cI+lI+uI,od="['\u2019]",dI="["+da+"]",ey="["+fy+"]",ua="["+ay+cy+"]",py="\\d+",hI="["+ly+"]",my="["+uy+"]",gy="[^"+da+fy+py+ly+uy+dy+"]",sd="\\ud83c[\\udffb-\\udfff]",fI="(?:"+ua+"|"+sd+")",yy="[^"+da+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",cd="[\\ud800-\\udbff][\\udc00-\\udfff]",oi="["+dy+"]",vy="\\u200d",ty="(?:"+my+"|"+gy+")",pI="(?:"+oi+"|"+gy+")",ny="(?:"+od+"(?:d|ll|m|re|s|t|ve))?",ry="(?:"+od+"(?:D|LL|M|RE|S|T|VE))?",_y=fI+"?",Ty="["+hy+"]?",mI="(?:"+vy+"(?:"+[yy,ad,cd].join("|")+")"+Ty+_y+")*",Sy=Ty+_y+mI,gI="(?:"+[hI,ad,cd].join("|")+")"+Sy,yI="(?:"+[yy+ua+"?",ua,ad,cd,dI].join("|")+")",vI=RegExp(od,"g"),_I=RegExp(ua,"g"),TI=RegExp(sd+"(?="+sd+")|"+yI+Sy,"g"),SI=RegExp([oi+"?"+my+"+"+ny+"(?="+[ey,oi,"$"].join("|")+")",pI+"+"+ry+"(?="+[ey,oi+ty,"$"].join("|")+")",oi+"?"+ty+"+"+ny,oi+"+"+ry,py,gI].join("|"),"g"),EI=RegExp("["+vy+da+ay+cy+hy+"]"),bI=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},CI=typeof global=="object"&&global&&global.Object===Object&&global,II=typeof self=="object"&&self&&self.Object===Object&&self,AI=CI||II||Function("return this")();function RI(n,e,t,r){var i=-1,s=n?n.length:0;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}function DI(n){return n.split("")}function OI(n){return n.match(sI)||[]}function NI(n){return function(e){return n?.[e]}}var kI=NI(wI);function Ey(n){return EI.test(n)}function PI(n){return bI.test(n)}function xI(n){return Ey(n)?MI(n):DI(n)}function MI(n){return n.match(TI)||[]}function LI(n){return n.match(SI)||[]}var FI=Object.prototype,BI=FI.toString,iy=AI.Symbol,sy=iy?iy.prototype:void 0,oy=sy?sy.toString:void 0;function UI(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function qI(n){if(typeof n=="string")return n;if(WI(n))return oy?oy.call(n):"";var e=n+"";return e=="0"&&1/n==-rI?"-0":e}function VI(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:UI(n,e,t)}function zI(n){return function(e){e=ha(e);var t=Ey(e)?xI(e):void 0,r=t?t[0]:e.charAt(0),i=t?VI(t,1).join(""):e.slice(1);return r[n]()+i}}function GI(n){return function(e){return RI(YI(KI(e).replace(vI,"")),n,"")}}function jI(n){return!!n&&typeof n=="object"}function WI(n){return typeof n=="symbol"||jI(n)&&BI.call(n)==iI}function ha(n){return n==null?"":qI(n)}var HI=GI(function(n,e,t){return e=e.toLowerCase(),n+(t?$I(e):e)});function $I(n){return QI(ha(n).toLowerCase())}function KI(n){return n=ha(n),n&&n.replace(oI,kI).replace(_I,"")}var QI=zI("toUpperCase");function YI(n,e,t){return n=ha(n),e=t?void 0:e,e===void 0?PI(n)?LI(n):OI(n):n.match(e)||[]}by.exports=HI});var ld=I((eB,Cy)=>{"use strict";Cy.exports=JI;function JI(n,e){for(var t=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)t[r++]=arguments[i++];return new Promise(function(a,c){t[r]=function(u){if(s)if(s=!1,u)c(u);else{for(var p=new Array(arguments.length-1),m=0;m<p.length;)p[m++]=arguments[m];a.apply(null,p)}};try{n.apply(e||null,t)}catch(l){s&&(s=!1,c(l))}})}});var Dy=I(Ry=>{"use strict";var fa=Ry;fa.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&e.charAt(t)==="=";)++r;return Math.ceil(e.length*3)/4-r};var ai=new Array(64),Ay=new Array(123);for(It=0;It<64;)Ay[ai[It]=It<26?It+65:It<52?It+71:It<62?It-4:It-59|43]=It++;var It;fa.encode=function(e,t,r){for(var i=null,s=[],o=0,a=0,c;t<r;){var l=e[t++];switch(a){case 0:s[o++]=ai[l>>2],c=(l&3)<<4,a=1;break;case 1:s[o++]=ai[c|l>>4],c=(l&15)<<2,a=2;break;case 2:s[o++]=ai[c|l>>6],s[o++]=ai[l&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=ai[c],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Iy="invalid encoding";fa.decode=function(e,t,r){for(var i=r,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=Ay[c])===void 0)throw Error(Iy);switch(s){case 0:o=c,s=1;break;case 1:t[r++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:t[r++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:t[r++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(Iy);return r-i};fa.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ny=I((nB,Oy)=>{"use strict";Oy.exports=pa;function pa(){this._listeners={}}pa.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this};pa.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this};pa.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}});var By=I((rB,Fy)=>{"use strict";Fy.exports=ky(ky);function ky(n){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),r=t[3]===128;function i(c,l,u){e[0]=c,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3]}function s(c,l,u){e[0]=c,l[u]=t[3],l[u+1]=t[2],l[u+2]=t[1],l[u+3]=t[0]}n.writeFloatLE=r?i:s,n.writeFloatBE=r?s:i;function o(c,l){return t[0]=c[l],t[1]=c[l+1],t[2]=c[l+2],t[3]=c[l+3],e[0]}function a(c,l){return t[3]=c[l],t[2]=c[l+1],t[1]=c[l+2],t[0]=c[l+3],e[0]}n.readFloatLE=r?o:a,n.readFloatBE=r?a:o}():function(){function e(r,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)r(1/i>0?0:2147483648,s,o);else if(isNaN(i))r(2143289344,s,o);else if(i>34028234663852886e22)r((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)r((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(i)/Math.LN2),l=Math.round(i*Math.pow(2,-c)*8388608)&8388607;r((a<<31|c+127<<23|l)>>>0,s,o)}}n.writeFloatLE=e.bind(null,Py),n.writeFloatBE=e.bind(null,xy);function t(r,i,s){var o=r(i,s),a=(o>>31)*2+1,c=o>>>23&255,l=o&8388607;return c===255?l?NaN:a*(1/0):c===0?a*1401298464324817e-60*l:a*Math.pow(2,c-150)*(l+8388608)}n.readFloatLE=t.bind(null,My),n.readFloatBE=t.bind(null,Ly)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),r=t[7]===128;function i(c,l,u){e[0]=c,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3],l[u+4]=t[4],l[u+5]=t[5],l[u+6]=t[6],l[u+7]=t[7]}function s(c,l,u){e[0]=c,l[u]=t[7],l[u+1]=t[6],l[u+2]=t[5],l[u+3]=t[4],l[u+4]=t[3],l[u+5]=t[2],l[u+6]=t[1],l[u+7]=t[0]}n.writeDoubleLE=r?i:s,n.writeDoubleBE=r?s:i;function o(c,l){return t[0]=c[l],t[1]=c[l+1],t[2]=c[l+2],t[3]=c[l+3],t[4]=c[l+4],t[5]=c[l+5],t[6]=c[l+6],t[7]=c[l+7],e[0]}function a(c,l){return t[7]=c[l],t[6]=c[l+1],t[5]=c[l+2],t[4]=c[l+3],t[3]=c[l+4],t[2]=c[l+5],t[1]=c[l+6],t[0]=c[l+7],e[0]}n.readDoubleLE=r?o:a,n.readDoubleBE=r?a:o}():function(){function e(r,i,s,o,a,c){var l=o<0?1:0;if(l&&(o=-o),o===0)r(0,a,c+i),r(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))r(0,a,c+i),r(2146959360,a,c+s);else if(o>17976931348623157e292)r(0,a,c+i),r((l<<31|2146435072)>>>0,a,c+s);else{var u;if(o<22250738585072014e-324)u=o/5e-324,r(u>>>0,a,c+i),r((l<<31|u/4294967296)>>>0,a,c+s);else{var p=Math.floor(Math.log(o)/Math.LN2);p===1024&&(p=1023),u=o*Math.pow(2,-p),r(u*4503599627370496>>>0,a,c+i),r((l<<31|p+1023<<20|u*1048576&1048575)>>>0,a,c+s)}}}n.writeDoubleLE=e.bind(null,Py,0,4),n.writeDoubleBE=e.bind(null,xy,4,0);function t(r,i,s,o,a){var c=r(o,a+i),l=r(o,a+s),u=(l>>31)*2+1,p=l>>>20&2047,m=4294967296*(l&1048575)+c;return p===2047?m?NaN:u*(1/0):p===0?u*5e-324*m:u*Math.pow(2,p-1075)*(m+4503599627370496)}n.readDoubleLE=t.bind(null,My,0,4),n.readDoubleBE=t.bind(null,Ly,4,0)}(),n}function Py(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function xy(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=n&255}function My(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function Ly(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}});var ud=I((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}});var qy=I(Uy=>{"use strict";var dd=Uy;dd.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};dd.read=function(e,t,r){var i=r-t;if(i<1)return"";for(var s=null,o=[],a=0,c;t<r;)c=e[t++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[t++]&63:c>239&&c<365?(c=((c&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};dd.write=function(e,t,r){for(var i=r,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128);return r-i}});var zy=I((sB,Vy)=>{"use strict";Vy.exports=XI;function XI(n,e,t){var r=t||8192,i=r>>>1,s=null,o=r;return function(c){if(c<1||c>i)return n(c);o+c>r&&(s=n(r),o=0);var l=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),l}}});var jy=I((oB,Gy)=>{"use strict";Gy.exports=Ie;var gs=jt();function Ie(n,e){this.lo=n>>>0,this.hi=e>>>0}var pr=Ie.zero=new Ie(0,0);pr.toNumber=function(){return 0};pr.zzEncode=pr.zzDecode=function(){return this};pr.length=function(){return 1};var ZI=Ie.zeroHash="\0\0\0\0\0\0\0\0";Ie.fromNumber=function(e){if(e===0)return pr;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new Ie(r,i)};Ie.from=function(e){if(typeof e=="number")return Ie.fromNumber(e);if(gs.isString(e))if(gs.Long)e=gs.Long.fromString(e);else return Ie.fromNumber(parseInt(e,10));return e.low||e.high?new Ie(e.low>>>0,e.high>>>0):pr};Ie.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+r*4294967296)}return this.lo+this.hi*4294967296};Ie.prototype.toLong=function(e){return gs.Long?new gs.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var qn=String.prototype.charCodeAt;Ie.fromHash=function(e){return e===ZI?pr:new Ie((qn.call(e,0)|qn.call(e,1)<<8|qn.call(e,2)<<16|qn.call(e,3)<<24)>>>0,(qn.call(e,4)|qn.call(e,5)<<8|qn.call(e,6)<<16|qn.call(e,7)<<24)>>>0)};Ie.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ie.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ie.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ie.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}});var jt=I(hd=>{"use strict";var q=hd;q.asPromise=ld();q.base64=Dy();q.EventEmitter=Ny();q.float=By();q.inquire=ud();q.utf8=qy();q.pool=zy();q.LongBits=jy();q.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);q.global=q.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||hd;q.emptyArray=Object.freeze?Object.freeze([]):[];q.emptyObject=Object.freeze?Object.freeze({}):{};q.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};q.isString=function(e){return typeof e=="string"||e instanceof String};q.isObject=function(e){return e&&typeof e=="object"};q.isset=q.isSet=function(e,t){var r=e[t];return r!=null&&e.hasOwnProperty(t)?typeof r!="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0:!1};q.Buffer=function(){try{var n=q.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}();q._Buffer_from=null;q._Buffer_allocUnsafe=null;q.newBuffer=function(e){return typeof e=="number"?q.Buffer?q._Buffer_allocUnsafe(e):new q.Array(e):q.Buffer?q._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};q.Array=typeof Uint8Array<"u"?Uint8Array:Array;q.Long=q.global.dcodeIO&&q.global.dcodeIO.Long||q.global.Long||q.inquire("long");q.key2Re=/^true|false|0|1$/;q.key32Re=/^-?(?:0|[1-9][0-9]*)$/;q.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;q.longToHash=function(e){return e?q.LongBits.from(e).toHash():q.LongBits.zeroHash};q.longFromHash=function(e,t){var r=q.LongBits.fromHash(e);return q.Long?q.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)};function Wy(n,e,t){for(var r=Object.keys(e),i=0;i<r.length;++i)(n[r[i]]===void 0||!t)&&(n[r[i]]=e[r[i]]);return n}q.merge=Wy;q.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Hy(n){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),r&&Wy(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}q.newError=Hy;q.ProtocolError=Hy("ProtocolError");q.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(t[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};q.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}};q.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};q._configure=function(){var n=q.Buffer;if(!n){q._Buffer_from=q._Buffer_allocUnsafe=null;return}q._Buffer_from=n.from!==Uint8Array.from&&n.from||function(t,r){return new n(t,r)},q._Buffer_allocUnsafe=n.allocUnsafe||function(t){return new n(t)}}});var ga=I((cB,Yy)=>{"use strict";Yy.exports=te;var vt=jt(),fd,ma=vt.LongBits,$y=vt.base64,Ky=vt.utf8;function ys(n,e,t){this.fn=n,this.len=e,this.next=void 0,this.val=t}function md(){}function eA(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function te(){this.len=0,this.head=new ys(md,0,0),this.tail=this.head,this.states=null}var Qy=function(){return vt.Buffer?function(){return(te.create=function(){return new fd})()}:function(){return new te}};te.create=Qy();te.alloc=function(e){return new vt.Array(e)};vt.Array!==Array&&(te.alloc=vt.pool(te.alloc,vt.Array.prototype.subarray));te.prototype._push=function(e,t,r){return this.tail=this.tail.next=new ys(e,t,r),this.len+=t,this};function gd(n,e,t){e[t]=n&255}function tA(n,e,t){for(;n>127;)e[t++]=n&127|128,n>>>=7;e[t]=n}function yd(n,e){this.len=n,this.next=void 0,this.val=e}yd.prototype=Object.create(ys.prototype);yd.prototype.fn=tA;te.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new yd((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};te.prototype.int32=function(e){return e<0?this._push(vd,10,ma.fromNumber(e)):this.uint32(e)};te.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function vd(n,e,t){for(;n.hi;)e[t++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[t++]=n.lo&127|128,n.lo=n.lo>>>7;e[t++]=n.lo}te.prototype.uint64=function(e){var t=ma.from(e);return this._push(vd,t.length(),t)};te.prototype.int64=te.prototype.uint64;te.prototype.sint64=function(e){var t=ma.from(e).zzEncode();return this._push(vd,t.length(),t)};te.prototype.bool=function(e){return this._push(gd,1,e?1:0)};function pd(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}te.prototype.fixed32=function(e){return this._push(pd,4,e>>>0)};te.prototype.sfixed32=te.prototype.fixed32;te.prototype.fixed64=function(e){var t=ma.from(e);return this._push(pd,4,t.lo)._push(pd,4,t.hi)};te.prototype.sfixed64=te.prototype.fixed64;te.prototype.float=function(e){return this._push(vt.float.writeFloatLE,4,e)};te.prototype.double=function(e){return this._push(vt.float.writeDoubleLE,8,e)};var nA=vt.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};te.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(gd,1,0);if(vt.isString(e)){var r=te.alloc(t=$y.length(e));$y.decode(e,r,0),e=r}return this.uint32(t)._push(nA,t,e)};te.prototype.string=function(e){var t=Ky.length(e);return t?this.uint32(t)._push(Ky.write,t,e):this._push(gd,1,0)};te.prototype.fork=function(){return this.states=new eA(this),this.head=this.tail=new ys(md,0,0),this.len=0,this};te.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ys(md,0,0),this.len=0),this};te.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this};te.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t};te._configure=function(n){fd=n,te.create=Qy(),fd._configure()}});var Zy=I((lB,Xy)=>{"use strict";Xy.exports=Wt;var Jy=ga();(Wt.prototype=Object.create(Jy.prototype)).constructor=Wt;var Vn=jt();function Wt(){Jy.call(this)}Wt._configure=function(){Wt.alloc=Vn._Buffer_allocUnsafe,Wt.writeBytesBuffer=Vn.Buffer&&Vn.Buffer.prototype instanceof Uint8Array&&Vn.Buffer.prototype.set.name==="set"?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}};Wt.prototype.bytes=function(e){Vn.isString(e)&&(e=Vn._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Wt.writeBytesBuffer,t,e),this};function rA(n,e,t){n.length<40?Vn.utf8.write(n,e,t):e.utf8Write?e.utf8Write(n,t):e.write(n,t)}Wt.prototype.string=function(e){var t=Vn.Buffer.byteLength(e);return this.uint32(t),t&&this._push(rA,t,e),this};Wt._configure()});var va=I((uB,iv)=>{"use strict";iv.exports=ve;var At=jt(),Td,nv=At.LongBits,iA=At.utf8;function Rt(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function ve(n){this.buf=n,this.pos=0,this.len=n.length}var ev=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new ve(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new ve(e);throw Error("illegal buffer")},rv=function(){return At.Buffer?function(t){return(ve.create=function(i){return At.Buffer.isBuffer(i)?new Td(i):ev(i)})(t)}:ev};ve.create=rv();ve.prototype._slice=At.Array.prototype.subarray||At.Array.prototype.slice;ve.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Rt(this,10);return e}}();ve.prototype.int32=function(){return this.uint32()|0};ve.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function _d(){var n=new nv(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Rt(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw Rt(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}ve.prototype.bool=function(){return this.uint32()!==0};function ya(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}ve.prototype.fixed32=function(){if(this.pos+4>this.len)throw Rt(this,4);return ya(this.buf,this.pos+=4)};ve.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Rt(this,4);return ya(this.buf,this.pos+=4)|0};function tv(){if(this.pos+8>this.len)throw Rt(this,8);return new nv(ya(this.buf,this.pos+=4),ya(this.buf,this.pos+=4))}ve.prototype.float=function(){if(this.pos+4>this.len)throw Rt(this,4);var e=At.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};ve.prototype.double=function(){if(this.pos+8>this.len)throw Rt(this,4);var e=At.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};ve.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw Rt(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=At.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)};ve.prototype.string=function(){var e=this.bytes();return iA.read(e,0,e.length)};ve.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Rt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Rt(this);while(this.buf[this.pos++]&128);return this};ve.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};ve._configure=function(n){Td=n,ve.create=rv(),Td._configure();var e=At.Long?"toLong":"toNumber";At.merge(ve.prototype,{int64:function(){return _d.call(this)[e](!1)},uint64:function(){return _d.call(this)[e](!0)},sint64:function(){return _d.call(this).zzDecode()[e](!1)},fixed64:function(){return tv.call(this)[e](!0)},sfixed64:function(){return tv.call(this)[e](!1)}})}});var cv=I((dB,av)=>{"use strict";av.exports=mr;var ov=va();(mr.prototype=Object.create(ov.prototype)).constructor=mr;var sv=jt();function mr(n){ov.call(this,n)}mr._configure=function(){sv.Buffer&&(mr.prototype._slice=sv.Buffer.prototype.slice)};mr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};mr._configure()});var uv=I((hB,lv)=>{"use strict";lv.exports=vs;var Sd=jt();(vs.prototype=Object.create(Sd.EventEmitter.prototype)).constructor=vs;function vs(n,e,t){if(typeof n!="function")throw TypeError("rpcImpl must be a function");Sd.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=!!e,this.responseDelimited=!!t}vs.prototype.rpcCall=function n(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Sd.asPromise(n,o,e,t,r,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(c,l){if(c)return o.emit("error",c,e),s(c);if(l===null){o.end(!0);return}if(!(l instanceof r))try{l=r[o.responseDelimited?"decodeDelimited":"decode"](l)}catch(u){return o.emit("error",u,e),s(u)}return o.emit("data",l,e),s(null,l)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};vs.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Ed=I(dv=>{"use strict";var sA=dv;sA.Service=uv()});var bd=I((pB,hv)=>{"use strict";hv.exports={}});var mv=I(pv=>{"use strict";var et=pv;et.build="minimal";et.Writer=ga();et.BufferWriter=Zy();et.Reader=va();et.BufferReader=cv();et.util=jt();et.rpc=Ed();et.roots=bd();et.configure=fv;function fv(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}fv()});var yv=I((gB,gv)=>{"use strict";gv.exports=wd;function wd(n,e){typeof n=="string"&&(e=n,n=void 0);var t=[];function r(s){if(typeof s!="string"){var o=i();if(wd.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),c=new Array(a.length+1),l=new Array(a.length),u=0;u<a.length;)c[u]=a[u],l[u]=s[a[u++]];return c[u]=o,Function.apply(null,c).apply(null,l)}return Function(o)()}for(var p=new Array(arguments.length-1),m=0;m<p.length;)p[m]=arguments[++m];if(m=0,s=s.replace(/%([%dfijs])/g,function(E,w){var C=p[m++];switch(w){case"d":case"f":return String(Number(C));case"i":return String(Math.floor(C));case"j":return JSON.stringify(C);case"s":return String(C)}return"%"}),m!==p.length)throw Error("parameter count mismatch");return t.push(s),r}function i(s){return"function "+(s||e||"")+"("+(n&&n.join(",")||"")+`){
  `+t.join(`
  `)+`
}`}return r.toString=i,r}wd.verbose=!1});var _v=I((yB,vv)=>{"use strict";vv.exports=_s;var oA=ld(),aA=ud(),Cd=aA("fs");function _s(n,e,t){return typeof e=="function"?(t=e,e={}):e||(e={}),t?!e.xhr&&Cd&&Cd.readFile?Cd.readFile(n,function(i,s){return i&&typeof XMLHttpRequest<"u"?_s.xhr(n,e,t):i?t(i):t(null,e.binary?s:s.toString("utf8"))}):_s.xhr(n,e,t):oA(_s,this,n,e)}_s.xhr=function(e,t,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(t.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return r(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return r(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var Ev=I(Sv=>{"use strict";var Ad=Sv,Tv=Ad.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Id=Ad.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=Tv(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)t[s]===".."?s>0&&t[s-1]!==".."?t.splice(--s,2):r?t.splice(s,1):++s:t[s]==="."?t.splice(s,1):++s;return i+t.join("/")};Ad.resolve=function(e,t,r){return r||(t=Id(t)),Tv(t)?t:(r||(e=Id(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Id(e+"/"+t):t)}});var li=I((_B,Cv)=>{"use strict";Cv.exports=Z;var _a=Gn();((Z.prototype=Object.create(_a.prototype)).constructor=Z).className="Namespace";var Rd=zn(),Ta=Ae(),cA=vr(),gr,ci,yr;Z.fromJSON=function(e,t){return new Z(e,t.options).addJSON(t.nested)};function bv(n,e){if(n&&n.length){for(var t={},r=0;r<n.length;++r)t[n[r].name]=n[r].toJSON(e);return t}}Z.arrayToJSON=bv;Z.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if(typeof e[r]!="string"&&e[r][0]<=t&&e[r][1]>t)return!0}return!1};Z.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1};function Z(n,e){_a.call(this,n,e),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function wv(n){n._nestedArray=null,n._lookupCache={};for(var e=n;e=e.parent;)e._lookupCache={};return n}Object.defineProperty(Z.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Ta.toArray(this.nested))}});Z.prototype.toJSON=function(e){return Ta.toObject(["options",this.options,"nested",bv(this.nestedArray,e)])};Z.prototype.addJSON=function(e){var t=this;if(e)for(var r=Object.keys(e),i=0,s;i<r.length;++i)s=e[r[i]],t.add((s.fields!==void 0?gr.fromJSON:s.values!==void 0?yr.fromJSON:s.methods!==void 0?ci.fromJSON:s.id!==void 0?Rd.fromJSON:Z.fromJSON)(r[i],s));return this};Z.prototype.get=function(e){return this.nested&&this.nested[e]||null};Z.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof yr)return this.nested[e].values;throw Error("no such enum: "+e)};Z.prototype.add=function(e){if(!(e instanceof Rd&&e.extend!==void 0||e instanceof gr||e instanceof cA||e instanceof yr||e instanceof ci||e instanceof Z))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t)if(t instanceof Z&&e instanceof Z&&!(t instanceof gr||t instanceof ci)){for(var r=t.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}this.nested[e.name]=e,this instanceof gr||this instanceof ci||this instanceof yr||this instanceof Rd||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var s=this;s=s.parent;)s._needsRecursiveFeatureResolution=!0,s._needsRecursiveResolve=!0;return e.onAdd(this),wv(this)};Z.prototype.remove=function(e){if(!(e instanceof _a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),wv(this)};Z.prototype.define=function(e,t){if(Ta.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(r=r.nested[i],!(r instanceof Z))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Z(i))}return t&&r.addJSON(t),r};Z.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;var e=this.nestedArray,t=0;for(this.resolve();t<e.length;)e[t]instanceof Z?e[t++].resolveAll():e[t++].resolve();return this._needsRecursiveResolve=!1,this};Z.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,_a.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this};Z.prototype.lookup=function(e,t,r){if(typeof t=="boolean"?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),Ta.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;var i=e.join(".");if(e[0]==="")return this.root.lookup(e.slice(1),t);var s=this.root._fullyQualifiedObjects["."+i];if(s&&(!t||t.indexOf(s.constructor)>-1)||(s=this._lookupImpl(e,i),s&&(!t||t.indexOf(s.constructor)>-1)))return s;if(r)return null;for(var o=this;o.parent;){if(s=o.parent._lookupImpl(e,i),s&&(!t||t.indexOf(s.constructor)>-1))return s;o=o.parent}return null};Z.prototype._lookupImpl=function(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t))return this._lookupCache[t];var r=this.get(e[0]),i=null;if(r)e.length===1?i=r:r instanceof Z&&(e=e.slice(1),i=r._lookupImpl(e,e.join(".")));else for(var s=0;s<this.nestedArray.length;++s)this._nestedArray[s]instanceof Z&&(r=this._nestedArray[s]._lookupImpl(e,t))&&(i=r);return this._lookupCache[t]=i,i};Z.prototype.lookupType=function(e){var t=this.lookup(e,[gr]);if(!t)throw Error("no such type: "+e);return t};Z.prototype.lookupEnum=function(e){var t=this.lookup(e,[yr]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Z.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[gr,yr]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Z.prototype.lookupService=function(e){var t=this.lookup(e,[ci]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Z._configure=function(n,e,t){gr=n,ci=e,yr=t}});var Sa=I((TB,Iv)=>{"use strict";Iv.exports=hn;var Dd=zn();((hn.prototype=Object.create(Dd.prototype)).constructor=hn).className="MapField";var lA=_r(),Ts=Ae();function hn(n,e,t,r,i,s){if(Dd.call(this,n,e,r,void 0,void 0,i,s),!Ts.isString(t))throw TypeError("keyType must be a string");this.keyType=t,this.resolvedKeyType=null,this.map=!0}hn.fromJSON=function(e,t){return new hn(e,t.id,t.keyType,t.type,t.options,t.comment)};hn.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Ts.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};hn.prototype.resolve=function(){if(this.resolved)return this;if(lA.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Dd.prototype.resolve.call(this)};hn.d=function(e,t,r){return typeof r=="function"?r=Ts.decorateType(r).name:r&&typeof r=="object"&&(r=Ts.decorateEnum(r).name),function(s,o){Ts.decorateType(s.constructor).add(new hn(o,e,t,r))}}});var Ea=I((SB,Av)=>{"use strict";Av.exports=Tr;var Od=Gn();((Tr.prototype=Object.create(Od.prototype)).constructor=Tr).className="Method";var ui=Ae();function Tr(n,e,t,r,i,s,o,a,c){if(ui.isObject(i)?(o=i,i=s=void 0):ui.isObject(s)&&(o=s,s=void 0),!(e===void 0||ui.isString(e)))throw TypeError("type must be a string");if(!ui.isString(t))throw TypeError("requestType must be a string");if(!ui.isString(r))throw TypeError("responseType must be a string");Od.call(this,n,o),this.type=e||"rpc",this.requestType=t,this.requestStream=i?!0:void 0,this.responseType=r,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=c}Tr.fromJSON=function(e,t){return new Tr(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};Tr.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return ui.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])};Tr.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Od.prototype.resolve.call(this))}});var ba=I((EB,Dv)=>{"use strict";Dv.exports=st;var fn=li();((st.prototype=Object.create(fn.prototype)).constructor=st).className="Service";var Nd=Ea(),Ss=Ae(),uA=Ed();function st(n,e){fn.call(this,n,e),this.methods={},this._methodsArray=null}st.fromJSON=function(e,t){var r=new st(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),s=0;s<i.length;++s)r.add(Nd.fromJSON(i[s],t.methods[i[s]]));return t.nested&&r.addJSON(t.nested),t.edition&&(r._edition=t.edition),r.comment=t.comment,r._defaultEdition="proto3",r};st.prototype.toJSON=function(e){var t=fn.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Ss.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"methods",fn.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};Object.defineProperty(st.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Ss.toArray(this.methods))}});function Rv(n){return n._methodsArray=null,n}st.prototype.get=function(e){return this.methods[e]||fn.prototype.get.call(this,e)};st.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;fn.prototype.resolve.call(this);for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return this};st.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,fn.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this};st.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Nd?(this.methods[e.name]=e,e.parent=this,Rv(this)):fn.prototype.add.call(this,e)};st.prototype.remove=function(e){if(e instanceof Nd){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,Rv(this)}return fn.prototype.remove.call(this,e)};st.prototype.create=function(e,t,r){for(var i=new uA.Service(e,t,r),s=0,o;s<this.methodsArray.length;++s){var a=Ss.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=Ss.codegen(["r","c"],Ss.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var wa=I((bB,Ov)=>{"use strict";Ov.exports=Ht;var dA=jt();function Ht(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)this[e[t]]=n[e[t]]}Ht.create=function(e){return this.$type.create(e)};Ht.encode=function(e,t){return this.$type.encode(e,t)};Ht.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)};Ht.decode=function(e){return this.$type.decode(e)};Ht.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Ht.verify=function(e){return this.$type.verify(e)};Ht.fromObject=function(e){return this.$type.fromObject(e)};Ht.toObject=function(e,t){return this.$type.toObject(e,t)};Ht.prototype.toJSON=function(){return this.$type.toObject(this,dA.toJSONOptions)}});var kd=I((wB,kv)=>{"use strict";kv.exports=pA;var hA=Dt(),pn=_r(),Nv=Ae();function fA(n){return"missing required '"+n.name+"'"}function pA(n){for(var e=Nv.codegen(["r","l","e"],n.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(n.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),t=0;t<n.fieldsArray.length;++t){var r=n._fieldsArray[t].resolve(),i=r.resolvedType instanceof hA?"int32":r.type,s="m"+Nv.safeProp(r.name);e("case %i: {",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),pn.defaults[r.keyType]!==void 0?e("k=%j",pn.defaults[r.keyType]):e("k=null"),pn.defaults[i]!==void 0?e("value=%j",pn.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),pn.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",t):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),pn.long[r.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),pn.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),pn.basic[i]===void 0?e(r.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",s,t):e("%s.push(r.%s())",s,i)):pn.basic[i]===void 0?e(r.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",s,t):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),t=0;t<n._fieldsArray.length;++t){var o=n._fieldsArray[t];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",fA(o))}return e("return m")}});var Md=I((CB,Pv)=>{"use strict";Pv.exports=yA;var mA=Dt(),Pd=Ae();function _t(n,e){return n.name+": "+e+(n.repeated&&e!=="array"?"[]":n.map&&e!=="object"?"{k:"+n.keyType+"}":"")+" expected"}function xd(n,e,t,r){if(e.resolvedType)if(e.resolvedType instanceof mA){n("switch(%s){",r)("default:")("return%j",_t(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)n("case %i:",e.resolvedType.values[i[s]]);n("break")("}")}else n("{")("var e=types[%i].verify(%s);",t,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.isInteger(%s))",r)("return%j",_t(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",_t(e,"integer|Long"));break;case"float":case"double":n('if(typeof %s!=="number")',r)("return%j",_t(e,"number"));break;case"bool":n('if(typeof %s!=="boolean")',r)("return%j",_t(e,"boolean"));break;case"string":n("if(!util.isString(%s))",r)("return%j",_t(e,"string"));break;case"bytes":n('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",_t(e,"buffer"));break}return n}function gA(n,e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.key32Re.test(%s))",t)("return%j",_t(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.key64Re.test(%s))",t)("return%j",_t(e,"integer|Long key"));break;case"bool":n("if(!util.key2Re.test(%s))",t)("return%j",_t(e,"boolean key"));break}return n}function yA(n){var e=Pd.codegen(["m"],n.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),t=n.oneofsArray,r={};t.length&&e("var p={}");for(var i=0;i<n.fieldsArray.length;++i){var s=n._fieldsArray[i].resolve(),o="m"+Pd.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",_t(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),gA(e,s,"k[i]"),xd(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",_t(s,"array"))("for(var i=0;i<%s.length;++i){",o),xd(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=Pd.safeProp(s.partOf.name);r[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),r[s.partOf.name]=1,e("p%s=1",a)}xd(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var Bd=I(Mv=>{"use strict";var xv=Mv,Es=Dt(),$t=Ae();function Ld(n,e,t,r){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof Es){n("switch(d%s){",r);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(n("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),e.repeated||n("break"),i=!0),n("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");n("}")}else n('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,t,r);else{var c=!1;switch(e.type){case"double":case"float":n("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":n("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":n("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":n('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":n("m%s=String(d%s)",r,r);break;case"bool":n("m%s=Boolean(d%s)",r,r);break}}return n}xv.fromObject=function(e){var t=e.fieldsArray,r=$t.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<t.length;++i){var s=t[i].resolve(),o=$t.safeProp(s.name);s.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),Ld(r,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),Ld(r,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Es||r("if(d%s!=null){",o),Ld(r,s,i,o),s.resolvedType instanceof Es||r("}"))}return r("return m")};function Fd(n,e,t,r){if(e.resolvedType)e.resolvedType instanceof Es?n("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,t,r,r,t,r,r):n("d%s=types[%i].toObject(m%s,o)",r,t,r);else{var i=!1;switch(e.type){case"double":case"float":n("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":n("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:n("d%s=m%s",r,r);break}}return n}xv.toObject=function(e){var t=e.fieldsArray.slice().sort($t.compareFieldsById);if(!t.length)return $t.codegen()("return {}");for(var r=$t.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<t.length;++a)t[a].partOf||(t[a].resolve().repeated?i:t[a].map?s:o).push(t[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",$t.safeProp(i[a].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),a=0;a<s.length;++a)r("d%s={}",$t.safeProp(s[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var c=o[a],l=$t.safeProp(c.name);if(c.resolvedType instanceof Es)r("d%s=o.enums===String?%j:%j",l,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var u="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",l,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else r("d%s=%j",l,c.typeDefault)}r("}")}var p=!1;for(a=0;a<t.length;++a){var c=t[a],m=e._fieldsArray.indexOf(c),l=$t.safeProp(c.name);c.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),Fd(r,c,m,l+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),Fd(r,c,m,l+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",l,c.name),Fd(r,c,m,l),c.partOf&&r("if(o.oneofs)")("d%s=%j",$t.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}});var Ud=I(Lv=>{"use strict";var vA=Lv,_A=wa();vA[".google.protobuf.Any"]={fromObject:function(n){if(n&&n["@type"]){var e=n["@type"].substring(n["@type"].lastIndexOf("/")+1),t=this.lookup(e);if(t){var r=n["@type"].charAt(0)==="."?n["@type"].slice(1):n["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:t.encode(t.fromObject(n)).finish()})}}return this.fromObject(n)},toObject:function(n,e){var t="type.googleapis.com/",r="",i="";if(e&&e.json&&n.type_url&&n.value){i=n.type_url.substring(n.type_url.lastIndexOf("/")+1),r=n.type_url.substring(0,n.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(n=s.decode(n.value))}if(!(n instanceof this.ctor)&&n instanceof _A){var o=n.$type.toObject(n,e),a=n.$type.fullName[0]==="."?n.$type.fullName.slice(1):n.$type.fullName;return r===""&&(r=t),i=r+a,o["@type"]=i,o}return this.toObject(n,e)}}});var Aa=I((RB,Bv)=>{"use strict";Bv.exports=ae;var Tt=li();((ae.prototype=Object.create(Tt.prototype)).constructor=ae).className="Type";var TA=Dt(),zd=vr(),Ca=zn(),SA=Sa(),EA=ba(),qd=wa(),Vd=va(),bA=ga(),Ue=Ae(),wA=Gd(),CA=kd(),IA=Md(),Fv=Bd(),AA=Ud();function ae(n,e){Tt.call(this,n,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(ae.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var n=Object.keys(this.fields),e=0;e<n.length;++e){var t=this.fields[n[e]],r=t.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=t}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Ue.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Ue.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=ae.generateConstructor(this)())},set:function(n){var e=n.prototype;e instanceof qd||((n.prototype=new qd).constructor=n,Ue.merge(n.prototype,e)),n.$type=n.prototype.$type=this,Ue.merge(n,qd,!0),this._ctor=n;for(var t=0;t<this.fieldsArray.length;++t)this._fieldsArray[t].resolve();var r={};for(t=0;t<this.oneofsArray.length;++t)r[this._oneofsArray[t].resolve().name]={get:Ue.oneOfGetter(this._oneofsArray[t].oneof),set:Ue.oneOfSetter(this._oneofsArray[t].oneof)};t&&Object.defineProperties(n.prototype,r)}}});ae.generateConstructor=function(e){for(var t=Ue.codegen(["p"],e.name),r=0,i;r<e.fieldsArray.length;++r)(i=e._fieldsArray[r]).map?t("this%s={}",Ue.safeProp(i.name)):i.repeated&&t("this%s=[]",Ue.safeProp(i.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Ia(n){return n._fieldsById=n._fieldsArray=n._oneofsArray=null,delete n.encode,delete n.decode,delete n.verify,n}ae.fromJSON=function(e,t){var r=new ae(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)r.add((typeof t.fields[i[s]].keyType<"u"?SA.fromJSON:Ca.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)r.add(zd.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var o=t.nested[i[s]];r.add((o.id!==void 0?Ca.fromJSON:o.fields!==void 0?ae.fromJSON:o.values!==void 0?TA.fromJSON:o.methods!==void 0?EA.fromJSON:Tt.fromJSON)(i[s],o))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};ae.prototype.toJSON=function(e){var t=Tt.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Ue.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"oneofs",Tt.arrayToJSON(this.oneofsArray,e),"fields",Tt.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};ae.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Tt.prototype.resolveAll.call(this);var e=this.oneofsArray;for(r=0;r<e.length;)e[r++].resolve();for(var t=this.fieldsArray,r=0;r<t.length;)t[r++].resolve();return this};ae.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Tt.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)}),this):this};ae.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};ae.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Ca&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Ia(this)}return e instanceof zd?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Ia(this)):Tt.prototype.add.call(this,e)};ae.prototype.remove=function(e){if(e instanceof Ca&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Ia(this)}if(e instanceof zd){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Ia(this)}return Tt.prototype.remove.call(this,e)};ae.prototype.isReservedId=function(e){return Tt.isReservedId(this.reserved,e)};ae.prototype.isReservedName=function(e){return Tt.isReservedName(this.reserved,e)};ae.prototype.create=function(e){return new this.ctor(e)};ae.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=wA(this)({Writer:bA,types:t,util:Ue}),this.decode=CA(this)({Reader:Vd,types:t,util:Ue}),this.verify=IA(this)({types:t,util:Ue}),this.fromObject=Fv.fromObject(this)({types:t,util:Ue}),this.toObject=Fv.toObject(this)({types:t,util:Ue});var i=AA[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};ae.prototype.encode=function(e,t){return this.setup().encode(e,t)};ae.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};ae.prototype.decode=function(e,t){return this.setup().decode(e,t)};ae.prototype.decodeDelimited=function(e){return e instanceof Vd||(e=Vd.create(e)),this.decode(e,e.uint32())};ae.prototype.verify=function(e){return this.setup().verify(e)};ae.prototype.fromObject=function(e){return this.setup().fromObject(e)};ae.prototype.toObject=function(e,t){return this.setup().toObject(e,t)};ae.d=function(e){return function(r){Ue.decorateType(r,e)}}});var Na=I((DB,Vv)=>{"use strict";Vv.exports=ot;var Oa=li();((ot.prototype=Object.create(Oa.prototype)).constructor=ot).className="Root";var Ra=zn(),jd=Dt(),RA=vr(),jn=Ae(),Wd,Hd,bs;function ot(n){Oa.call(this,"",n),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}ot.fromJSON=function(e,t){return t||(t=new ot),e.options&&t.setOptions(e.options),t.addJSON(e.nested).resolveAll()};ot.prototype.resolvePath=jn.path.resolve;ot.prototype.fetch=jn.fetch;function qv(){}ot.prototype.load=function n(e,t,r){typeof t=="function"&&(r=t,t=void 0);var i=this;if(!r)return jn.asPromise(n,i,e,t);var s=r===qv;function o(S,E){if(E&&E.resolveAll(),!!r){if(s)throw S;var w=r;r=null,w(S,E)}}function a(S){var E=S.lastIndexOf("google/protobuf/");if(E>-1){var w=S.substring(E);if(w in bs)return w}return null}function c(S,E){try{if(jn.isString(E)&&E.charAt(0)==="{"&&(E=JSON.parse(E)),!jn.isString(E))i.setOptions(E.options).addJSON(E.nested);else{Hd.filename=S;var w=Hd(E,i,t),C,N=0;if(w.imports)for(;N<w.imports.length;++N)(C=a(w.imports[N])||i.resolvePath(S,w.imports[N]))&&l(C);if(w.weakImports)for(N=0;N<w.weakImports.length;++N)(C=a(w.weakImports[N])||i.resolvePath(S,w.weakImports[N]))&&l(C,!0)}}catch(x){o(x)}!s&&!u&&o(null,i)}function l(S,E){if(S=a(S)||S,!(i.files.indexOf(S)>-1)){if(i.files.push(S),S in bs){s?c(S,bs[S]):(++u,setTimeout(function(){--u,c(S,bs[S])}));return}if(s){var w;try{w=jn.fs.readFileSync(S).toString("utf8")}catch(C){E||o(C);return}c(S,w)}else++u,i.fetch(S,function(C,N){if(--u,!!r){if(C){E?u||o(null,i):o(C);return}c(S,N)}})}}var u=0;jn.isString(e)&&(e=[e]);for(var p=0,m;p<e.length;++p)(m=i.resolvePath("",e[p]))&&l(m);return s?(i.resolveAll(),i):(u||o(null,i),i)};ot.prototype.loadSync=function(e,t){if(!jn.isNode)throw Error("not supported");return this.load(e,t,qv)};ot.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return this._resolveFeaturesRecursive(this._edition),Oa.prototype.resolveAll.call(this)};var Da=/^[A-Z]/;function Uv(n,e){var t=e.parent.lookup(e.extend);if(t){var r=new Ra(e.fullName,e.id,e.type,e.rule,void 0,e.options);return t.get(r.name)||(r.declaringField=e,e.extensionField=r,t.add(r)),!0}return!1}ot.prototype._handleAdd=function(e){if(e instanceof Ra)e.extend!==void 0&&!e.extensionField&&(Uv(this,e)||this.deferred.push(e));else if(e instanceof jd)Da.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof RA)){if(e instanceof Wd)for(var t=0;t<this.deferred.length;)Uv(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);Da.test(e.name)&&(e.parent[e.name]=e)}(e instanceof Wd||e instanceof jd||e instanceof Ra)&&(this._fullyQualifiedObjects[e.fullName]=e)};ot.prototype._handleRemove=function(e){if(e instanceof Ra){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof jd)Da.test(e.name)&&delete e.parent[e.name];else if(e instanceof Oa){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);Da.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]};ot._configure=function(n,e,t){Wd=n,Hd=e,bs=t}});var Ae=I((OB,Gv)=>{"use strict";var _e=Gv.exports=jt(),zv=bd(),$d,Kd;_e.codegen=yv();_e.fetch=_v();_e.path=Ev();_e.fs=_e.inquire("fs");_e.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),i=0;i<t.length;)r[i]=e[t[i++]];return r}return[]};_e.toObject=function(e){for(var t={},r=0;r<e.length;){var i=e[r++],s=e[r++];s!==void 0&&(t[i]=s)}return t};var DA=/\\/g,OA=/"/g;_e.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};_e.safeProp=function(e){return!/^[$\w_]+$/.test(e)||_e.isReserved(e)?'["'+e.replace(DA,"\\\\").replace(OA,'\\"')+'"]':"."+e};_e.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var NA=/_([a-z])/g;_e.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(NA,function(t,r){return r.toUpperCase()})};_e.compareFieldsById=function(e,t){return e.id-t.id};_e.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(_e.decorateRoot.remove(e.$type),e.$type.name=t,_e.decorateRoot.add(e.$type)),e.$type;$d||($d=Aa());var r=new $d(t||e.name);return _e.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var kA=0;_e.decorateEnum=function(e){if(e.$type)return e.$type;Kd||(Kd=Dt());var t=new Kd("Enum"+kA++,e);return _e.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t};_e.setProperty=function(e,t,r,i){function s(o,a,c){var l=a.shift();if(l==="__proto__"||l==="prototype")return o;if(a.length>0)o[l]=s(o[l]||{},a,c);else{var u=o[l];if(u&&i)return o;u&&(c=[].concat(u).concat(c)),o[l]=c}return o}if(typeof e!="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return t=t.split("."),s(e,t,r)};Object.defineProperty(_e,"decorateRoot",{get:function(){return zv.decorated||(zv.decorated=new(Na()))}})});var _r=I(jv=>{"use strict";var ws=jv,PA=Ae(),xA=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Cs(n,e){var t=0,r={};for(e|=0;t<n.length;)r[xA[t+e]]=n[t++];return r}ws.basic=Cs([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);ws.defaults=Cs([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",PA.emptyArray,null]);ws.long=Cs([0,0,0,1,1],7);ws.mapKey=Cs([0,0,0,5,5,0,0,0,1,1,0,2],2);ws.packed=Cs([1,5,0,0,0,5,5,0,0,0,1,1,0])});var zn=I((kB,Hv)=>{"use strict";Hv.exports=Re;var As=Gn();((Re.prototype=Object.create(As.prototype)).constructor=Re).className="Field";var Wv=Dt(),Qd=_r(),Te=Ae(),Is,MA=/^required|optional|repeated$/;Re.fromJSON=function(e,t){var r=new Re(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);return t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};function Re(n,e,t,r,i,s,o){if(Te.isObject(r)?(o=i,s=r,r=i=void 0):Te.isObject(i)&&(o=s,s=i,i=void 0),As.call(this,n,s),!Te.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!Te.isString(t))throw TypeError("type must be a string");if(r!==void 0&&!MA.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!Te.isString(i))throw TypeError("extend must be a string");r==="proto3_optional"&&(r="optional"),this.rule=r&&r!=="optional"?r:void 0,this.type=t,this.id=e,this.extend=i||void 0,this.repeated=r==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=Te.Long?Qd.long[t]!==void 0:!1,this.bytes=t==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=o}Object.defineProperty(Re.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(Re.prototype,"optional",{get:function(){return!this.required}});Object.defineProperty(Re.prototype,"delimited",{get:function(){return this.resolvedType instanceof Is&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(Re.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(Re.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});Re.prototype.setOption=function(e,t,r){return As.prototype.setOption.call(this,e,t,r)};Re.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Te.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};Re.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=Qd.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Is?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof Wv&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof Wv)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=Te.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;Te.base64.test(this.typeDefault)?Te.base64.decode(this.typeDefault,e=Te.newBuffer(Te.base64.length(this.typeDefault)),0):Te.utf8.write(this.typeDefault,e=Te.newBuffer(Te.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=Te.emptyObject:this.repeated?this.defaultValue=Te.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Is&&(this.parent.ctor.prototype[this.name]=this.defaultValue),As.prototype.resolve.call(this)};Re.prototype._inferLegacyProtoFeatures=function(e){if(e!=="proto2"&&e!=="proto3")return{};var t={};if(this.rule==="required"&&(t.field_presence="LEGACY_REQUIRED"),this.parent&&Qd.defaults[this.type]===void 0){var r=this.parent.get(this.type.split(".").pop());r&&r instanceof Is&&r.group&&(t.message_encoding="DELIMITED")}return this.getOption("packed")===!0?t.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(t.repeated_field_encoding="EXPANDED"),t};Re.prototype._resolveFeatures=function(e){return As.prototype._resolveFeatures.call(this,this._edition||e)};Re.d=function(e,t,r,i){return typeof t=="function"?t=Te.decorateType(t).name:t&&typeof t=="object"&&(t=Te.decorateEnum(t).name),function(o,a){Te.decorateType(o.constructor).add(new Re(a,e,t,r,{default:i}))}};Re._configure=function(e){Is=e}});var vr=I((PB,Qv)=>{"use strict";Qv.exports=at;var Pa=Gn();((at.prototype=Object.create(Pa.prototype)).constructor=at).className="OneOf";var $v=zn(),ka=Ae();function at(n,e,t,r){if(Array.isArray(e)||(t=e,e=void 0),Pa.call(this,n,t),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}at.fromJSON=function(e,t){return new at(e,t.oneof,t.options,t.comment)};at.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return ka.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])};function Kv(n){if(n.parent)for(var e=0;e<n.fieldsArray.length;++e)n.fieldsArray[e].parent||n.parent.add(n.fieldsArray[e])}at.prototype.add=function(e){if(!(e instanceof $v))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,Kv(this),this};at.prototype.remove=function(e){if(!(e instanceof $v))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this};at.prototype.onAdd=function(e){Pa.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}Kv(this)};at.prototype.onRemove=function(e){for(var t=0,r;t<this.fieldsArray.length;++t)(r=this.fieldsArray[t]).parent&&r.parent.remove(r);Pa.prototype.onRemove.call(this,e)};Object.defineProperty(at.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var n=this.fieldsArray[0];return n.options!=null&&n.options.proto3_optional===!0}});at.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(i,s){ka.decorateType(i.constructor).add(new at(s,e)),Object.defineProperty(i,s,{get:ka.oneOfGetter(e),set:ka.oneOfSetter(e)})}}});var Gn=I((xB,Yv)=>{"use strict";Yv.exports=xe;xe.className="ReflectionObject";var LA=vr(),Rs=Ae(),xa,FA={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},BA={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},UA={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function xe(n,e){if(!Rs.isString(n))throw TypeError("name must be a string");if(e&&!Rs.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=n,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(xe.prototype,{root:{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n}},fullName:{get:function(){for(var n=[this.name],e=this.parent;e;)n.unshift(e.name),e=e.parent;return n.join(".")}}});xe.prototype.toJSON=function(){throw Error()};xe.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof xa&&t._handleAdd(this)};xe.prototype.onRemove=function(e){var t=e.root;t instanceof xa&&t._handleRemove(this),this.parent=null,this.resolved=!1};xe.prototype.resolve=function(){return this.resolved?this:(this.root instanceof xa&&(this.resolved=!0),this)};xe.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)};xe.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var t={};if(!e)throw new Error("Unknown edition for "+this.fullName);var r=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if(e==="proto2")t=Object.assign({},BA);else if(e==="proto3")t=Object.assign({},UA);else if(e==="2023")t=Object.assign({},FA);else throw new Error("Unknown edition: "+e);this._features=Object.assign(t,r||{}),this._featuresResolved=!0;return}if(this.partOf instanceof LA){var i=Object.assign({},this.partOf._features);this._features=Object.assign(i,r||{})}else if(!this.declaringField)if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,r||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}};xe.prototype._inferLegacyProtoFeatures=function(){return{}};xe.prototype.getOption=function(e){if(this.options)return this.options[e]};xe.prototype.setOption=function(e,t,r){return this.options||(this.options={}),/^features\./.test(e)?Rs.setProperty(this.options,e,t,r):(!r||this.options[e]===void 0)&&(this.getOption(e)!==t&&(this.resolved=!1),this.options[e]=t),this};xe.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var s=i.find(function(c){return Object.prototype.hasOwnProperty.call(c,e)});if(s){var o=s[e];Rs.setProperty(o,r,t)}else s={},s[e]=Rs.setProperty({},r,t),i.push(s)}else{var a={};a[e]=t,i.push(a)}return this};xe.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],t);return this};xe.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e};xe.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition};xe._configure=function(n){xa=n}});var Dt=I((MB,Xv)=>{"use strict";Xv.exports=Ot;var Yd=Gn();((Ot.prototype=Object.create(Yd.prototype)).constructor=Ot).className="Enum";var Jv=li(),Ma=Ae();function Ot(n,e,t,r,i,s){if(Yd.call(this,n,t),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}Ot.prototype._resolveFeatures=function(e){return e=this._edition||e,Yd.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(t=>{var r=Object.assign({},this._features);this._valuesFeatures[t]=Object.assign(r,this.valuesOptions&&this.valuesOptions[t]&&this.valuesOptions[t].features)}),this};Ot.fromJSON=function(e,t){var r=new Ot(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};Ot.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Ma.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])};Ot.prototype.add=function(e,t,r,i){if(!Ma.isString(e))throw TypeError("name must be a string");if(!Ma.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this};Ot.prototype.remove=function(e){if(!Ma.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Ot.prototype.isReservedId=function(e){return Jv.isReservedId(this.reserved,e)};Ot.prototype.isReservedName=function(e){return Jv.isReservedName(this.reserved,e)}});var Gd=I((LB,e_)=>{"use strict";e_.exports=VA;var qA=Dt(),Jd=_r(),Xd=Ae();function Zv(n,e,t,r){return e.delimited?n("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",t,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):n("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",t,r,(e.id<<3|2)>>>0)}function VA(n){for(var e=Xd.codegen(["m","w"],n.name+"$encode")("if(!w)")("w=Writer.create()"),t,r,i=n.fieldsArray.slice().sort(Xd.compareFieldsById),t=0;t<i.length;++t){var s=i[t].resolve(),o=n._fieldsArray.indexOf(s),a=s.resolvedType instanceof qA?"int32":s.type,c=Jd.basic[a];r="m"+Xd.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|Jd.mapKey[s.keyType],s.keyType),c===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,r):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,a,r),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",r,r),s.packed&&Jd.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",a,r)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",r),c===void 0?Zv(e,s,o,r+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|c)>>>0,a,r)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,s.name),c===void 0?Zv(e,s,o,r):e("w.uint32(%i).%s(%s)",(s.id<<3|c)>>>0,a,r))}return e("return w")}});var n_=I((FB,t_)=>{"use strict";var ee=t_.exports=mv();ee.build="light";function zA(n,e,t){return typeof e=="function"?(t=e,e=new ee.Root):e||(e=new ee.Root),e.load(n,t)}ee.load=zA;function GA(n,e){return e||(e=new ee.Root),e.loadSync(n)}ee.loadSync=GA;ee.encoder=Gd();ee.decoder=kd();ee.verifier=Md();ee.converter=Bd();ee.ReflectionObject=Gn();ee.Namespace=li();ee.Root=Na();ee.Enum=Dt();ee.Type=Aa();ee.Field=zn();ee.OneOf=vr();ee.MapField=Sa();ee.Service=ba();ee.Method=Ea();ee.Message=wa();ee.wrappers=Ud();ee.types=_r();ee.util=Ae();ee.ReflectionObject._configure(ee.Root);ee.Namespace._configure(ee.Type,ee.Service,ee.Enum);ee.Root._configure(ee.Type);ee.Field._configure(ee.Type)});var eh=I((BB,s_)=>{"use strict";s_.exports=i_;var Zd=/[\s{}=;:[\],'"()<>]/g,jA=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,WA=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,HA=/^ *[*/]+ */,$A=/^\s*\*?\/*/,KA=/\n/g,QA=/\s/,YA=/\\(.?)/g,JA={0:"\0",r:"\r",n:`
`,t:"	"};function r_(n){return n.replace(YA,function(e,t){switch(t){case"\\":case"":return t;default:return JA[t]||""}})}i_.unescape=r_;function i_(n,e){n=n.toString();var t=0,r=n.length,i=1,s=0,o={},a=[],c=null;function l(b){return Error("illegal "+b+" (line "+i+")")}function u(){var b=c==="'"?WA:jA;b.lastIndex=t-1;var z=b.exec(n);if(!z)throw l("string");return t=b.lastIndex,C(c),c=null,r_(z[1])}function p(b){return n.charAt(b)}function m(b,z,U){var _={type:n.charAt(b++),lineEmpty:!1,leading:U},g;e?g=2:g=3;var y=b-g,v;do if(--y<0||(v=n.charAt(y))===`
`){_.lineEmpty=!0;break}while(v===" "||v==="	");for(var h=n.substring(b,z).split(KA),T=0;T<h.length;++T)h[T]=h[T].replace(e?$A:HA,"").trim();_.text=h.join(`
`).trim(),o[i]=_,s=i}function S(b){var z=E(b),U=n.substring(b,z),_=/^\s*\/\//.test(U);return _}function E(b){for(var z=b;z<r&&p(z)!==`
`;)z++;return z}function w(){if(a.length>0)return a.shift();if(c)return u();var b,z,U,_,g,y=t===0;do{if(t===r)return null;for(b=!1;QA.test(U=p(t));)if(U===`
`&&(y=!0,++i),++t===r)return null;if(p(t)==="/"){if(++t===r)throw l("comment");if(p(t)==="/")if(e){if(_=t,g=!1,S(t-1)){g=!0;do if(t=E(t),t===r||(t++,!y))break;while(S(t))}else t=Math.min(r,E(t)+1);g&&(m(_,t,y),y=!0),i++,b=!0}else{for(g=p(_=t+1)==="/";p(++t)!==`
`;)if(t===r)return null;++t,g&&(m(_,t-1,y),y=!0),++i,b=!0}else if((U=p(t))==="*"){_=t+1,g=e||p(_)==="*";do{if(U===`
`&&++i,++t===r)throw l("comment");z=U,U=p(t)}while(z!=="*"||U!=="/");++t,g&&(m(_,t-2,y),y=!0),b=!0}else return"/"}}while(b);var v=t;Zd.lastIndex=0;var h=Zd.test(p(v++));if(!h)for(;v<r&&!Zd.test(p(v));)++v;var T=n.substring(t,t=v);return(T==='"'||T==="'")&&(c=T),T}function C(b){a.push(b)}function N(){if(!a.length){var b=w();if(b===null)return null;C(b)}return a[0]}function x(b,z){var U=N(),_=U===b;if(_)return w(),!0;if(!z)throw l("token '"+U+"', '"+b+"' expected");return!1}function M(b){var z=null,U;return b===void 0?(U=o[i-1],delete o[i-1],U&&(e||U.type==="*"||U.lineEmpty)&&(z=U.leading?U.text:null)):(s<b&&N(),U=o[b],delete o[b],U&&!U.lineEmpty&&(e||U.type==="/")&&(z=U.leading?null:U.text)),z}return Object.defineProperty({next:w,peek:N,push:C,skip:x,cmnt:M},"line",{get:function(){return i}})}});var d_=I((UB,u_)=>{"use strict";u_.exports=mn;mn.filename=null;mn.defaults={keepCase:!1};var XA=eh(),o_=Na(),a_=Aa(),c_=zn(),ZA=Sa(),l_=vr(),eR=Dt(),tR=ba(),nR=Ea(),rR=Gn(),iR=_r(),th=Ae(),sR=/^[1-9][0-9]*$/,oR=/^-?[1-9][0-9]*$/,aR=/^0[x][0-9a-fA-F]+$/,cR=/^-?0[x][0-9a-fA-F]+$/,lR=/^0[0-7]+$/,uR=/^-?0[0-7]+$/,dR=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Kt=/^[a-zA-Z_][a-zA-Z_0-9]*$/,Qt=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function mn(n,e,t){e instanceof o_||(t=e,e=new o_),t||(t=mn.defaults);var r=t.preferTrailingComment||!1,i=XA(n,t.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,c=i.skip,l=i.cmnt,u=!0,p,m,S,E="proto2",w=e,C=[],N={},x=t.keepCase?function(R){return R}:th.camelCase;function M(){C.forEach(R=>{R._edition=E,Object.keys(N).forEach(A=>{R.getOption(A)===void 0&&R.setOption(A,N[A],!0)})})}function b(R,A,D){var B=mn.filename;return D||(mn.filename=null),Error("illegal "+(A||"token")+" '"+R+"' ("+(B?B+", ":"")+"line "+i.line+")")}function z(){var R=[],A;do{if((A=s())!=='"'&&A!=="'")throw b(A);R.push(s()),c(A),A=a()}while(A==='"'||A==="'");return R.join("")}function U(R){var A=s();switch(A){case"'":case'"':return o(A),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return g(A,!0)}catch{if(R&&Qt.test(A))return A;throw b(A,"value")}}function _(R,A){var D,B;do if(A&&((D=a())==='"'||D==="'")){var F=z();if(R.push(F),E>=2023)throw b(F,"id")}else try{R.push([B=y(s()),c("to",!0)?y(s()):B])}catch(de){if(A&&Qt.test(D)&&E>=2023)R.push(D);else throw de}while(c(",",!0));var W={options:void 0};W.setOption=function(de,Fe){this.options===void 0&&(this.options={}),this.options[de]=Fe},k(W,function(Fe){if(Fe==="option")re(W,Fe),c(";");else throw b(Fe)},function(){cn(W)})}function g(R,A){var D=1;switch(R.charAt(0)==="-"&&(D=-1,R=R.substring(1)),R){case"inf":case"INF":case"Inf":return D*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(sR.test(R))return D*parseInt(R,10);if(aR.test(R))return D*parseInt(R,16);if(lR.test(R))return D*parseInt(R,8);if(dR.test(R))return D*parseFloat(R);throw b(R,"number",A)}function y(R,A){switch(R){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!A&&R.charAt(0)==="-")throw b(R,"id");if(oR.test(R))return parseInt(R,10);if(cR.test(R))return parseInt(R,16);if(uR.test(R))return parseInt(R,8);throw b(R,"id")}function v(){if(p!==void 0)throw b("package");if(p=s(),!Qt.test(p))throw b(p,"name");w=w.define(p),c(";")}function h(){var R=a(),A;switch(R){case"weak":A=S||(S=[]),s();break;case"public":s();default:A=m||(m=[]);break}R=z(),c(";"),A.push(R)}function T(){if(c("="),E=z(),E<2023)throw b(E,"syntax");c(";")}function d(){if(c("="),E=z(),!["2023"].includes(E))throw b(E,"edition");c(";")}function f(R,A){switch(A){case"option":return re(R,A),c(";"),!0;case"message":return X(R,A),!0;case"enum":return We(R,A),!0;case"service":return JE(R,A),!0;case"extend":return ZE(R,A),!0}return!1}function k(R,A,D){var B=i.line;if(R&&(typeof R.comment!="string"&&(R.comment=l()),R.filename=mn.filename),c("{",!0)){for(var F;(F=s())!=="}";)A(F);c(";",!0)}else D&&D(),c(";"),R&&(typeof R.comment!="string"||r)&&(R.comment=l(B)||R.comment)}function X(R,A){if(!Kt.test(A=s()))throw b(A,"type name");var D=new a_(A);k(D,function(F){if(!f(D,F))switch(F){case"map":ye(D,F);break;case"required":if(E!=="proto2")throw b(F);case"repeated":Y(D,F);break;case"optional":if(E==="proto3")Y(D,"proto3_optional");else{if(E!=="proto2")throw b(F);Y(D,"optional")}break;case"oneof":Le(D,F);break;case"extensions":_(D.extensions||(D.extensions=[]));break;case"reserved":_(D.reserved||(D.reserved=[]),!0);break;default:if(E==="proto2"||!Qt.test(F))throw b(F);o(F),Y(D,"optional");break}}),R.add(D),R===w&&C.push(D)}function Y(R,A,D){var B=s();if(B==="group"){oe(R,A);return}for(;B.endsWith(".")||a().startsWith(".");)B+=s();if(!Qt.test(B))throw b(B,"type");var F=s();if(!Kt.test(F))throw b(F,"name");F=x(F),c("=");var W=new c_(F,y(s()),B,A,D);if(k(W,function(Ke){if(Ke==="option")re(W,Ke),c(";");else throw b(Ke)},function(){cn(W)}),A==="proto3_optional"){var de=new l_("_"+F);W.setOption("proto3_optional",!0),de.add(W),R.add(de)}else R.add(W);R===w&&C.push(W)}function oe(R,A){if(E>=2023)throw b("group");var D=s();if(!Kt.test(D))throw b(D,"name");var B=th.lcFirst(D);D===B&&(D=th.ucFirst(D)),c("=");var F=y(s()),W=new a_(D);W.group=!0;var de=new c_(B,F,D,A);de.filename=mn.filename,k(W,function(Ke){switch(Ke){case"option":re(W,Ke),c(";");break;case"required":case"repeated":Y(W,Ke);break;case"optional":E==="proto3"?Y(W,"proto3_optional"):Y(W,"optional");break;case"message":X(W,Ke);break;case"enum":We(W,Ke);break;case"reserved":_(W.reserved||(W.reserved=[]),!0);break;default:throw b(Ke)}}),R.add(W).add(de)}function ye(R){c("<");var A=s();if(iR.mapKey[A]===void 0)throw b(A,"type");c(",");var D=s();if(!Qt.test(D))throw b(D,"type");c(">");var B=s();if(!Kt.test(B))throw b(B,"name");c("=");var F=new ZA(x(B),y(s()),A,D);k(F,function(de){if(de==="option")re(F,de),c(";");else throw b(de)},function(){cn(F)}),R.add(F)}function Le(R,A){if(!Kt.test(A=s()))throw b(A,"name");var D=new l_(x(A));k(D,function(F){F==="option"?(re(D,F),c(";")):(o(F),Y(D,"optional"))}),R.add(D)}function We(R,A){if(!Kt.test(A=s()))throw b(A,"name");var D=new eR(A);k(D,function(F){switch(F){case"option":re(D,F),c(";");break;case"reserved":_(D.reserved||(D.reserved=[]),!0),D.reserved===void 0&&(D.reserved=[]);break;default:Ce(D,F)}}),R.add(D),R===w&&C.push(D)}function Ce(R,A){if(!Kt.test(A))throw b(A,"name");c("=");var D=y(s(),!0),B={options:void 0};B.getOption=function(F){return this.options[F]},B.setOption=function(F,W){rR.prototype.setOption.call(B,F,W)},B.setParsedOption=function(){},k(B,function(W){if(W==="option")re(B,W),c(";");else throw b(W)},function(){cn(B)}),R.add(A,D,B.comment,B.parsedOptions||B.options)}function re(R,A){var D,B,F=!0;for(A==="option"&&(A=s());A!=="=";){if(A==="("){var W=s();c(")"),A="("+W+")"}if(F){if(F=!1,A.includes(".")&&!A.includes("(")){var de=A.split(".");D=de[0]+".",A=de[1];continue}D=A}else B=B?B+=A:A;A=s()}var Fe=B?D.concat(B):D,Ke=He(R,Fe);B=B&&B[0]==="."?B.slice(1):B,D=D&&D[D.length-1]==="."?D.slice(0,-1):D,$e(R,D,Ke,B)}function He(R,A){if(c("{",!0)){for(var D={};!c("}",!0);){if(!Kt.test(Pe=s()))throw b(Pe,"name");if(Pe===null)throw b(Pe,"end of input");var B,F=Pe;if(c(":",!0),a()==="{")B=He(R,A+"."+Pe);else if(a()==="["){B=[];var W;if(c("[",!0)){do W=U(!0),B.push(W);while(c(",",!0));c("]"),typeof W<"u"&&fe(R,A+"."+Pe,W)}}else B=U(!0),fe(R,A+"."+Pe,B);var de=D[F];de&&(B=[].concat(de).concat(B)),D[F]=B,c(",",!0),c(";",!0)}return D}var Fe=U(!0);return fe(R,A,Fe),Fe}function fe(R,A,D){if(w===R&&/^features\./.test(A)){N[A]=D;return}R.setOption&&R.setOption(A,D)}function $e(R,A,D,B){R.setParsedOption&&R.setParsedOption(A,D,B)}function cn(R){if(c("[",!0)){do re(R,"option");while(c(",",!0));c("]")}return R}function JE(R,A){if(!Kt.test(A=s()))throw b(A,"service name");var D=new tR(A);k(D,function(F){if(!f(D,F))if(F==="rpc")XE(D,F);else throw b(F)}),R.add(D),R===w&&C.push(D)}function XE(R,A){var D=l(),B=A;if(!Kt.test(A=s()))throw b(A,"name");var F=A,W,de,Fe,Ke;if(c("("),c("stream",!0)&&(de=!0),!Qt.test(A=s())||(W=A,c(")"),c("returns"),c("("),c("stream",!0)&&(Ke=!0),!Qt.test(A=s())))throw b(A);Fe=A,c(")");var go=new nR(F,B,W,Fe,de,Ke);go.comment=D,k(go,function(bl){if(bl==="option")re(go,bl),c(";");else throw b(bl)}),R.add(go)}function ZE(R,A){if(!Qt.test(A=s()))throw b(A,"reference");var D=A;k(null,function(F){switch(F){case"required":case"repeated":Y(R,F,D);break;case"optional":E==="proto3"?Y(R,"proto3_optional",D):Y(R,"optional",D);break;default:if(E==="proto2"||!Qt.test(F))throw b(F);o(F),Y(R,"optional",D);break}})}for(var Pe;(Pe=s())!==null;)switch(Pe){case"package":if(!u)throw b(Pe);v();break;case"import":if(!u)throw b(Pe);h();break;case"syntax":if(!u)throw b(Pe);T();break;case"edition":if(!u)throw b(Pe);d();break;case"option":re(w,Pe),c(";",!0);break;default:if(f(w,Pe)){u=!1;continue}throw b(Pe)}return M(),mn.filename=null,{package:p,imports:m,weakImports:S,root:e}}});var p_=I((qB,f_)=>{"use strict";f_.exports=Nt;var hR=/\/|\./;function Nt(n,e){hR.test(n)||(n="google/protobuf/"+n+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),Nt[n]=e}Nt("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var h_;Nt("duration",{Duration:h_={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});Nt("timestamp",{Timestamp:h_});Nt("empty",{Empty:{fields:{}}});Nt("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});Nt("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});Nt("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});Nt.get=function(e){return Nt[e]||null}});var g_=I((VB,m_)=>{"use strict";var Wn=m_.exports=n_();Wn.build="full";Wn.tokenize=eh();Wn.parse=d_();Wn.common=p_();Wn.Root._configure(Wn.Type,Wn.parse,Wn.common)});var La=I((zB,y_)=>{"use strict";y_.exports=g_()});var nh=I((GB,fR)=>{fR.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var E_=I((K,S_)=>{"use strict";var Ye=La();S_.exports=K=Ye.descriptor=Ye.Root.fromJSON(nh()).lookup(".google.protobuf");var v_=Ye.Namespace,Ds=Ye.Root,gn=Ye.Enum,Hn=Ye.Type,$n=Ye.Field,pR=Ye.MapField,Fa=Ye.OneOf,Os=Ye.Service,Ba=Ye.Method;Ds.fromDescriptor=function(e){typeof e.length=="number"&&(e=K.FileDescriptorSet.decode(e));var t=new Ds;if(e.file)for(var r,i,s=0,o;s<e.file.length;++s){if(i=t,(r=e.file[s]).package&&r.package.length&&(i=t.define(r.package)),r.name&&r.name.length&&t.files.push(i.filename=r.name),r.messageType)for(o=0;o<r.messageType.length;++o)i.add(Hn.fromDescriptor(r.messageType[o],r.syntax));if(r.enumType)for(o=0;o<r.enumType.length;++o)i.add(gn.fromDescriptor(r.enumType[o]));if(r.extension)for(o=0;o<r.extension.length;++o)i.add($n.fromDescriptor(r.extension[o]));if(r.service)for(o=0;o<r.service.length;++o)i.add(Os.fromDescriptor(r.service[o]));var a=di(r.options,K.FileOptions);if(a){var c=Object.keys(a);for(o=0;o<c.length;++o)i.setOption(c[o],a[c[o]])}}return t};Ds.prototype.toDescriptor=function(e){var t=K.FileDescriptorSet.create();return __(this,t.file,e),t};function __(n,e,t){var r=K.FileDescriptorProto.create({name:n.filename||(n.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});t&&(r.syntax=t),n instanceof Ds||(r.package=n.fullName.substring(1));for(var i=0,s;i<n.nestedArray.length;++i)(s=n._nestedArray[i])instanceof Hn?r.messageType.push(s.toDescriptor(t)):s instanceof gn?r.enumType.push(s.toDescriptor()):s instanceof $n?r.extension.push(s.toDescriptor(t)):s instanceof Os?r.service.push(s.toDescriptor()):s instanceof v_&&__(s,e,t);r.options=hi(n.options,K.FileOptions),r.messageType.length+r.enumType.length+r.extension.length+r.service.length&&e.push(r)}var mR=0;Hn.fromDescriptor=function(e,t){typeof e.length=="number"&&(e=K.DescriptorProto.decode(e));var r=new Hn(e.name.length?e.name:"Type"+mR++,di(e.options,K.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)r.add(Fa.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=$n.fromDescriptor(e.field[i],t);r.add(s),e.field[i].hasOwnProperty("oneofIndex")&&r.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)r.add($n.fromDescriptor(e.extension[i],t));if(e.nestedType)for(i=0;i<e.nestedType.length;++i)r.add(Hn.fromDescriptor(e.nestedType[i],t)),e.nestedType[i].options&&e.nestedType[i].options.mapEntry&&r.setOption("map_entry",!0);if(e.enumType)for(i=0;i<e.enumType.length;++i)r.add(gn.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length)for(r.extensions=[],i=0;i<e.extensionRange.length;++i)r.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(r.reserved=[],e.reservedRange)for(i=0;i<e.reservedRange.length;++i)r.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)r.reserved.push(e.reservedName[i])}return r};Hn.prototype.toDescriptor=function(e){var t=K.DescriptorProto.create({name:this.name}),r;for(r=0;r<this.fieldsArray.length;++r){var i;if(t.field.push(i=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof pR){var s=rh(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),o=rh(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),a=o===11||o===14?this._fieldsArray[r].resolvedType&&T_(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;t.nestedType.push(K.DescriptorProto.create({name:i.typeName,field:[K.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),K.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:K.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)t.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof $n?t.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Hn?t.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof gn&&t.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)t.extensionRange.push(K.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)typeof this.reserved[r]=="string"?t.reservedName.push(this.reserved[r]):t.reservedRange.push(K.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return t.options=hi(this.options,K.MessageOptions),t};var gR=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;$n.fromDescriptor=function(e,t){if(typeof e.length=="number"&&(e=K.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var r;e.typeName&&e.typeName.length?r=e.typeName:r=SR(e.type);var i;switch(e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;e.extendee!==void 0&&(s=s.length?s:void 0);var o=new $n(e.name.length?e.name:"field"+e.number,e.number,r,i,s);if(o.options=di(e.options,K.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var c=gR.exec(a);c&&(a=parseInt(a));break}o.setOption("default",a)}return ER(e.type)&&(t==="proto3"?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o};$n.prototype.toDescriptor=function(e){var t=K.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)t.type=11,t.typeName=Ye.util.ucFirst(this.name),t.label=3;else{switch(t.type=rh(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:t.typeName=this.resolvedType?T_(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":t.label=3;break;case"required":t.label=2;break;default:t.label=1;break}}if(t.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(t.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(t.options=hi(this.options,K.FieldOptions),this.options.default!=null&&(t.defaultValue=String(this.options.default))),e==="proto3"?this.packed||((t.options||(t.options=K.FieldOptions.create())).packed=!1):this.packed&&((t.options||(t.options=K.FieldOptions.create())).packed=!0),t};var yR=0;gn.fromDescriptor=function(e){typeof e.length=="number"&&(e=K.EnumDescriptorProto.decode(e));var t={};if(e.value)for(var r=0;r<e.value.length;++r){var i=e.value[r].name,s=e.value[r].number||0;t[i&&i.length?i:"NAME"+s]=s}return new gn(e.name&&e.name.length?e.name:"Enum"+yR++,t,di(e.options,K.EnumOptions))};gn.prototype.toDescriptor=function(){for(var e=[],t=0,r=Object.keys(this.values);t<r.length;++t)e.push(K.EnumValueDescriptorProto.create({name:r[t],number:this.values[r[t]]}));return K.EnumDescriptorProto.create({name:this.name,value:e,options:hi(this.options,K.EnumOptions)})};var vR=0;Fa.fromDescriptor=function(e){return typeof e.length=="number"&&(e=K.OneofDescriptorProto.decode(e)),new Fa(e.name&&e.name.length?e.name:"oneof"+vR++)};Fa.prototype.toDescriptor=function(){return K.OneofDescriptorProto.create({name:this.name})};var _R=0;Os.fromDescriptor=function(e){typeof e.length=="number"&&(e=K.ServiceDescriptorProto.decode(e));var t=new Os(e.name&&e.name.length?e.name:"Service"+_R++,di(e.options,K.ServiceOptions));if(e.method)for(var r=0;r<e.method.length;++r)t.add(Ba.fromDescriptor(e.method[r]));return t};Os.prototype.toDescriptor=function(){for(var e=[],t=0;t<this.methodsArray.length;++t)e.push(this._methodsArray[t].toDescriptor());return K.ServiceDescriptorProto.create({name:this.name,method:e,options:hi(this.options,K.ServiceOptions)})};var TR=0;Ba.fromDescriptor=function(e){return typeof e.length=="number"&&(e=K.MethodDescriptorProto.decode(e)),new Ba(e.name&&e.name.length?e.name:"Method"+TR++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,di(e.options,K.MethodOptions))};Ba.prototype.toDescriptor=function(){return K.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:hi(this.options,K.MethodOptions)})};function SR(n){switch(n){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+n)}function ER(n){switch(n){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function rh(n,e){switch(n){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof gn)return 14;if(e instanceof Hn)return e.group?10:11;throw Error("illegal type: "+n)}function di(n,e){if(n){for(var t=[],r=0,i,s,o;r<e.fieldsArray.length;++r)(s=(i=e._fieldsArray[r]).name)!=="uninterpretedOption"&&n.hasOwnProperty(s)&&(o=n[s],i.resolvedType instanceof gn&&typeof o=="number"&&i.resolvedType.valuesById[o]!==void 0&&(o=i.resolvedType.valuesById[o]),t.push(bR(s),o));return t.length?Ye.util.toObject(t):void 0}}function hi(n,e){if(n){for(var t=[],r=0,i=Object.keys(n),s,o;r<i.length;++r)if(o=n[s=i[r]],s!=="default"){var a=e.fields[s];!a&&!(a=e.fields[s=Ye.util.camelCase(s)])||t.push(s,o)}return t.length?e.fromObject(Ye.util.toObject(t)):void 0}}function T_(n,e){var t=n.fullName.split("."),r=e.fullName.split("."),i=0,s=0,o=r.length-1;if(!(n instanceof Ds)&&e instanceof v_)for(;i<t.length&&s<o&&t[i]===r[s];){var a=e.lookup(t[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<t.length&&s<o&&t[i]===r[s];++i,++s);return r.slice(s).join(".")}function bR(n){return n.substring(0,1)+n.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}});var b_=I((jB,wR)=>{wR.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var w_=I((WB,CR)=>{CR.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var C_=I((HB,IR)=>{IR.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var D_=I(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.addCommonProtos=Kn.loadProtosWithOptionsSync=Kn.loadProtosWithOptions=void 0;var I_=require("fs"),A_=require("path"),fi=La();function R_(n,e){let t=n.resolvePath;n.resolvePath=(r,i)=>{if(A_.isAbsolute(i))return i;for(let s of e){let o=A_.join(s,i);try{return I_.accessSync(o,I_.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),t(r,i)}}async function AR(n,e){let t=new fi.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));R_(t,e.includeDirs)}let r=await t.load(n,e);return r.resolveAll(),r}Kn.loadProtosWithOptions=AR;function RR(n,e){let t=new fi.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");R_(t,e.includeDirs)}let r=t.loadSync(n,e);return r.resolveAll(),r}Kn.loadProtosWithOptionsSync=RR;function DR(){let n=b_(),e=nh(),t=w_(),r=C_();fi.common("api",n.nested.google.nested.protobuf.nested),fi.common("descriptor",e.nested.google.nested.protobuf.nested),fi.common("source_context",t.nested.google.nested.protobuf.nested),fi.common("type",r.nested.google.nested.protobuf.nested)}Kn.addCommonProtos=DR});var O_=I((Ns,ih)=>{(function(n,e){function t(r){return r.default||r}typeof define=="function"&&define.amd?define([],function(){var r={};return e(r),t(r)}):typeof Ns=="object"?(e(Ns),typeof ih=="object"&&(ih.exports=t(Ns))):function(){var r={};e(r),n.Long=t(r)}()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ns,function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(d,f,k){this.low=d|0,this.high=f|0,this.unsigned=!!k}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function r(d){return(d&&d.__isLong__)===!0}function i(d){var f=Math.clz32(d&-d);return d?31-f:f}t.isLong=r;var s={},o={};function a(d,f){var k,X,Y;return f?(d>>>=0,(Y=0<=d&&d<256)&&(X=o[d],X)?X:(k=l(d,0,!0),Y&&(o[d]=k),k)):(d|=0,(Y=-128<=d&&d<128)&&(X=s[d],X)?X:(k=l(d,d<0?-1:0,!1),Y&&(s[d]=k),k))}t.fromInt=a;function c(d,f){if(isNaN(d))return f?b:M;if(f){if(d<0)return b;if(d>=C)return y}else{if(d<=-N)return v;if(d+1>=N)return g}return d<0?c(-d,f).neg():l(d%w|0,d/w|0,f)}t.fromNumber=c;function l(d,f,k){return new t(d,f,k)}t.fromBits=l;var u=Math.pow;function p(d,f,k){if(d.length===0)throw Error("empty string");if(typeof f=="number"?(k=f,f=!1):f=!!f,d==="NaN"||d==="Infinity"||d==="+Infinity"||d==="-Infinity")return f?b:M;if(k=k||10,k<2||36<k)throw RangeError("radix");var X;if((X=d.indexOf("-"))>0)throw Error("interior hyphen");if(X===0)return p(d.substring(1),f,k).neg();for(var Y=c(u(k,8)),oe=M,ye=0;ye<d.length;ye+=8){var Le=Math.min(8,d.length-ye),We=parseInt(d.substring(ye,ye+Le),k);if(Le<8){var Ce=c(u(k,Le));oe=oe.mul(Ce).add(c(We))}else oe=oe.mul(Y),oe=oe.add(c(We))}return oe.unsigned=f,oe}t.fromString=p;function m(d,f){return typeof d=="number"?c(d,f):typeof d=="string"?p(d,f):l(d.low,d.high,typeof f=="boolean"?f:d.unsigned)}t.fromValue=m;var S=65536,E=1<<24,w=S*S,C=w*w,N=C/2,x=a(E),M=a(0);t.ZERO=M;var b=a(0,!0);t.UZERO=b;var z=a(1);t.ONE=z;var U=a(1,!0);t.UONE=U;var _=a(-1);t.NEG_ONE=_;var g=l(-1,2147483647,!1);t.MAX_VALUE=g;var y=l(-1,-1,!0);t.MAX_UNSIGNED_VALUE=y;var v=l(0,-2147483648,!1);t.MIN_VALUE=v;var h=t.prototype;h.toInt=function(){return this.unsigned?this.low>>>0:this.low},h.toNumber=function(){return this.unsigned?(this.high>>>0)*w+(this.low>>>0):this.high*w+(this.low>>>0)},h.toString=function(f){if(f=f||10,f<2||36<f)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(v)){var k=c(f),X=this.div(k),Y=X.mul(k).sub(this);return X.toString(f)+Y.toInt().toString(f)}else return"-"+this.neg().toString(f);for(var oe=c(u(f,6),this.unsigned),ye=this,Le="";;){var We=ye.div(oe),Ce=ye.sub(We.mul(oe)).toInt()>>>0,re=Ce.toString(f);if(ye=We,ye.isZero())return re+Le;for(;re.length<6;)re="0"+re;Le=""+re+Le}},h.getHighBits=function(){return this.high},h.getHighBitsUnsigned=function(){return this.high>>>0},h.getLowBits=function(){return this.low},h.getLowBitsUnsigned=function(){return this.low>>>0},h.getNumBitsAbs=function(){if(this.isNegative())return this.eq(v)?64:this.neg().getNumBitsAbs();for(var f=this.high!=0?this.high:this.low,k=31;k>0&&!(f&1<<k);k--);return this.high!=0?k+33:k+1},h.isSafeInteger=function(){var f=this.high>>21;return f?this.unsigned?!1:f===-1&&!(this.low===0&&this.high===-2097152):!0},h.isZero=function(){return this.high===0&&this.low===0},h.eqz=h.isZero,h.isNegative=function(){return!this.unsigned&&this.high<0},h.isPositive=function(){return this.unsigned||this.high>=0},h.isOdd=function(){return(this.low&1)===1},h.isEven=function(){return(this.low&1)===0},h.equals=function(f){return r(f)||(f=m(f)),this.unsigned!==f.unsigned&&this.high>>>31===1&&f.high>>>31===1?!1:this.high===f.high&&this.low===f.low},h.eq=h.equals,h.notEquals=function(f){return!this.eq(f)},h.neq=h.notEquals,h.ne=h.notEquals,h.lessThan=function(f){return this.comp(f)<0},h.lt=h.lessThan,h.lessThanOrEqual=function(f){return this.comp(f)<=0},h.lte=h.lessThanOrEqual,h.le=h.lessThanOrEqual,h.greaterThan=function(f){return this.comp(f)>0},h.gt=h.greaterThan,h.greaterThanOrEqual=function(f){return this.comp(f)>=0},h.gte=h.greaterThanOrEqual,h.ge=h.greaterThanOrEqual,h.compare=function(f){if(r(f)||(f=m(f)),this.eq(f))return 0;var k=this.isNegative(),X=f.isNegative();return k&&!X?-1:!k&&X?1:this.unsigned?f.high>>>0>this.high>>>0||f.high===this.high&&f.low>>>0>this.low>>>0?-1:1:this.sub(f).isNegative()?-1:1},h.comp=h.compare,h.negate=function(){return!this.unsigned&&this.eq(v)?v:this.not().add(z)},h.neg=h.negate,h.add=function(f){r(f)||(f=m(f));var k=this.high>>>16,X=this.high&65535,Y=this.low>>>16,oe=this.low&65535,ye=f.high>>>16,Le=f.high&65535,We=f.low>>>16,Ce=f.low&65535,re=0,He=0,fe=0,$e=0;return $e+=oe+Ce,fe+=$e>>>16,$e&=65535,fe+=Y+We,He+=fe>>>16,fe&=65535,He+=X+Le,re+=He>>>16,He&=65535,re+=k+ye,re&=65535,l(fe<<16|$e,re<<16|He,this.unsigned)},h.subtract=function(f){return r(f)||(f=m(f)),this.add(f.neg())},h.sub=h.subtract,h.multiply=function(f){if(this.isZero())return this;if(r(f)||(f=m(f)),e){var k=e.mul(this.low,this.high,f.low,f.high);return l(k,e.get_high(),this.unsigned)}if(f.isZero())return this.unsigned?b:M;if(this.eq(v))return f.isOdd()?v:M;if(f.eq(v))return this.isOdd()?v:M;if(this.isNegative())return f.isNegative()?this.neg().mul(f.neg()):this.neg().mul(f).neg();if(f.isNegative())return this.mul(f.neg()).neg();if(this.lt(x)&&f.lt(x))return c(this.toNumber()*f.toNumber(),this.unsigned);var X=this.high>>>16,Y=this.high&65535,oe=this.low>>>16,ye=this.low&65535,Le=f.high>>>16,We=f.high&65535,Ce=f.low>>>16,re=f.low&65535,He=0,fe=0,$e=0,cn=0;return cn+=ye*re,$e+=cn>>>16,cn&=65535,$e+=oe*re,fe+=$e>>>16,$e&=65535,$e+=ye*Ce,fe+=$e>>>16,$e&=65535,fe+=Y*re,He+=fe>>>16,fe&=65535,fe+=oe*Ce,He+=fe>>>16,fe&=65535,fe+=ye*We,He+=fe>>>16,fe&=65535,He+=X*re+Y*Ce+oe*We+ye*Le,He&=65535,l($e<<16|cn,He<<16|fe,this.unsigned)},h.mul=h.multiply,h.divide=function(f){if(r(f)||(f=m(f)),f.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&f.low===-1&&f.high===-1)return this;var k=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,f.low,f.high);return l(k,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?b:M;var X,Y,oe;if(this.unsigned){if(f.unsigned||(f=f.toUnsigned()),f.gt(this))return b;if(f.gt(this.shru(1)))return U;oe=b}else{if(this.eq(v)){if(f.eq(z)||f.eq(_))return v;if(f.eq(v))return z;var ye=this.shr(1);return X=ye.div(f).shl(1),X.eq(M)?f.isNegative()?z:_:(Y=this.sub(f.mul(X)),oe=X.add(Y.div(f)),oe)}else if(f.eq(v))return this.unsigned?b:M;if(this.isNegative())return f.isNegative()?this.neg().div(f.neg()):this.neg().div(f).neg();if(f.isNegative())return this.div(f.neg()).neg();oe=M}for(Y=this;Y.gte(f);){X=Math.max(1,Math.floor(Y.toNumber()/f.toNumber()));for(var Le=Math.ceil(Math.log(X)/Math.LN2),We=Le<=48?1:u(2,Le-48),Ce=c(X),re=Ce.mul(f);re.isNegative()||re.gt(Y);)X-=We,Ce=c(X,this.unsigned),re=Ce.mul(f);Ce.isZero()&&(Ce=z),oe=oe.add(Ce),Y=Y.sub(re)}return oe},h.div=h.divide,h.modulo=function(f){if(r(f)||(f=m(f)),e){var k=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,f.low,f.high);return l(k,e.get_high(),this.unsigned)}return this.sub(this.div(f).mul(f))},h.mod=h.modulo,h.rem=h.modulo,h.not=function(){return l(~this.low,~this.high,this.unsigned)},h.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},h.clz=h.countLeadingZeros,h.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},h.ctz=h.countTrailingZeros,h.and=function(f){return r(f)||(f=m(f)),l(this.low&f.low,this.high&f.high,this.unsigned)},h.or=function(f){return r(f)||(f=m(f)),l(this.low|f.low,this.high|f.high,this.unsigned)},h.xor=function(f){return r(f)||(f=m(f)),l(this.low^f.low,this.high^f.high,this.unsigned)},h.shiftLeft=function(f){return r(f)&&(f=f.toInt()),(f&=63)===0?this:f<32?l(this.low<<f,this.high<<f|this.low>>>32-f,this.unsigned):l(0,this.low<<f-32,this.unsigned)},h.shl=h.shiftLeft,h.shiftRight=function(f){return r(f)&&(f=f.toInt()),(f&=63)===0?this:f<32?l(this.low>>>f|this.high<<32-f,this.high>>f,this.unsigned):l(this.high>>f-32,this.high>=0?0:-1,this.unsigned)},h.shr=h.shiftRight,h.shiftRightUnsigned=function(f){return r(f)&&(f=f.toInt()),(f&=63)===0?this:f<32?l(this.low>>>f|this.high<<32-f,this.high>>>f,this.unsigned):f===32?l(this.high,0,this.unsigned):l(this.high>>>f-32,0,this.unsigned)},h.shru=h.shiftRightUnsigned,h.shr_u=h.shiftRightUnsigned,h.rotateLeft=function(f){var k;return r(f)&&(f=f.toInt()),(f&=63)===0?this:f===32?l(this.high,this.low,this.unsigned):f<32?(k=32-f,l(this.low<<f|this.high>>>k,this.high<<f|this.low>>>k,this.unsigned)):(f-=32,k=32-f,l(this.high<<f|this.low>>>k,this.low<<f|this.high>>>k,this.unsigned))},h.rotl=h.rotateLeft,h.rotateRight=function(f){var k;return r(f)&&(f=f.toInt()),(f&=63)===0?this:f===32?l(this.high,this.low,this.unsigned):f<32?(k=32-f,l(this.high<<k|this.low>>>f,this.low<<k|this.high>>>f,this.unsigned)):(f-=32,k=32-f,l(this.low<<k|this.high>>>f,this.high<<k|this.low>>>f,this.unsigned))},h.rotr=h.rotateRight,h.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},h.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},h.toBytes=function(f){return f?this.toBytesLE():this.toBytesBE()},h.toBytesLE=function(){var f=this.high,k=this.low;return[k&255,k>>>8&255,k>>>16&255,k>>>24,f&255,f>>>8&255,f>>>16&255,f>>>24]},h.toBytesBE=function(){var f=this.high,k=this.low;return[f>>>24,f>>>16&255,f>>>8&255,f&255,k>>>24,k>>>16&255,k>>>8&255,k&255]},t.fromBytes=function(f,k,X){return X?t.fromBytesLE(f,k):t.fromBytesBE(f,k)},t.fromBytesLE=function(f,k){return new t(f[0]|f[1]<<8|f[2]<<16|f[3]<<24,f[4]|f[5]<<8|f[6]<<16|f[7]<<24,k)},t.fromBytesBE=function(f,k){return new t(f[4]<<24|f[5]<<16|f[6]<<8|f[7],f[0]<<24|f[1]<<16|f[2]<<8|f[3],k)},typeof BigInt=="function"&&(t.fromBigInt=function(f,k){var X=Number(BigInt.asIntN(32,f)),Y=Number(BigInt.asIntN(32,f>>BigInt(32)));return l(X,Y,k)},t.fromValue=function(f,k){return typeof f=="bigint"?t.fromBigInt(f,k):m(f,k)},h.toBigInt=function(){var f=BigInt(this.low>>>0),k=BigInt(this.unsigned?this.high>>>0:this.high);return k<<BigInt(32)|f});var T=n.default=t})});var ch=I(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.loadFileDescriptorSetFromObject=be.loadFileDescriptorSetFromBuffer=be.fromJSON=be.loadSync=be.load=be.IdempotencyLevel=be.isAnyExtension=be.Long=void 0;var OR=wy(),Yt=La(),oh=E_(),ah=D_(),NR=O_();be.Long=NR;function kR(n){return"@type"in n&&typeof n["@type"]=="string"}be.isAnyExtension=kR;var P_;(function(n){n.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",n.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",n.IDEMPOTENT="IDEMPOTENT"})(P_=be.IdempotencyLevel||(be.IdempotencyLevel={}));var x_={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function PR(n,e){return n===""?e:n+"."+e}function xR(n){return n instanceof Yt.Service||n instanceof Yt.Type||n instanceof Yt.Enum}function MR(n){return n instanceof Yt.Namespace||n instanceof Yt.Root}function M_(n,e){let t=PR(e,n.name);return xR(n)?[[t,n]]:MR(n)&&typeof n.nested<"u"?Object.keys(n.nested).map(r=>M_(n.nested[r],t)).reduce((r,i)=>r.concat(i),[]):[]}function N_(n,e){return function(r){return n.toObject(n.decode(r),e)}}function k_(n){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${n.name} structure, got array instead`);let r=n.fromObject(t);return n.encode(r).finish()}}function LR(n){return(n||[]).reduce((e,t)=>{for(let[r,i]of Object.entries(t))switch(r){case"uninterpreted_option":e.uninterpreted_option.push(t.uninterpreted_option);break;default:e[r]=i}return e},{deprecated:!1,idempotency_level:P_.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function FR(n,e,t,r){let i=n.resolvedRequestType,s=n.resolvedResponseType;return{path:"/"+e+"/"+n.name,requestStream:!!n.requestStream,responseStream:!!n.responseStream,requestSerialize:k_(i),requestDeserialize:N_(i,t),responseSerialize:k_(s),responseDeserialize:N_(s,t),originalName:OR(n.name),requestType:sh(i,r),responseType:sh(s,r),options:LR(n.parsedOptions)}}function BR(n,e,t,r){let i={};for(let s of n.methodsArray)i[s.name]=FR(s,e,t,r);return i}function sh(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:t.$type.toObject(t,x_),fileDescriptorProtos:e}}function UR(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:t.$type.toObject(t,x_),fileDescriptorProtos:e}}function qR(n,e,t,r){if(n instanceof Yt.Service)return BR(n,e,t,r);if(n instanceof Yt.Type)return sh(n,r);if(n instanceof Yt.Enum)return UR(n,r);throw new Error("Type mismatch in reflection object handling")}function Ua(n,e){let t={};n.resolveAll();let i=n.toDescriptor("proto3").file.map(s=>Buffer.from(oh.FileDescriptorProto.encode(s).finish()));for(let[s,o]of M_(n,""))t[s]=qR(o,s,e,i);return t}function L_(n,e){e=e||{};let t=Yt.Root.fromDescriptor(n);return t.resolveAll(),Ua(t,e)}function VR(n,e){return(0,ah.loadProtosWithOptions)(n,e).then(t=>Ua(t,e))}be.load=VR;function zR(n,e){let t=(0,ah.loadProtosWithOptionsSync)(n,e);return Ua(t,e)}be.loadSync=zR;function GR(n,e){e=e||{};let t=Yt.Root.fromJSON(n);return t.resolveAll(),Ua(t,e)}be.fromJSON=GR;function jR(n,e){let t=oh.FileDescriptorSet.decode(n);return L_(t,e)}be.loadFileDescriptorSetFromBuffer=jR;function WR(n,e){let t=oh.FileDescriptorSet.fromObject(n);return L_(t,e)}be.loadFileDescriptorSetFromObject=WR;(0,ah.addCommonProtos)()});var Sr=I(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.setup=he.getChannelzServiceDefinition=he.getChannelzHandlers=he.unregisterChannelzRef=he.registerChannelzSocket=he.registerChannelzServer=he.registerChannelzSubchannel=he.registerChannelzChannel=he.ChannelzCallTracker=he.ChannelzChildrenTracker=he.ChannelzTrace=void 0;var F_=require("net"),ks=pt(),xs=ie(),HR=zt(),$R=oa(),KR=id();function lh(n){return{channel_id:n.id,name:n.name}}function fh(n){return{subchannel_id:n.id,name:n.name}}function QR(n){return{server_id:n.id}}function Va(n){return{socket_id:n.id,name:n.name}}var B_=32,uh=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let i=new Date;this.events.push({description:t,severity:e,timestamp:i,childChannel:r?.kind==="channel"?r:void 0,childSubchannel:r?.kind==="subchannel"?r:void 0}),this.events.length>=B_*2&&(this.events=this.events.slice(B_)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:yn(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:yn(e.timestamp),channel_ref:e.childChannel?lh(e.childChannel):null,subchannel_ref:e.childSubchannel?fh(e.childSubchannel):null}))}}};he.ChannelzTrace=uh;var dh=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,i;switch(e.kind){case"channel":{let s=(t=this.channelChildren.get(e.id))!==null&&t!==void 0?t:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(i=this.socketChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t));break}}}getChildLists(){let e=[];for(let{ref:i}of this.channelChildren.values())e.push(i);let t=[];for(let{ref:i}of this.subchannelChildren.values())t.push(i);let r=[];for(let{ref:i}of this.socketChildren.values())r.push(i);return{channels:e,subchannels:t,sockets:r}}};he.ChannelzChildrenTracker=dh;var hh=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};he.ChannelzCallTracker=hh;var YR=1;function za(){return YR++}var Ps=[],ph=[],Qn=[],mh=[];function JR(n,e,t){let r=za(),i={id:r,name:n,kind:"channel"};return t&&(Ps[r]={ref:i,getInfo:e}),i}he.registerChannelzChannel=JR;function XR(n,e,t){let r=za(),i={id:r,name:n,kind:"subchannel"};return t&&(ph[r]={ref:i,getInfo:e}),i}he.registerChannelzSubchannel=XR;function ZR(n,e){let t=za(),r={id:t,kind:"server"};return e&&(Qn[t]={ref:r,getInfo:n}),r}he.registerChannelzServer=ZR;function eD(n,e,t){let r=za(),i={id:r,name:n,kind:"socket"};return t&&(mh[r]={ref:i,getInfo:e}),i}he.registerChannelzSocket=eD;function tD(n){switch(n.kind){case"channel":delete Ps[n.id];return;case"subchannel":delete ph[n.id];return;case"server":delete Qn[n.id];return;case"socket":delete mh[n.id];return}}he.unregisterChannelzRef=tD;function nD(n){let e=Number.parseInt(n,16);return[e/256|0,e%256]}function U_(n){if(n==="")return[];let e=n.split(":").map(r=>nD(r));return[].concat(...e)}function rD(n){if((0,F_.isIPv4)(n))return Buffer.from(Uint8Array.from(n.split(".").map(e=>Number.parseInt(e))));if((0,F_.isIPv6)(n)){let e,t,r=n.indexOf("::");r===-1?(e=n,t=""):(e=n.substring(0,r),t=n.substring(r+2));let i=Buffer.from(U_(e)),s=Buffer.from(U_(t)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function V_(n){switch(n){case ks.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case ks.ConnectivityState.IDLE:return{state:"IDLE"};case ks.ConnectivityState.READY:return{state:"READY"};case ks.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case ks.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function yn(n){if(!n)return null;let e=n.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function z_(n){let e=n.getInfo();return{ref:lh(n.ref),data:{target:e.target,state:V_(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:yn(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(t=>lh(t)),subchannel_ref:e.children.subchannels.map(t=>fh(t))}}function iD(n,e){let t=Number.parseInt(n.request.channel_id),r=Ps[t];if(r===void 0){e({code:xs.Status.NOT_FOUND,details:"No channel data found for id "+t});return}e(null,{channel:z_(r)})}function sD(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_channel_id);for(;i<Ps.length;i++){let s=Ps[i];if(s!==void 0&&(r.push(z_(s)),r.length>=t))break}e(null,{channel:r,end:i>=Qn.length})}function G_(n){let e=n.getInfo();return{ref:QR(n.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:yn(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(t=>Va(t))}}function oD(n,e){let t=Number.parseInt(n.request.server_id),r=Qn[t];if(r===void 0){e({code:xs.Status.NOT_FOUND,details:"No server data found for id "+t});return}e(null,{server:G_(r)})}function aD(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_server_id);for(;i<Qn.length;i++){let s=Qn[i];if(s!==void 0&&(r.push(G_(s)),r.length>=t))break}e(null,{server:r,end:i>=Qn.length})}function cD(n,e){let t=Number.parseInt(n.request.subchannel_id),r=ph[t];if(r===void 0){e({code:xs.Status.NOT_FOUND,details:"No subchannel data found for id "+t});return}let i=r.getInfo(),s={ref:fh(r.ref),data:{target:i.target,state:V_(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:yn(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(o=>Va(o))};e(null,{subchannel:s})}function q_(n){var e;return(0,HR.isTcpSubchannelAddress)(n)?{address:"tcpip_address",tcpip_address:{ip_address:(e=rD(n.host))!==null&&e!==void 0?e:void 0,port:n.port}}:{address:"uds_address",uds_address:{filename:n.path}}}function lD(n,e){var t,r,i,s,o;let a=Number.parseInt(n.request.socket_id),c=mh[a];if(c===void 0){e({code:xs.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let l=c.getInfo(),u=l.security?{model:"tls",tls:{cipher_suite:l.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(t=l.security.cipherSuiteStandardName)!==null&&t!==void 0?t:void 0,other_name:(r=l.security.cipherSuiteOtherName)!==null&&r!==void 0?r:void 0,local_certificate:(i=l.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=l.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,p={ref:Va(c.ref),local:l.localAddress?q_(l.localAddress):null,remote:l.remoteAddress?q_(l.remoteAddress):null,remote_name:(o=l.remoteName)!==null&&o!==void 0?o:void 0,security:u,data:{keep_alives_sent:l.keepAlivesSent,streams_started:l.streamsStarted,streams_succeeded:l.streamsSucceeded,streams_failed:l.streamsFailed,last_local_stream_created_timestamp:yn(l.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:yn(l.lastRemoteStreamCreatedTimestamp),messages_received:l.messagesReceived,messages_sent:l.messagesSent,last_message_received_timestamp:yn(l.lastMessageReceivedTimestamp),last_message_sent_timestamp:yn(l.lastMessageSentTimestamp),local_flow_control_window:l.localFlowControlWindow?{value:l.localFlowControlWindow}:null,remote_flow_control_window:l.remoteFlowControlWindow?{value:l.remoteFlowControlWindow}:null}};e(null,{socket:p})}function uD(n,e){let t=Number.parseInt(n.request.server_id),r=Qn[t];if(r===void 0){e({code:xs.Status.NOT_FOUND,details:"No server data found for id "+t});return}let i=Number.parseInt(n.request.start_socket_id),s=Number.parseInt(n.request.max_results),a=r.getInfo().sessionChildren.sockets.sort((u,p)=>u.id-p.id),c=[],l=0;for(;l<a.length&&!(a[l].id>=i&&(c.push(Va(a[l])),c.length>=s));l++);e(null,{socket_ref:c,end:l>=a.length})}function j_(){return{GetChannel:iD,GetTopChannels:sD,GetServer:oD,GetServers:aD,GetSubchannel:cD,GetSocket:lD,GetServerSockets:uD}}he.getChannelzHandlers=j_;var qa=null;function W_(){if(qa)return qa;let n=ch().loadSync,e=n("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return qa=(0,KR.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,qa}he.getChannelzServiceDefinition=W_;function dD(){(0,$R.registerAdminService)(W_,j_)}he.setup=dD});var H_=I(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.Subchannel=void 0;var ce=pt(),hD=us(),gh=pe(),Ga=ie(),fD=it(),pD=zt(),pi=Sr(),mD="subchannel",gD=~(1<<31),yh=class{constructor(e,t,r,i,s){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=i,this.connector=s,this.connectivityState=ce.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new pi.ChannelzCallTracker,this.childrenTracker=new pi.ChannelzChildrenTracker,this.streamTracker=new pi.ChannelzCallTracker;let a={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new hD.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,pD.subchannelAddressToString)(t),this.keepaliveTime=(o=r["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new pi.ChannelzTrace,this.channelzRef=(0,pi.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){gh.trace(Ga.LogVerbosity.DEBUG,mD,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){gh.trace(Ga.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([ce.ConnectivityState.TRANSIENT_FAILURE],ce.ConnectivityState.CONNECTING):this.transitionToState([ce.ConnectivityState.TRANSIENT_FAILURE],ce.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,gD);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(t=>{this.transitionToState([ce.ConnectivityState.CONNECTING],ce.ConnectivityState.READY)?(this.transport=t,this.channelzEnabled&&this.childrenTracker.refChild(t.getChannelzRef()),t.addDisconnectListener(r=>{this.transitionToState([ce.ConnectivityState.READY],ce.ConnectivityState.IDLE),r&&this.keepaliveTime>0&&(this.keepaliveTime*=2,gh.log(Ga.LogVerbosity.ERROR,`Connection to ${(0,fD.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):t.shutdown()},t=>{this.transitionToState([ce.ConnectivityState.CONNECTING],ce.ConnectivityState.TRANSIENT_FAILURE,`${t}`)})}transitionToState(e,t,r){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(ce.ConnectivityState[this.connectivityState]+" -> "+ce.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+ce.ConnectivityState[t]);let o=this.connectivityState;switch(this.connectivityState=t,t){case ce.ConnectivityState.READY:this.stopBackoff();break;case ce.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case ce.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case ce.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let a of this.stateListeners)a(this,o,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,pi.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([ce.ConnectivityState.CONNECTING,ce.ConnectivityState.READY],ce.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,t,r,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===Ga.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,t,r,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([ce.ConnectivityState.IDLE],ce.ConnectivityState.CONNECTING)||this.connectivityState===ce.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([ce.ConnectivityState.TRANSIENT_FAILURE],ce.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};ja.Subchannel=yh});var Sh=I(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.setup=Xn.DEFAULT_PORT=void 0;var $_=qt(),Q_=require("dns"),Y_=require("util"),yD=Nu(),vh=ie(),_h=Xe(),vD=pe(),_D=ie(),Yn=it(),K_=require("net"),TD=us(),SD="dns_resolver";function Jn(n){vD.trace(_D.LogVerbosity.DEBUG,SD,n)}Xn.DEFAULT_PORT=443;var ED=3e4,bD=Y_.promisify(Q_.resolveTxt),wD=Y_.promisify(Q_.lookup);function CD(...n){let e=[];for(let t=0;t<Math.max.apply(null,n.map(r=>r.length));t++)for(let r of n)t<r.length&&e.push(r[t]);return e}var Th=class{constructor(e,t,r){var i,s,o;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,Jn("Resolver constructed for target "+(0,Yn.uriToString)(e));let a=(0,Yn.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,K_.isIPv4)(a.host)||(0,K_.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:Xn.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:Xn.DEFAULT_PORT),this.percentage=Math.random()*100,r["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:vh.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,Yn.uriToString)(this.target)}`,metadata:new _h.Metadata};let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new TD.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:ED,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Jn("Returning IP address for target "+(0,Yn.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Jn("Failed to parse DNS address "+(0,Yn.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:vh.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,Yn.uriToString)(this.target)}`,metadata:new _h.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;Jn("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=wD(e,{all:!0}),this.pendingLookupPromise.then(t=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let r=t.filter(o=>o.family===4),i=t.filter(o=>o.family===6);this.latestLookupResult=CD(i,r).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(Jn("Resolved addresses for target "+(0,Yn.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},t=>{this.pendingLookupPromise!==null&&(Jn("Resolution error for target "+(0,Yn.uriToString)(this.target)+": "+t.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=bD(e),this.pendingTxtPromise.then(t=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,yD.extractAndSelectServiceConfig)(t,this.percentage)}catch(r){this.latestServiceConfigError={code:vh.Status.UNAVAILABLE,details:`Parsing service config failed with error ${r.message}`,metadata:new _h.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},t=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||t===void 0?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Jn('resolution update delayed by "min time between resolutions" rate limit'):Jn("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function ID(){(0,$_.registerResolver)("dns",Th),(0,$_.registerDefaultScheme)("dns")}Xn.setup=ID});var Eh=I(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.getProxiedConnection=yi.mapProxyName=void 0;var Ms=pe(),mi=ie(),AD=qt(),RD=require("http"),DD=require("tls"),OD=pe(),J_=zt(),gi=it(),ND=require("url"),kD=Sh(),PD="proxy";function Zn(n){OD.trace(mi.LogVerbosity.DEBUG,PD,n)}function xD(){let n="",e="";if(process.env.grpc_proxy)e="grpc_proxy",n=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",n=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",n=process.env.http_proxy;else return{};let t;try{t=new ND.URL(n)}catch{return(0,Ms.log)(mi.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(t.protocol!=="http:")return(0,Ms.log)(mi.LogVerbosity.ERROR,`"${t.protocol}" scheme not supported in proxy URI`),{};let r=null;t.username&&(t.password?((0,Ms.log)(mi.LogVerbosity.INFO,"userinfo found in proxy URI"),r=`${t.username}:${t.password}`):r=t.username);let i=t.hostname,s=t.port;s===""&&(s="80");let o={address:`${i}:${s}`};return r&&(o.creds=r),Zn("Proxy server "+o.address+" set by environment variable "+e),o}function MD(){let n=process.env.no_grpc_proxy,e="no_grpc_proxy";return n||(n=process.env.no_proxy,e="no_proxy"),n?(Zn("No proxy server list set by environment variable "+e),n.split(",")):[]}function LD(n,e){var t;let r={target:n,extraOptions:{}};if(((t=e["grpc.enable_http_proxy"])!==null&&t!==void 0?t:1)===0||n.scheme==="unix")return r;let i=xD();if(!i.address)return r;let s=(0,gi.splitHostPort)(n.path);if(!s)return r;let o=s.host;for(let c of MD())if(c===o)return Zn("Not using proxy for target in no_proxy list: "+(0,gi.uriToString)(n)),r;let a={"grpc.http_connect_target":(0,gi.uriToString)(n)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}yi.mapProxyName=LD;function FD(n,e,t){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let i=e["grpc.http_connect_target"],s=(0,gi.parseUri)(i);if(s===null)return Promise.resolve({});let o=(0,gi.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(r=o.port)!==null&&r!==void 0?r:kD.DEFAULT_PORT}`,c={method:"CONNECT",path:a},l={Host:a};(0,J_.isTcpSubchannelAddress)(n)?(c.host=n.host,c.port=n.port):c.socketPath=n.path,"grpc.http_connect_creds"in e&&(l["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),c.headers=l;let u=(0,J_.subchannelAddressToString)(n);return Zn("Using proxy "+u+" to connect to "+c.path),new Promise((p,m)=>{let S=RD.request(c);S.once("connect",(E,w,C)=>{var N;if(S.removeAllListeners(),w.removeAllListeners(),E.statusCode===200)if(Zn("Successfully connected to "+c.path+" through proxy "+u),"secureContext"in t){let x=(0,AD.getDefaultAuthority)(s),M=(0,gi.splitHostPort)(x),b=(N=M?.host)!==null&&N!==void 0?N:x,z=DD.connect(Object.assign({host:b,servername:b,socket:w},t),()=>{Zn("Successfully established a TLS connection to "+c.path+" through proxy "+u),p({socket:z,realTarget:s})});z.on("error",U=>{Zn("Failed to establish a TLS connection to "+c.path+" through proxy "+u+" with error "+U.message),m()})}else Zn("Successfully established a plaintext connection to "+c.path+" through proxy "+u),p({socket:w,realTarget:s});else(0,Ms.log)(mi.LogVerbosity.ERROR,"Failed to connect to "+c.path+" through proxy "+u+" with status "+E.statusCode),m()}),S.once("error",E=>{S.removeAllListeners(),(0,Ms.log)(mi.LogVerbosity.ERROR,"Failed to connect to proxy "+u+" with error "+E.message),m()}),S.end()})}yi.getProxiedConnection=FD});var wh=I(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.StreamDecoder=void 0;var Jt;(function(n){n[n.NO_DATA=0]="NO_DATA",n[n.READING_SIZE=1]="READING_SIZE",n[n.READING_MESSAGE=2]="READING_MESSAGE"})(Jt||(Jt={}));var bh=class{constructor(e){this.maxReadMessageLength=e,this.readState=Jt.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t=0,r,i=[];for(;t<e.length;)switch(this.readState){case Jt.NO_DATA:this.readCompressFlag=e.slice(t,t+1),t+=1,this.readState=Jt.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case Jt.READING_SIZE:if(r=Math.min(e.length-t,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,t,t+r),this.readSizeRemaining-=r,t+=r,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=Jt.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=Jt.NO_DATA,i.push(s)}}break;case Jt.READING_MESSAGE:if(r=Math.min(e.length-t,this.readMessageRemaining),this.readPartialMessage.push(e.slice(t,t+r)),this.readMessageRemaining-=r,t+=r,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=Jt.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};Wa.StreamDecoder=bh});var X_=I(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Http2SubchannelCall=void 0;var vn=require("http2"),BD=require("os"),se=ie(),er=Xe(),UD=wh(),qD=pe(),VD=ie(),zD="subchannel_call";function GD(n){for(let[e,t]of Object.entries(BD.constants.errno))if(t===n)return e;return"Unknown system error "+n}var Ch=class{constructor(e,t,r,i,s){var o;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=s,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=se.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let a=(o=i.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:se.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new UD.StreamDecoder(a),e.on("response",(c,l)=>{let u="";for(let p of Object.keys(c))u+="		"+p+": "+c[p]+`
`;switch(this.trace(`Received server headers:
`+u),c[":status"]){case 400:this.mappedStatusCode=se.Status.INTERNAL;break;case 401:this.mappedStatusCode=se.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=se.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=se.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=se.Status.UNAVAILABLE;break;default:this.mappedStatusCode=se.Status.UNKNOWN}if(l&vn.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(c);else{let p;try{p=er.Metadata.fromHttp2Headers(c)}catch(m){this.endCall({code:se.Status.UNKNOWN,details:m.message,metadata:new er.Metadata});return}this.listener.onReceiveMetadata(p)}}),e.on("trailers",c=>{this.handleTrailers(c)}),e.on("data",c=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+c.length);let l;try{l=this.decoder.write(c)}catch(u){this.cancelWithStatus(se.Status.RESOURCE_EXHAUSTED,u.message);return}for(let u of l)this.trace("parsed message of length "+u.length),this.callEventTracker.addMessageReceived(),this.tryPush(u)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var c;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((c=this.finalStatus)===null||c===void 0?void 0:c.code)===se.Status.OK)return;let l,u="";switch(e.rstCode){case vn.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;l=se.Status.INTERNAL,u=`Received RST_STREAM with code ${e.rstCode}`;break;case vn.constants.NGHTTP2_REFUSED_STREAM:l=se.Status.UNAVAILABLE,u="Stream refused by server";break;case vn.constants.NGHTTP2_CANCEL:l=se.Status.CANCELLED,u="Call cancelled";break;case vn.constants.NGHTTP2_ENHANCE_YOUR_CALM:l=se.Status.RESOURCE_EXHAUSTED,u="Bandwidth exhausted or memory limit exceeded";break;case vn.constants.NGHTTP2_INADEQUATE_SECURITY:l=se.Status.PERMISSION_DENIED,u="Protocol not secure enough";break;case vn.constants.NGHTTP2_INTERNAL_ERROR:l=se.Status.INTERNAL,this.internalError===null?u=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(l=se.Status.UNAVAILABLE,u=this.internalError.message):u=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:l=se.Status.INTERNAL,u=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:l,details:u,metadata:new er.Metadata,rstCode:e.rstCode})})}),e.on("error",c=>{c.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+c.message+" code="+c.code+" errno="+GD(c.errno)+" syscall="+c.syscall),this.internalError=c),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:se.Status.UNAVAILABLE,details:"Connection dropped",metadata:new er.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){qD.trace(VD.LogVerbosity.DEBUG,zD,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===se.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==se.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let t="";for(let c of Object.keys(e))t+="		"+c+": "+e[c]+`
`;this.trace(`Received server trailers:
`+t);let r;try{r=er.Metadata.fromHttp2Headers(e)}catch{r=new er.Metadata}let i=r.getMap(),s=this.mappedStatusCode;if(s===se.Status.UNKNOWN&&typeof i["grpc-status"]=="string"){let c=Number(i["grpc-status"]);c in se.Status&&(s=c,this.trace("received status code "+c+" from server")),r.remove("grpc-status")}let o="";if(typeof i["grpc-message"]=="string"){try{o=decodeURI(i["grpc-message"])}catch{o=i["grpc-message"]}r.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:r};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===se.Status.OK?t=vn.constants.NGHTTP2_NO_ERROR:t=vn.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new er.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==se.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=i=>{process.nextTick(()=>{var s;let o=se.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=se.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(i){this.endCall({code:se.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new er.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};Ha.Http2SubchannelCall=Ch});var Ih=I($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.getNextCallNumber=void 0;var jD=0;function WD(){return jD++}$a.getNextCallNumber=WD});var tT=I(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Http2SubchannelConnector=void 0;var Nh=require("http2"),Z_=require("tls"),Ah=Sr(),Ls=ie(),HD=Eh(),_i=pe(),eT=qt(),Ka=zt(),vi=it(),$D=require("net"),KD=X_(),QD=Ih(),Rh="transport",YD="transport_flowctrl",JD=fu().version,{HTTP2_HEADER_AUTHORITY:XD,HTTP2_HEADER_CONTENT_TYPE:ZD,HTTP2_HEADER_METHOD:eO,HTTP2_HEADER_PATH:tO,HTTP2_HEADER_TE:nO,HTTP2_HEADER_USER_AGENT:rO}=Nh.constants,iO=2e4,sO=Buffer.from("too_many_pings","ascii"),Dh=class{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=iO,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new Ah.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,Ka.subchannelAddressToString)(t),r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,Ah.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${JD}`,r["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let c=!1;s===Nh.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(sO)&&(c=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(c)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),_i.isTracerEnabled(Rh)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let i=this.session.socket,s=i.remoteAddress?(0,Ka.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,Ka.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let l=i,u=l.getCipher(),p=l.getCertificate(),m=l.getPeerCertificate();a={cipherSuiteStandardName:(e=u.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:u.standardName?null:u.name,localCertificate:p&&"raw"in p?p.raw:null,remoteCertificate:m&&"raw"in m?m.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(t=this.session.state.localWindowSize)!==null&&t!==void 0?t:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null}}trace(e){_i.trace(Ls.LogVerbosity.DEBUG,Rh,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){_i.trace(Ls.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){_i.trace(Ls.LogVerbosity.DEBUG,YD,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){_i.trace(Ls.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(t=(e=this.keepaliveTimeoutId).unref)===null||t===void 0||t.call(e));try{this.session.ping((r,i,s)=>{r&&(this.keepaliveTrace("Ping failed with error "+r.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||t===void 0?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,i,s){let o=e.toHttp2Headers();o[XD]=t,o[rO]=this.userAgent,o[ZD]="application/grpc",o[eO]="POST",o[tO]=r,o[nO]="trailers";let a;try{a=this.session.request(o)}catch(u){throw this.handleDisconnect(),u}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let c,l;return this.channelzEnabled?(this.streamTracker.addCallStarted(),c={addMessageSent:()=>{var u;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var p;(p=s.onCallEnd)===null||p===void 0||p.call(s,u),this.removeActiveCall(l)},onStreamEnd:u=>{var p;u?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(p=s.onStreamEnd)===null||p===void 0||p.call(s,u)}}):c={addMessageSent:()=>{var u;(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var p;(p=s.onCallEnd)===null||p===void 0||p.call(s,u),this.removeActiveCall(l)},onStreamEnd:u=>{var p;(p=s.onStreamEnd)===null||p===void 0||p.call(s,u)}},l=new KD.Http2SubchannelCall(a,c,i,this,(0,QD.getNextCallNumber)()),this.addActiveCall(l),l}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,Ah.unregisterChannelzRef)(this.channelzRef)}},Oh=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){_i.trace(Ls.LogVerbosity.DEBUG,Rh,(0,vi.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,i){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,c,l;let u;i.realTarget?(u=(0,vi.uriToString)(i.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,vi.uriToString)(i.realTarget))):(u=null,this.trace("creating HTTP/2 session to "+(0,Ka.subchannelAddressToString)(e)));let p=(0,eT.getDefaultAuthority)((a=i.realTarget)!==null&&a!==void 0?a:this.channelTarget),m=t._getConnectionOptions()||{};m.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?m.maxSessionMemory=r["grpc-node.max_session_memory"]:m.maxSessionMemory=Number.MAX_SAFE_INTEGER;let S="http://";if("secureContext"in m){if(S="https://",r["grpc.ssl_target_name_override"]){let C=r["grpc.ssl_target_name_override"];m.checkServerIdentity=(N,x)=>(0,Z_.checkServerIdentity)(C,x),m.servername=C}else{let C=(l=(c=(0,vi.splitHostPort)(p))===null||c===void 0?void 0:c.host)!==null&&l!==void 0?l:"localhost";m.servername=C}i.socket&&(m.createConnection=(C,N)=>i.socket)}else m.createConnection=(C,N)=>i.socket?i.socket:$D.connect(e);m=Object.assign(Object.assign(Object.assign({},m),e),{enableTrace:r["grpc-node.tls_enable_trace"]===1});let E=Nh.connect(S+p,m);this.session=E;let w="Failed to connect";E.unref(),E.once("connect",()=>{E.removeAllListeners(),s(new Dh(E,e,r,u)),this.session=null}),E.once("close",()=>{this.session=null,setImmediate(()=>{o(`${w} (${new Date().toISOString()})`)})}),E.once("error",C=>{w=C.message,this.trace("connection failed with error "+w)})})}connect(e,t,r){var i,s;if(this.isShutdown)return Promise.reject();let o=t._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let a=r["grpc.ssl_target_name_override"];o.checkServerIdentity=(c,l)=>(0,Z_.checkServerIdentity)(a,l),o.servername=a}else if("grpc.http_connect_target"in r){let a=(0,eT.getDefaultAuthority)((i=(0,vi.parseUri)(r["grpc.http_connect_target"]))!==null&&i!==void 0?i:{path:"localhost"}),c=(0,vi.splitHostPort)(a);o.servername=(s=c?.host)!==null&&s!==void 0?s:a}r["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,HD.getProxiedConnection)(e,r,o).then(a=>this.createSession(e,t,r,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};Qa.Http2SubchannelConnector=Oh});var nT=I(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.getSubchannelPool=Ti.SubchannelPool=void 0;var oO=Hg(),aO=H_(),cO=zt(),lO=it(),uO=tT(),dO=1e4,Fs=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let i=this.pool[t].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[t]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},dO),(t=(e=this.cleanupTimer).unref)===null||t===void 0||t.call(e))}getOrCreateSubchannel(e,t,r,i){this.ensureCleanupTask();let s=(0,lO.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let c of a)if((0,cO.subchannelAddressEqual)(t,c.subchannelAddress)&&(0,oO.channelOptionsEqual)(r,c.channelArguments)&&i._equals(c.channelCredentials))return c.subchannel}let o=new aO.Subchannel(e,t,r,i,new uO.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:t,channelArguments:r,channelCredentials:i,subchannel:o}),o.ref(),o}};Ti.SubchannelPool=Fs;var hO=new Fs;function fO(n){return n?hO:new Fs}Ti.getSubchannelPool=fO});var Ph=I(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.FilterStackFactory=Si.FilterStack=void 0;var Ya=class{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMessage(t);return t}receiveMessage(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Si.FilterStack=Ya;var kh=class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new Ya(this.factories.map(e=>e.createFilter()))}};Si.FilterStackFactory=kh});var xh=I(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.CompressionAlgorithms=void 0;var rT;(function(n){n[n.identity=0]="identity",n[n.deflate=1]="deflate",n[n.gzip=2]="gzip"})(rT||(Ja.CompressionAlgorithms=rT={}))});var Lh=I(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.BaseFilter=void 0;var Mh=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}};Xa.BaseFilter=Mh});var oT=I(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.CompressionFilterFactory=bi.CompressionFilter=void 0;var Za=require("zlib"),sT=xh(),ec=ie(),pO=Lh(),mO=pe(),gO=n=>typeof n=="number"&&typeof sT.CompressionAlgorithms[n]=="string",Ei=class{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(t?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i}async readMessage(e){let t=e.readUInt8(0)===1,r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}},Er=class extends Ei{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},Fh=class extends Ei{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{Za.deflate(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=Za.createInflate();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:ec.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},Bh=class extends Ei{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{Za.gzip(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=Za.createGunzip();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:ec.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},Uh=class extends Ei{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function iT(n,e){switch(n){case"identity":return new Er;case"deflate":return new Fh(e);case"gzip":return new Bh(e);default:return new Uh(n)}}var tc=class extends pO.BaseFilter{constructor(e,t){var r,i;super(),this.sharedFilterConfig=t,this.sendCompression=new Er,this.receiveCompression=new Er,this.currentCompressionAlgorithm="identity";let s=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(r=e["grpc.max_receive_message_length"])!==null&&r!==void 0?r:ec.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,s!==void 0)if(gO(s)){let o=sT.CompressionAlgorithms[s],a=(i=t.serverSupportedEncodingHeader)===null||i===void 0?void 0:i.split(",");(!a||a.includes(o))&&(this.currentCompressionAlgorithm=o,this.sendCompression=iT(this.currentCompressionAlgorithm,-1))}else mO.log(ec.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${s}`)}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let i=t[0];typeof i=="string"&&(this.receiveCompression=iT(i,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Er,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r=await e,i;return this.sendCompression instanceof Er?i=!1:i=(((t=r.flags)!==null&&t!==void 0?t:0)&2)===0,{message:await this.sendCompression.writeMessage(r.message,i),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}};bi.CompressionFilter=tc;var qh=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new tc(this.options,this.sharedFilterConfig)}};bi.CompressionFilterFactory=qh});var nc=I(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.deadlineToString=Xt.getRelativeTimeout=Xt.getDeadlineTimeoutString=Xt.minDeadline=void 0;function yO(...n){let e=1/0;for(let t of n){let r=t instanceof Date?t.getTime():t;r<e&&(e=r)}return e}Xt.minDeadline=yO;var vO=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function _O(n){let e=new Date().getTime();n instanceof Date&&(n=n.getTime());let t=Math.max(n-e,0);for(let[r,i]of vO){let s=t/i;if(s<1e8)return String(Math.ceil(s))+r}throw new Error("Deadline is too far in the future")}Xt.getDeadlineTimeoutString=_O;var TO=2147483647;function SO(n){let e=n instanceof Date?n.getTime():n,t=new Date().getTime(),r=e-t;return r<0?0:r>TO?1/0:r}Xt.getRelativeTimeout=SO;function EO(n){if(n instanceof Date)return n.toISOString();{let e=new Date(n);return Number.isNaN(e.getTime())?""+n:e.toISOString()}}Xt.deadlineToString=EO});var ic=I(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.restrictControlPlaneStatusCode=void 0;var Zt=ie(),bO=[Zt.Status.OK,Zt.Status.INVALID_ARGUMENT,Zt.Status.NOT_FOUND,Zt.Status.ALREADY_EXISTS,Zt.Status.FAILED_PRECONDITION,Zt.Status.ABORTED,Zt.Status.OUT_OF_RANGE,Zt.Status.DATA_LOSS];function wO(n,e){return bO.includes(n)?{code:Zt.Status.INTERNAL,details:`Invalid status from control plane: ${n} ${Zt.Status[n]} ${e}`}:{code:n,details:e}}rc.restrictControlPlaneStatusCode=wO});var cT=I(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.LoadBalancingCall=void 0;var aT=pt(),sc=ie(),CO=nc(),oc=Xe(),Bs=Bn(),IO=it(),AO=pe(),Vh=ic(),RO=require("http2"),DO="load_balancing_call",zh=class{constructor(e,t,r,i,s,o,a){var c,l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let u=this.methodName.split("/"),p="";u.length>=2&&(p=u[1]);let m=(l=(c=(0,IO.splitHostPort)(this.host))===null||c===void 0?void 0:c.host)!==null&&l!==void 0?l:"localhost";this.serviceUrl=`https://${m}/${p}`}trace(e){AO.trace(sc.LogVerbosity.DEBUG,DO,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:t});(r=this.listener)===null||r===void 0||r.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),i=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+Bs.PickResultType[r.pickResultType]+" subchannel: "+i+" status: "+((e=r.status)===null||e===void 0?void 0:e.code)+" "+((t=r.status)===null||t===void 0?void 0:t.details)),r.pickResultType){case Bs.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var c,l,u;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let p=this.metadata.clone();if(p.merge(a),p.get("authorization").length>1&&this.outputStatus({code:sc.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new oc.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==aT.ConnectivityState.READY){this.trace("Picked subchannel "+i+" has state "+aT.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&p.set("grpc-timeout",(0,CO.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(p,this.host,this.methodName,{onReceiveMetadata:m=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(m)},onReceiveMessage:m=>{this.trace("Received message"),this.listener.onReceiveMessage(m)},onReceiveStatus:m=>{this.trace("Received status"),m.rstCode===RO.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(m,"REFUSED"):this.outputStatus(m,"PROCESSED")}})}catch(m){this.trace("Failed to start call on picked subchannel "+i+" with error "+m.message),this.outputStatus({code:sc.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+m.message,metadata:new oc.Metadata},"NOT_STARTED");return}(l=(c=this.callConfig).onCommitted)===null||l===void 0||l.call(c),(u=r.onCallStarted)===null||u===void 0||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:c,details:l}=(0,Vh.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:sc.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:c,details:l,metadata:new oc.Metadata},"PROCESSED")});break;case Bs.PickResultType.DROP:let{code:s,details:o}=(0,Vh.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:r.status.metadata},"DROP")});break;case Bs.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:c}=(0,Vh.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:a,details:c,metadata:r.status.metadata},"PROCESSED")})}break;case Bs.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new oc.Metadata},"PROCESSED")}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};ac.LoadBalancingCall=zh});var uT=I(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.ResolvingCall=void 0;var wi=ie(),cc=nc(),lT=Xe(),OO=pe(),NO=ic(),kO="resolving_call",Gh=class{constructor(e,t,r,i,s,o){this.channel=e,this.method=t,this.filterStackFactory=i,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&wi.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(wi.Status.CANCELLED,"Cancelled by parent call")}),r.flags&wi.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,cc.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){OO.trace(wi.LogVerbosity.DEBUG,kO,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,cc.deadlineToString)(this.deadline));let e=(0,cc.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(wi.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(r=>r(t)),process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(i=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,i.message),this.pendingHalfClose&&r.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let t=e.config;if(t.status!==wi.Status.OK){let{code:r,details:i}=(0,NO.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:r,details:i,metadata:new lT.Metadata});return}if(t.methodConfig.timeout){let r=new Date;r.setSeconds(r.getSeconds()+t.methodConfig.timeout.seconds),r.setMilliseconds(r.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,cc.minDeadline)(this.deadline,r),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(r=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(r,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},r=>{this.outputStatus(r)})}reportResolverError(e){var t;!((t=this.metadata)===null||t===void 0)&&t.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new lT.Metadata})}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};lc.ResolvingCall=Gh});var dT=I(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.RetryingCall=tr.MessageBufferTracker=tr.RetryThrottler=void 0;var uc=ie(),PO=Xe(),xO=pe(),MO="retrying_call",Wh=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};tr.RetryThrottler=Wh;var Hh=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(t,i+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(t,i-e)}freeAll(e){var t;let r=(t=this.allocatedPerCall.get(e))!==null&&t!==void 0?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};tr.MessageBufferTracker=Hh;var jh="grpc-previous-rpc-attempts",$h=class{constructor(e,t,r,i,s,o,a,c,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=c,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let u=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(u.initialBackoff.substring(0,u.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){xO.trace(uc.LogVerbosity.DEBUG,MO,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;(t=this.listener)===null||t===void 0||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new PO.Metadata});for(let{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return(t=this.writeBuffer[e-this.writeBufferOffset])!==null&&t!==void 0?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let r=this.getBufferEntry(t);r.allocated&&this.bufferTracker.free(r.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&this.underlyingCalls[t].state!=="COMPLETED"&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(uc.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,t=-1;for(let[r,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,t=r);t===-1?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(r=>r===t||r.toString().toLowerCase()===uc.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,i),r}maybeRetryCall(e,t){if(this.state!=="RETRY"){t(!1);return}let r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5)){t(!1);return}let i;if(e===null)i=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){t(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(t(!0),this.attempts+=1,this.startNewAttempt())},i)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var i,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(r===null)a=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else a=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(t),this.reportStatus(e))},a)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(r,a=>{a||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e));break}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(t.length===0)return null;try{return parseInt(t[0])}catch{return-1}}handleChildStatus(e,t){var r;if(this.underlyingCalls[t].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===uc.Status.OK){(r=this.retryThrottler)===null||r===void 0||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(r=(t=this.hedgingTimer).unref)===null||r===void 0||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(jh,`${r}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),s=!0,r>0&&o.set(jh,`${r}`),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&o.metadata.set(jh,`${r}`),this.handleChildStatus(o,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(r=(t=this.getBufferEntry(s)).callback)===null||r===void 0||r.call(t),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if(t.state!=="COMPLETED"&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let i={message:t,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(r=e.callback)===null||r===void 0||r.call(e);for(let[a,c]of this.underlyingCalls.entries())c.state==="ACTIVE"&&c.nextMessageToSend===s&&c.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(a)}},t)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};tr.RetryingCall=$h});var hc=I(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.BaseSubchannelWrapper=void 0;var Kh=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};dc.BaseSubchannelWrapper=Kh});var pT=I(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.InternalChannel=void 0;var LO=Jo(),FO=Wg(),BO=nT(),hT=Bn(),Us=ie(),UO=Ph(),qO=oT(),fT=qt(),Qh=pe(),VO=Eh(),fc=it(),en=pt(),qs=Sr(),zO=cT(),GO=nc(),jO=uT(),Yh=Ih(),WO=ic(),Jh=dT(),HO=hc(),$O=2147483647,KO=1e3,QO=30*60*1e3,pc=new Map,YO=1<<24,JO=1<<20,Xh=class extends HO.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(r,i,s,o)=>{t.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},Zh=class{constructor(e,t,r){var i,s,o,a,c,l,u,p;if(this.credentials=t,this.options=r,this.connectivityState=en.ConnectivityState.IDLE,this.currentPicker=new hT.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new qs.ChannelzCallTracker,this.childrenTracker=new qs.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof LO.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let m=(0,fc.parseUri)(e);if(m===null)throw new Error(`Could not parse target name "${e}"`);let S=(0,fT.mapUriDefaultScheme)(m);if(S===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},$O),(s=(i=this.callRefTimer).unref)===null||s===void 0||s.call(i),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new qs.ChannelzTrace,this.channelzRef=(0,qs.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,fT.getDefaultAuthority)(S);let E=(0,VO.mapProxyName)(S,r);this.target=E.target,this.options=Object.assign({},this.options,E.extraOptions),this.subchannelPool=(0,BO.getSubchannelPool)(((o=r["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new Jh.MessageBufferTracker((a=r["grpc.retry_buffer_size"])!==null&&a!==void 0?a:YO,(c=r["grpc.per_rpc_retry_buffer_size"])!==null&&c!==void 0?c:JO),this.keepaliveTime=(l=r["grpc.keepalive_time_ms"])!==null&&l!==void 0?l:-1,this.idleTimeoutMs=Math.max((u=r["grpc.client_idle_timeout_ms"])!==null&&u!==void 0?u:QO,KO);let w={createSubchannel:(N,x)=>{let M=this.subchannelPool.getOrCreateSubchannel(this.target,N,Object.assign({},this.options,x),this.credentials);M.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",M.getChannelzRef());let b=new Xh(M,this);return this.wrappedSubchannels.add(b),b},updateState:(N,x)=>{this.currentPicker=x;let M=this.pickQueue.slice();this.pickQueue=[],M.length>0&&this.callRefTimerUnref();for(let b of M)b.doPick();this.updateState(N)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:N=>{this.channelzEnabled&&this.childrenTracker.refChild(N)},removeChannelzChild:N=>{this.channelzEnabled&&this.childrenTracker.unrefChild(N)}};this.resolvingLoadBalancer=new FO.ResolvingLoadBalancer(this.target,w,r,(N,x)=>{N.retryThrottling?pc.set(this.getTarget(),new Jh.RetryThrottler(N.retryThrottling.maxTokens,N.retryThrottling.tokenRatio,pc.get(this.getTarget()))):pc.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=x,this.currentResolutionError=null,process.nextTick(()=>{let M=this.configSelectionQueue;this.configSelectionQueue=[],M.length>0&&this.callRefTimerUnref();for(let b of M)b.getConfig()})},N=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+N.code+' and details "'+N.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,WO.restrictControlPlaneStatusCode)(N.code,N.details)),{metadata:N.metadata}));let x=this.configSelectionQueue;this.configSelectionQueue=[],x.length>0&&this.callRefTimerUnref();for(let M of x)M.reportResolverError(N)}),this.filterStackFactory=new UO.FilterStackFactory([new qO.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let C=new Error;(0,Qh.trace)(Us.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((p=C.stack)===null||p===void 0?void 0:p.substring(C.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,Qh.trace)(t??Us.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,fc.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,i;!((t=(e=this.callRefTimer).hasRef)===null||t===void 0)&&t.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(r=this.callRefTimer).ref)===null||i===void 0||i.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(t=(e=this.callRefTimer).unref)===null||t===void 0||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(r=>r===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,Qh.trace)(Us.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,fc.uriToString)(this.target)+" "+en.ConnectivityState[this.connectivityState]+" -> "+en.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+en.ConnectivityState[e]),this.connectivityState=e;let t=this.connectivityStateWatchers.slice();for(let r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==en.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let t of this.wrappedSubchannels)t.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(en.ConnectivityState.IDLE),this.currentPicker=new hT.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(r=(t=this.idleTimer).unref)===null||r===void 0||r.call(t)}maybeStartIdleTimer(){this.connectivityState!==en.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===Us.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,i,s){let o=(0,Yh.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+t+'"'),new zO.LoadBalancingCall(this,e,t,r,i,s,o)}createRetryingCall(e,t,r,i,s){let o=(0,Yh.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+t+'"'),new Jh.RetryingCall(this,e,t,r,i,s,o,this.retryBufferTracker,pc.get(this.getTarget()))}createInnerCall(e,t,r,i,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,t,r,i,s):this.createRetryingCall(e,t,r,i,s)}createResolvingCall(e,t,r,i,s){let o=(0,Yh.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,GO.deadlineToString)(t));let a={deadline:t,flags:s??Us.Propagate.DEFAULTS,host:r??this.defaultAuthority,parentCall:i},c=new jO.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),c.addStatusWatcher(l=>{this.onCallEnd(l)}),c}close(){this.resolvingLoadBalancer.destroy(),this.updateState(en.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,qs.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,fc.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===en.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(t!==1/0){let o=t instanceof Date?t:new Date(t),a=new Date;if(t===-1/0||o<=a){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===en.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,i,s)}};mc.InternalChannel=Zh});var nd=I(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.ChannelImplementation=void 0;var XO=Jo(),ZO=pT(),ef=class{constructor(e,t,r){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof XO.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new ZO.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,i,s)}};gc.ChannelImplementation=ef});var bT=I(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.Http2ServerCallStream=St.ServerDuplexStreamImpl=St.ServerWritableStreamImpl=St.ServerReadableStreamImpl=St.ServerUnaryCallImpl=void 0;var TT=require("events"),Ci=require("http2"),rf=require("stream"),mT=require("zlib"),ue=ie(),sf=Xe(),eN=wh(),ST=pe(),zs=Wo(),ET="server_call";function Vs(n){ST.trace(ue.LogVerbosity.DEBUG,ET,n)}var tN="grpc-accept-encoding",nN="grpc-encoding",gT="grpc-message",yT="grpc-status",vT="grpc-timeout",rN=/(\d{1,8})\s*([HMSmun])/,iN={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},sN={[tN]:"identity,deflate,gzip",[nN]:"identity"},_T={[Ci.constants.HTTP2_HEADER_STATUS]:Ci.constants.HTTP_STATUS_OK,[Ci.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},oN={waitForTrailers:!0},tf=class extends TT.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};St.ServerUnaryCallImpl=tf;var yc=class extends rf.Readable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};St.ServerReadableStreamImpl=yc;var Gs=class extends rf.Writable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new sf.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let i=this.call.serializeMessage(e);if(!this.call.write(i)){this.call.once("drain",r);return}}catch(i){this.emit("error",{details:(0,zs.getErrorMessage)(i),code:ue.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:ue.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};St.ServerWritableStreamImpl=Gs;var Ii=class extends rf.Duplex{constructor(e,t,r,i,s){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new sf.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};St.ServerDuplexStreamImpl=Ii;Ii.prototype._read=yc.prototype._read;Ii.prototype._write=Gs.prototype._write;Ii.prototype._final=Gs.prototype._final;var nf=class extends TT.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=ue.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ue.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",i=>{}),this.stream.once("close",()=>{var i;Vs("Request to method "+((i=this.handler)===null||i===void 0?void 0:i.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:ue.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if(t==="identity")return r;if(t==="deflate"||t==="gzip"){let i;return t==="deflate"?i=mT.createInflate():i=mT.createGunzip(),new Promise((s,o)=>{let a=0,c=[];i.on("data",l=>{c.push(l),a+=l.byteLength,this.maxReceiveMessageSize!==-1&&a>this.maxReceiveMessageSize&&(i.destroy(),o({code:ue.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),i.on("end",()=>{s(Buffer.concat(c))}),i.write(r),i.end()})}else return Promise.reject({code:ue.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},_T),sN),t);this.stream.respond(r,oN)}receiveMetadata(e){let t=sf.Metadata.fromHttp2Headers(e);ST.isTracerEnabled(ET)&&Vs("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(vT);if(r.length>0){let i=r[0].toString().match(rN);if(i===null){let a=new Error("Invalid deadline");return a.code=ue.Status.OUT_OF_RANGE,this.sendError(a),t}let s=+i[1]*iN[i[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(aN,s,this),t.remove(vT)}return t.remove(Ci.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(Ci.constants.HTTP2_HEADER_TE),t.remove(Ci.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:i}=this,s=0,o=this,a=[],c=this.maxReceiveMessageSize;this.stream.on("data",l),this.stream.on("end",u),this.stream.on("error",u);function l(p){if(s+=p.byteLength,c!==-1&&s>c){i.removeListener("data",l),i.removeListener("end",u),i.removeListener("error",u),r({code:ue.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${c})`});return}a.push(p)}function u(p){if(i.removeListener("data",l),i.removeListener("end",u),i.removeListener("error",u),p!==void 0){r({code:ue.Status.INTERNAL,details:p.message});return}if(s===0){r({code:ue.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let m=Buffer.concat(a,s),E=m.readUInt8(0)===1?e:"identity",w=o.getDecompressedMessage(m,E);if(Buffer.isBuffer(w)){t(o.deserializeMessageWithInternalError(w));return}w.then(C=>t(o.deserializeMessageWithInternalError(C)),C=>r(C.code?C:{code:ue.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(t){throw{details:(0,zs.getErrorMessage)(t),code:ue.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),t.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,i){if(!this.checkCancelled()){if(r===void 0&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let s=this.serializeMessage(t);this.write(s),this.sendStatus({code:ue.Status.OK,details:"OK",metadata:r})}catch(s){this.sendError({details:(0,zs.getErrorMessage)(s),code:ue.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===ue.Status.OK),!this.checkCancelled())if(Vs("Request to method "+((t=this.handler)===null||t===void 0?void 0:t.path)+" ended with status code: "+ue.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var i;let s=Object.assign({[yT]:e.code,[gT]:encodeURI(e.details)},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let i=Object.assign(Object.assign({[yT]:e.code,[gT]:encodeURI(e.details)},_T),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(i,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:ue.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&typeof e.details=="string"&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:ue.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new eN.StreamDecoder(this.maxReceiveMessageSize),i=!1,s=!1,o=!1,a=async()=>{!o&&i&&!s&&(o=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async c=>{let l;try{l=r.write(c)}catch(u){this.sendError({code:ue.Status.RESOURCE_EXHAUSTED,details:u.message});return}s=!0,this.stream.pause();for(let u of l){this.emit("receiveMessage");let m=u.readUInt8(0)===1?t:"identity",S;try{S=await this.getDecompressedMessage(u,m)}catch(E){this.sendError(E);return}if(!S)return;await this.pushOrBufferMessage(e,S)}s=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{i=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(t===null||r===!1){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(t===null){Vs("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}Vs("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let i=(0,zs.getErrorCode)(r);(i===null||i<ue.Status.OK||i>ue.Status.UNAUTHENTICATED)&&(i=ue.Status.INTERNAL),e.emit("error",{details:(0,zs.getErrorMessage)(r),code:i})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return t?.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};St.Http2ServerCallStream=nf;function aN(n){let e=new Error("Deadline exceeded");e.code=ue.Status.DEADLINE_EXCEEDED,n.sendError(e),n.cancelled=!0,n.emit("cancelled","deadline")}});var cf=I(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.ServerCredentials=void 0;var wT=Iu(),js=class{static createInsecure(){return new of}static createSsl(e,t,r=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if(typeof r!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let o=0;o<t.length;o++){let a=t[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);i.push(a.cert_chain),s.push(a.private_key)}return new af({ca:e||(0,wT.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:wT.CIPHER_SUITES})}};vc.ServerCredentials=js;var of=class extends js{_isSecure(){return!1}_getSettings(){return null}},af=class extends js{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var AT=I(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.Server=void 0;var nr=require("http2"),_n=ie(),br=bT(),cN=cf(),CT=qt(),_c=pe(),kt=zt(),lN=it(),tt=Sr(),Tc=~(1<<31),uN=~(1<<31),dN=2e4,{HTTP2_HEADER_PATH:IT}=nr.constants,hN="server";function fN(){}function lf(n){return{code:_n.Status.UNIMPLEMENTED,details:`The server does not implement the method ${n}`}}function pN(n,e){let t=lf(e);switch(n){case"unary":return(r,i)=>{i(t,null)};case"clientStream":return(r,i)=>{i(t,null)};case"serverStream":return r=>{r.emit("error",t)};case"bidi":return r=>{r.emit("error",t)};default:throw new Error(`Invalid handlerType ${n}`)}}var uf=class{constructor(e){var t,r,i,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new tt.ChannelzTrace,this.callTracker=new tt.ChannelzCallTracker,this.listenerChildrenTracker=new tt.ChannelzChildrenTracker,this.sessionChildrenTracker=new tt.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,tt.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(t=this.options["grpc.max_connection_age_ms"])!==null&&t!==void 0?t:Tc,this.maxConnectionAgeGraceMs=(r=this.options["grpc.max_connection_age_grace_ms"])!==null&&r!==void 0?r:Tc,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:uN,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:dN,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,kt.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,c=o.localAddress?(0,kt.stringToSubchannelAddress)(o.localAddress,o.localPort):null,l;if(e.encrypted){let p=o,m=p.getCipher(),S=p.getCertificate(),E=p.getPeerCertificate();l={cipherSuiteStandardName:(t=m.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:m.standardName?null:m.name,localCertificate:S&&"raw"in S?S.raw:null,remoteCertificate:E&&"raw"in E?E.raw:null}}else l=null;return{remoteAddress:a,localAddress:c,security:l,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(i=e.state.remoteWindowSize)!==null&&i!==void 0?i:null}}}trace(e){_c.trace(_n.LogVerbosity.DEBUG,hN,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(e===null||typeof e!="object"||t===null||typeof t!="object")throw new Error("addService() requires two objects as arguments");let r=Object.keys(e);if(r.length===0)throw new Error("Cannot add an empty service to a server");r.forEach(i=>{let s=e[i],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=t[i],c;if(a===void 0&&typeof s.originalName=="string"&&(a=t[s.originalName]),a!==void 0?c=a.bind(t):c=pN(o,i),this.register(s.path,c,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(r=>{let i=e[r];this.unregister(i.path)})}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(t===null||!(t instanceof cN.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof r!="function")throw new TypeError("callback must be a function");let i=(0,lN.parseUri)(e);if(i===null)throw new Error(`Could not parse port "${e}"`);let s=(0,CT.mapUriDefaultScheme)(i);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(S,E)=>{process.nextTick(()=>r(S,E))},c=()=>{let S;if(t._isSecure()){let E=Object.assign(o,t._getSettings());E.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,S=nr.createSecureServer(E),S.on("secureConnection",w=>{w.on("error",C=>{this.trace("An incoming TLS connection closed with error: "+C.message)})})}else S=nr.createServer(o);return S.setTimeout(0,fN),this._setupHandlers(S),S},l=(S,E,w)=>S.length===0?Promise.resolve({port:E,count:w}):Promise.all(S.map(C=>{this.trace("Attempting to bind "+(0,kt.subchannelAddressToString)(C));let N;(0,kt.isTcpSubchannelAddress)(C)?N={host:C.host,port:E}:N=C;let x=c();return new Promise((M,b)=>{let z=U=>{this.trace("Failed to bind "+(0,kt.subchannelAddressToString)(C)+" with error "+U.message),M(U)};x.once("error",z),x.listen(N,()=>{if(this.shutdown){x.close(),M(new Error("bindAsync failed because server is shutdown"));return}let U=x.address(),_;typeof U=="string"?_={path:U}:_={host:U.address,port:U.port};let g=(0,tt.registerChannelzSocket)((0,kt.subchannelAddressToString)(_),()=>({localAddress:_,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(g),this.http2ServerList.push({server:x,channelzRef:g}),this.trace("Successfully bound "+(0,kt.subchannelAddressToString)(_)),M("port"in _?_.port:E),x.removeListener("error",z)})})})).then(C=>{let N=0;for(let x of C)if(typeof x=="number"&&(N+=1,x!==E))throw new Error("Invalid state: multiple port numbers added from single address");return{port:E,count:N+w}}),u=S=>{if(S.length===0)return Promise.resolve({port:0,count:0});let E=S[0],w=c();return new Promise((C,N)=>{let x=M=>{this.trace("Failed to bind "+(0,kt.subchannelAddressToString)(E)+" with error "+M.message),C(u(S.slice(1)))};w.once("error",x),w.listen(E,()=>{if(this.shutdown){w.close(),C({port:0,count:0});return}let M=w.address(),b={host:M.address,port:M.port},z=(0,tt.registerChannelzSocket)((0,kt.subchannelAddressToString)(b),()=>({localAddress:b,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(z),this.http2ServerList.push({server:w,channelzRef:z}),this.trace("Successfully bound "+(0,kt.subchannelAddressToString)(b)),C(l(S.slice(1),M.port,1)),w.removeListener("error",x)})})},p={onSuccessfulResolution:(S,E,w)=>{if(p.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),S.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let C;(0,kt.isTcpSubchannelAddress)(S[0])?S[0].port===0?C=u(S):C=l(S,S[0].port,0):C=l(S,1,0),C.then(N=>{if(N.count===0){let x=`No address added out of total ${S.length} resolved`;_c.log(_n.LogVerbosity.ERROR,x),a(new Error(x),0)}else N.count<S.length&&_c.log(_n.LogVerbosity.INFO,`WARNING Only ${N.count} addresses added out of total ${S.length} resolved`),a(null,N.port)},N=>{let x=`No address added out of total ${S.length} resolved`;_c.log(_n.LogVerbosity.ERROR,x),a(new Error(x),0)})},onError:S=>{a(new Error(S.details),0)}};(0,CT.createResolver)(s,p,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,tt.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(nr.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,tt.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,i,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:t,serialize:r,deserialize:i,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=s=>{this.channelzEnabled&&(0,tt.unregisterChannelzRef)(this.channelzRef),e(s)},r=0;function i(){r--,r===0&&t()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(r++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,tt.unregisterChannelzRef)(o)),i()}));this.sessions.forEach((s,o)=>{o.closed||(r+=1,o.close(i))}),r===0&&t()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[nr.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof r!="string"||!r.startsWith("application/grpc")?(e.respond({[nr.constants.HTTP2_HEADER_STATUS]:nr.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return t===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let i=new br.Http2ServerCallStream(t,null,this.options);e.code===void 0&&(e.code=_n.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),r?.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed();return}let i=t[IT],s=this._retrieveHandler(i);if(!s){this._respondWithError(lf(i),e,r);return}let o=new br.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===_n.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",a=>{a?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,t)||(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed(),o.sendError({code:_n.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,t){if(this._verifyContentType(e,t)!==!0)return;let r=t[IT],i=this._retrieveHandler(r);if(!i){this._respondWithError(lf(r),e,null);return}let s=new br.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(s,i,t)||s.sendError({code:_n.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,t,r){var i;let s=e.receiveMetadata(r),o=(i=s.get("grpc-encoding")[0])!==null&&i!==void 0?i:"identity";s.remove("grpc-encoding");let{type:a}=t;if(a==="unary")mN(e,t,s,o);else if(a==="clientStream")gN(e,t,s,o);else if(a==="serverStream")yN(e,t,s,o);else if(a==="bidi")vN(e,t,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let t=e.address(),r="null";t&&(typeof t=="string"?r=t:r=t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",s=>{var o,a,c,l,u;if(!this.started){s.destroy();return}let p=(0,tt.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),m={ref:p,streamTracker:new tt.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,m);let S=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+S),this.sessionChildrenTracker.refChild(p));let E=null,w=null,C=!1;if(this.maxConnectionAgeMs!==Tc){let x=this.maxConnectionAgeMs/10,M=Math.random()*x*2-x;E=(c=(a=setTimeout(()=>{var b,z;C=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+S);try{s.goaway(nr.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==Tc&&(w=(z=(b=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||z===void 0?void 0:z.call(b))},this.maxConnectionAgeMs+M)).unref)===null||c===void 0?void 0:c.call(a)}let N=(u=(l=setInterval(()=>{var x,M;let b=(M=(x=setTimeout(()=>{C=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+S),s.close()},this.keepaliveTimeoutMs)).unref)===null||M===void 0?void 0:M.call(x);try{s.ping((z,U,_)=>{clearTimeout(b)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||u===void 0?void 0:u.call(l);s.on("close",()=>{this.channelzEnabled&&(C||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+S),this.sessionChildrenTracker.unrefChild(p),(0,tt.unregisterChannelzRef)(p)),E&&clearTimeout(E),w&&clearTimeout(w),N&&clearTimeout(N),this.sessions.delete(s)})})}};Sc.Server=uf;async function mN(n,e,t,r){try{let i=await n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new br.ServerUnaryCallImpl(n,t,i);e.func(s,(o,a,c,l)=>{n.sendUnaryMessage(o,a,c,l)})}catch(i){n.sendError(i)}}function gN(n,e,t,r){let i=new br.ServerReadableStreamImpl(n,t,e.deserialize,r);function s(o,a,c,l){i.destroy(),n.sendUnaryMessage(o,a,c,l)}n.cancelled||(i.on("error",s),e.func(i,s))}async function yN(n,e,t,r){try{let i=await n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new br.ServerWritableStreamImpl(n,t,e.serialize,i);e.func(s)}catch(i){n.sendError(i)}}function vN(n,e,t,r){let i=new br.ServerDuplexStreamImpl(n,t,e.serialize,e.deserialize,r);n.cancelled||e.func(i)}});var RT=I(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.StatusBuilder=void 0;var df=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};Ec.StatusBuilder=df});var hf=I(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.isDuration=rr.durationToMs=rr.msToDuration=void 0;function _N(n){return{seconds:n/1e3|0,nanos:n%1e3*1e6|0}}rr.msToDuration=_N;function TN(n){return n.seconds*1e3+n.nanos/1e6|0}rr.durationToMs=TN;function SN(n){return typeof n.seconds=="number"&&typeof n.nanos=="number"}rr.isDuration=SN});var Tf=I(ir=>{"use strict";var ff;Object.defineProperty(ir,"__esModule",{value:!0});ir.setup=ir.OutlierDetectionLoadBalancer=ir.OutlierDetectionLoadBalancingConfig=void 0;var wc=pt(),OT=ie(),wr=hf(),NT=Sf(),kT=xn(),EN=ia(),bN=Bn(),DT=zt(),wN=hc(),CN=pe(),IN="outlier_detection";function De(n){CN.trace(OT.LogVerbosity.DEBUG,IN,n)}var _f="outlier_detection",AN=((ff=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&ff!==void 0?ff:"true")==="true",RN={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},DN={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function Ai(n,e,t,r){if(e in n&&typeof n[e]!==t){let i=r?`${r}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${t}, got ${typeof n[e]}`)}}function pf(n,e,t){let r=t?`${t}.${e}`:e;if(e in n){if(!(0,wr.isDuration)(n[e]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof n[e]}`);if(!(n[e].seconds>=0&&n[e].seconds<=315576e6&&n[e].nanos>=0&&n[e].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function bc(n,e,t){let r=t?`${t}.${e}`:e;if(Ai(n,e,"number",t),e in n&&!(n[e]>=0&&n[e]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}var Ws=class n{constructor(e,t,r,i,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=t??3e4,this.maxEjectionTimeMs=r??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},RN),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},DN),o):null}getLoadBalancerName(){return _f}toJsonObject(){return{interval:(0,wr.msToDuration)(this.intervalMs),base_ejection_time:(0,wr.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,wr.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new n(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(pf(e,"interval"),pf(e,"base_ejection_time"),pf(e,"max_ejection_time"),bc(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");Ai(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),bc(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),Ai(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),Ai(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");bc(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),bc(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),Ai(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),Ai(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new n(e.interval?(0,wr.durationToMs)(e.interval):null,e.base_ejection_time?(0,wr.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,wr.durationToMs)(e.max_ejection_time):null,(t=e.max_ejection_percent)!==null&&t!==void 0?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(kT.validateLoadBalancingConfig))}};ir.OutlierDetectionLoadBalancingConfig=Ws;var gf=class extends wN.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((r,i,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,i,s,o)})}getConnectivityState(){return this.ejected?wc.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,wc.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,wc.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function mf(){return{success:0,failure:0}}var yf=class{constructor(){this.activeBucket=mf(),this.inactiveBucket=mf()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=mf()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},vf=class{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType===bN.PickResultType.COMPLETE){let r=t.subchannel,i=r.getMapEntry();if(i){let s=t.onCallEnded;return this.countCalls&&(s=o=>{var a;o===OT.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(a=t.onCallEnded)===null||a===void 0||a.call(t,o)}),Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel()})}else return t}},Cc=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new EN.ChildLoadBalancerHandler((0,NT.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let i=e.createSubchannel(t,r),s=this.addressMap.get((0,DT.subchannelAddressToString)(t)),o=new gf(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(t,r)=>{t===wc.ConnectivityState.READY?e.updateState(t,new vf(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())t.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;De("Running success rate check");let r=t.request_volume,i=0,s=[];for(let[p,m]of this.addressMap){let S=m.counter.getLastSuccesses(),E=m.counter.getLastFailures();De("Stats for "+p+": successes="+S+" failures="+E+" targetRequestVolume="+r),S+E>=r&&(i+=1,s.push(S/(S+E)))}if(De("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<t.minimum_hosts)return;let o=s.reduce((p,m)=>p+m)/s.length,a=0;for(let p of s){let m=p-o;a+=m*m}let c=a/s.length,l=Math.sqrt(c),u=o-l*(t.stdev_factor/1e3);De("stdev="+l+" ejectionThreshold="+u);for(let[p,m]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let S=m.counter.getLastSuccesses(),E=m.counter.getLastFailures();if(S+E<r)continue;let w=S/(S+E);if(De("Checking candidate "+p+" successRate="+w),w<u){let C=Math.random()*100;De("Candidate "+p+" randomNumber="+C+" enforcement_percentage="+t.enforcement_percentage),C<t.enforcement_percentage&&(De("Ejecting candidate "+p),this.eject(m,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;De("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let i of this.addressMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=t.request_volume&&(r+=1)}if(!(r<t.minimum_hosts))for(let[i,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(De("Candidate successes="+o+" failures="+a),o+a<t.request_volume)continue;if(a*100/(a+o)>t.threshold){let l=Math.random()*100;De("Candidate "+i+" randomNumber="+l+" enforcement_percentage="+t.enforcement_percentage),l<t.enforcement_percentage&&(De("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let r of e.subchannelWrappers)r.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(r=(t=this.ejectionTimer).unref)===null||r===void 0||r.call(t)}runChecks(){let e=new Date;if(De("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[t,r]of this.addressMap.entries())if(r.currentEjectionTimestamp===null)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(r.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*r.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(De("Unejecting "+t),this.uneject(r))}}}updateAddressList(e,t,r){if(!(t instanceof Ws))return;let i=new Set;for(let o of e)i.add((0,DT.subchannelAddressToString)(o));for(let o of i)this.addressMap.has(o)||(De("Adding map entry for "+o),this.addressMap.set(o,{counter:new yf,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())i.has(o)||(De("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,kT.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){De("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else De("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{De("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return _f}};ir.OutlierDetectionLoadBalancer=Cc;function ON(){AN&&(0,NT.registerLoadBalancerType)(_f,Cc,Ws)}ir.setup=ON});var Sf=I(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.OutlierDetectionLoadBalancingConfig=j.BaseSubchannelWrapper=j.registerAdminService=j.FilterStackFactory=j.BaseFilter=j.PickResultType=j.QueuePicker=j.UnavailablePicker=j.ChildLoadBalancerHandler=j.subchannelAddressToString=j.validateLoadBalancingConfig=j.getFirstUsableConfig=j.registerLoadBalancerType=j.createChildChannelControlHelper=j.BackoffTimeout=j.durationToMs=j.uriToString=j.createResolver=j.registerResolver=j.log=j.trace=void 0;var PT=pe();Object.defineProperty(j,"trace",{enumerable:!0,get:function(){return PT.trace}});Object.defineProperty(j,"log",{enumerable:!0,get:function(){return PT.log}});var xT=qt();Object.defineProperty(j,"registerResolver",{enumerable:!0,get:function(){return xT.registerResolver}});Object.defineProperty(j,"createResolver",{enumerable:!0,get:function(){return xT.createResolver}});var NN=it();Object.defineProperty(j,"uriToString",{enumerable:!0,get:function(){return NN.uriToString}});var kN=hf();Object.defineProperty(j,"durationToMs",{enumerable:!0,get:function(){return kN.durationToMs}});var PN=us();Object.defineProperty(j,"BackoffTimeout",{enumerable:!0,get:function(){return PN.BackoffTimeout}});var Ic=xn();Object.defineProperty(j,"createChildChannelControlHelper",{enumerable:!0,get:function(){return Ic.createChildChannelControlHelper}});Object.defineProperty(j,"registerLoadBalancerType",{enumerable:!0,get:function(){return Ic.registerLoadBalancerType}});Object.defineProperty(j,"getFirstUsableConfig",{enumerable:!0,get:function(){return Ic.getFirstUsableConfig}});Object.defineProperty(j,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return Ic.validateLoadBalancingConfig}});var xN=zt();Object.defineProperty(j,"subchannelAddressToString",{enumerable:!0,get:function(){return xN.subchannelAddressToString}});var MN=ia();Object.defineProperty(j,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return MN.ChildLoadBalancerHandler}});var Ef=Bn();Object.defineProperty(j,"UnavailablePicker",{enumerable:!0,get:function(){return Ef.UnavailablePicker}});Object.defineProperty(j,"QueuePicker",{enumerable:!0,get:function(){return Ef.QueuePicker}});Object.defineProperty(j,"PickResultType",{enumerable:!0,get:function(){return Ef.PickResultType}});var LN=Lh();Object.defineProperty(j,"BaseFilter",{enumerable:!0,get:function(){return LN.BaseFilter}});var FN=Ph();Object.defineProperty(j,"FilterStackFactory",{enumerable:!0,get:function(){return FN.FilterStackFactory}});var BN=oa();Object.defineProperty(j,"registerAdminService",{enumerable:!0,get:function(){return BN.registerAdminService}});var UN=hc();Object.defineProperty(j,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return UN.BaseSubchannelWrapper}});var qN=Tf();Object.defineProperty(j,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return qN.OutlierDetectionLoadBalancingConfig}})});var MT=I(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.setup=void 0;var VN=qt(),bf=class{constructor(e,t,r){this.listener=t,this.addresses=[],this.hasReturnedResult=!1;let i;e.authority===""?i="/"+e.path:i=e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function zN(){(0,VN.registerResolver)("unix",bf)}Ac.setup=zN});var qT=I(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.setup=void 0;var LT=require("net"),Rc=ie(),wf=Xe(),FT=qt(),BT=it(),GN=pe(),jN="ip_resolver";function UT(n){GN.trace(Rc.LogVerbosity.DEBUG,jN,n)}var Cf="ipv4",If="ipv6",WN=443,Dc=class{constructor(e,t,r){var i;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,UT("Resolver constructed for target "+(0,BT.uriToString)(e));let s=[];if(!(e.scheme===Cf||e.scheme===If)){this.error={code:Rc.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new wf.Metadata};return}let o=e.path.split(",");for(let a of o){let c=(0,BT.splitHostPort)(a);if(c===null){this.error={code:Rc.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new wf.Metadata};return}if(e.scheme===Cf&&!(0,LT.isIPv4)(c.host)||e.scheme===If&&!(0,LT.isIPv6)(c.host)){this.error={code:Rc.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new wf.Metadata};return}s.push({host:c.host,port:(i=c.port)!==null&&i!==void 0?i:WN})}this.addresses=s,UT("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function HN(){(0,FT.registerResolver)(Cf,Dc),(0,FT.registerResolver)(If,Dc)}Oc.setup=HN});var GT=I(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.setup=tn.PickFirstLoadBalancer=tn.shuffled=tn.PickFirstLoadBalancingConfig=void 0;var VT=xn(),qe=pt(),Nc=Bn(),$N=pe(),KN=ie(),QN="pick_first";function Af(n){$N.trace(KN.LogVerbosity.DEBUG,QN,n)}var Hs="pick_first",YN=250,$s=class n{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return Hs}toJsonObject(){return{[Hs]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new n(e.shuffleAddressList===!0)}};tn.PickFirstLoadBalancingConfig=$s;var Rf=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:Nc.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function zT(n){let e=n.slice();for(let t=e.length-1;t>1;t--){let r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}tn.shuffled=zT;var kc=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=qe.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.onSubchannelStateUpdate(t,r,i,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(qe.ConnectivityState.READY,new Rf(this.currentPick)):this.children.length===0?this.updateState(qe.ConnectivityState.IDLE,new Nc.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(qe.ConnectivityState.TRANSIENT_FAILURE,new Nc.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(qe.ConnectivityState.CONNECTING,new Nc.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){r!==qe.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){r===qe.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),r===qe.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let i=r.subchannel.getConnectivityState();if(i===qe.ConnectivityState.IDLE||i===qe.ConnectivityState.CONNECTING){this.startConnecting(t);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===qe.ConnectivityState.IDLE&&(Af("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},YN)).unref)===null||r===void 0?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(Af("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){Af(qe.ConnectivityState[this.currentState]+" -> "+qe.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(r=>({subchannel:this.channelControlHelper.createSubchannel(r,{}),hasReportedTransientFailure:!1}));for(let{subchannel:r}of t)r.ref(),this.channelControlHelper.addChannelzChild(r.getChannelzRef());this.resetSubchannelList(),this.children=t;for(let{subchannel:r}of this.children)if(r.addConnectivityStateListener(this.subchannelStateListener),r.getConnectivityState()===qe.ConnectivityState.READY){this.pickSubchannel(r);return}for(let r of this.children)r.subchannel.getConnectivityState()===qe.ConnectivityState.TRANSIENT_FAILURE&&(r.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof $s&&(t.getShuffleAddressList()&&(e=zT(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===qe.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return Hs}};tn.PickFirstLoadBalancer=kc;function JN(){(0,VT.registerLoadBalancerType)(Hs,kc,$s),(0,VT.registerDefaultLoadBalancerType)(Hs)}tn.setup=JN});var WT=I(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.setup=Ri.RoundRobinLoadBalancer=void 0;var XN=xn(),Ve=pt(),Pc=Bn(),ZN=zt(),ek=pe(),tk=ie(),nk="round_robin";function jT(n){ek.trace(tk.LogVerbosity.DEBUG,nk,n)}var xc="round_robin",Df=class n{getLoadBalancerName(){return xc}constructor(){}toJsonObject(){return{[xc]:{}}}static createFromJson(e){return new n}},Of=class{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:Pc.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Mc=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=Ve.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.calculateAndUpdateState(),(i===Ve.ConnectivityState.TRANSIENT_FAILURE||i===Ve.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),t.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Ve.ConnectivityState.READY)>0){let e=this.subchannels.filter(r=>r.getConnectivityState()===Ve.ConnectivityState.READY),t=0;this.currentReadyPicker!==null&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),t<0&&(t=0)),this.updateState(Ve.ConnectivityState.READY,new Of(e,t))}else this.countSubchannelsWithState(Ve.ConnectivityState.CONNECTING)>0?this.updateState(Ve.ConnectivityState.CONNECTING,new Pc.QueuePicker(this)):this.countSubchannelsWithState(Ve.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Ve.ConnectivityState.TRANSIENT_FAILURE,new Pc.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Ve.ConnectivityState.IDLE,new Pc.QueuePicker(this))}updateState(e,t){jT(Ve.ConnectivityState[this.currentState]+" -> "+Ve.ConnectivityState[e]),e===Ve.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList(),jT("Connect to address list "+e.map(r=>(0,ZN.subchannelAddressToString)(r))),this.subchannels=e.map(r=>this.channelControlHelper.createSubchannel(r,{}));for(let r of this.subchannels){r.ref(),r.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(r.getChannelzRef());let i=r.getConnectivityState();(i===Ve.ConnectivityState.IDLE||i===Ve.ConnectivityState.TRANSIENT_FAILURE)&&r.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return xc}};Ri.RoundRobinLoadBalancer=Mc;function rk(){(0,XN.registerLoadBalancerType)(xc,Mc,Df)}Ri.setup=rk});var QT=I(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.experimental=L.addAdminServicesToServer=L.getChannelzHandlers=L.getChannelzServiceDefinition=L.InterceptorConfigurationError=L.InterceptingCall=L.RequesterBuilder=L.ListenerBuilder=L.StatusBuilder=L.getClientChannel=L.ServerCredentials=L.Server=L.setLogVerbosity=L.setLogger=L.load=L.loadObject=L.CallCredentials=L.ChannelCredentials=L.waitForClientReady=L.closeClient=L.Channel=L.makeGenericClientConstructor=L.makeClientConstructor=L.loadPackageDefinition=L.Client=L.compressionAlgorithms=L.propagate=L.connectivityState=L.status=L.logVerbosity=L.Metadata=L.credentials=void 0;var Lc=wu();Object.defineProperty(L,"CallCredentials",{enumerable:!0,get:function(){return Lc.CallCredentials}});var ik=nd();Object.defineProperty(L,"Channel",{enumerable:!0,get:function(){return ik.ChannelImplementation}});var sk=xh();Object.defineProperty(L,"compressionAlgorithms",{enumerable:!0,get:function(){return sk.CompressionAlgorithms}});var ok=pt();Object.defineProperty(L,"connectivityState",{enumerable:!0,get:function(){return ok.ConnectivityState}});var Fc=Jo();Object.defineProperty(L,"ChannelCredentials",{enumerable:!0,get:function(){return Fc.ChannelCredentials}});var HT=td();Object.defineProperty(L,"Client",{enumerable:!0,get:function(){return HT.Client}});var Nf=ie();Object.defineProperty(L,"logVerbosity",{enumerable:!0,get:function(){return Nf.LogVerbosity}});Object.defineProperty(L,"status",{enumerable:!0,get:function(){return Nf.Status}});Object.defineProperty(L,"propagate",{enumerable:!0,get:function(){return Nf.Propagate}});var $T=pe(),kf=id();Object.defineProperty(L,"loadPackageDefinition",{enumerable:!0,get:function(){return kf.loadPackageDefinition}});Object.defineProperty(L,"makeClientConstructor",{enumerable:!0,get:function(){return kf.makeClientConstructor}});Object.defineProperty(L,"makeGenericClientConstructor",{enumerable:!0,get:function(){return kf.makeClientConstructor}});var ak=Xe();Object.defineProperty(L,"Metadata",{enumerable:!0,get:function(){return ak.Metadata}});var ck=AT();Object.defineProperty(L,"Server",{enumerable:!0,get:function(){return ck.Server}});var lk=cf();Object.defineProperty(L,"ServerCredentials",{enumerable:!0,get:function(){return lk.ServerCredentials}});var uk=RT();Object.defineProperty(L,"StatusBuilder",{enumerable:!0,get:function(){return uk.StatusBuilder}});L.credentials={combineChannelCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),combineCallCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),createInsecure:Fc.ChannelCredentials.createInsecure,createSsl:Fc.ChannelCredentials.createSsl,createFromSecureContext:Fc.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Lc.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Lc.CallCredentials.createFromGoogleCredential,createEmpty:Lc.CallCredentials.createEmpty};var dk=n=>n.close();L.closeClient=dk;var hk=(n,e,t)=>n.waitForReady(e,t);L.waitForClientReady=hk;var fk=(n,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};L.loadObject=fk;var pk=(n,e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};L.load=pk;var mk=n=>{$T.setLogger(n)};L.setLogger=mk;var gk=n=>{$T.setLoggerVerbosity(n)};L.setLogVerbosity=gk;var yk=n=>HT.Client.prototype.getChannel.call(n);L.getClientChannel=yk;var Bc=Xu();Object.defineProperty(L,"ListenerBuilder",{enumerable:!0,get:function(){return Bc.ListenerBuilder}});Object.defineProperty(L,"RequesterBuilder",{enumerable:!0,get:function(){return Bc.RequesterBuilder}});Object.defineProperty(L,"InterceptingCall",{enumerable:!0,get:function(){return Bc.InterceptingCall}});Object.defineProperty(L,"InterceptorConfigurationError",{enumerable:!0,get:function(){return Bc.InterceptorConfigurationError}});var KT=Sr();Object.defineProperty(L,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return KT.getChannelzServiceDefinition}});Object.defineProperty(L,"getChannelzHandlers",{enumerable:!0,get:function(){return KT.getChannelzHandlers}});var vk=oa();Object.defineProperty(L,"addAdminServicesToServer",{enumerable:!0,get:function(){return vk.addAdminServicesToServer}});var _k=Sf();L.experimental=_k;var Tk=Sh(),Sk=MT(),Ek=qT(),bk=GT(),wk=WT(),Ck=Tf(),Ik=Sr();Tk.setup(),Sk.setup(),Ek.setup(),bk.setup(),wk.setup(),Ck.setup(),Ik.setup()});var wL={};sb(wL,{activate:()=>_L,deactivate:()=>TL});module.exports=ob(wL);var Me=Br(require("vscode")),KE=Br(require("fs")),mo=Br(require("path"));var Am=()=>{};var ab={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Om=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cb=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,S=l&63;c||(S=64,o||(m=64)),r.push(t[u],t[p],t[m],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Om(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Cl;let m=s<<2|a>>4;if(r.push(m),l!==64){let S=a<<4&240|l>>2;if(r.push(S),p!==64){let E=l<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Cl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lb=function(n){let e=Om(n);return Nm.encodeByteArray(e,!0)},$i=function(n){return lb(n).replace(/\./g,"")},_o=function(n){try{return Nm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function km(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ub=()=>km().__FIREBASE_DEFAULTS__,db=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&_o(n[1]);return e&&JSON.parse(e)},Al=()=>{try{return Am()||ub()||db()||hb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Rl=n=>{var e,t;return(t=(e=Al())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Pm=n=>{let e=Rl(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Dl=()=>{var n;return(n=Al())===null||n===void 0?void 0:n.config};var vo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ur(n){return n.endsWith(".cloudworkstations.dev")}async function To(n){return(await fetch(n,{credentials:"include"})).ok}function xm(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$i(JSON.stringify(t)),$i(JSON.stringify(o)),""].join(".")}var Hi={};function fb(){let n={prod:[],emulator:[]};for(let e of Object.keys(Hi))Hi[e]?n.emulator.push(e):n.prod.push(e);return n}function pb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Rm=!1;function Ki(n,e){if(typeof window>"u"||typeof document>"u"||!Ur(window.location.host)||Hi[n]===e||Hi[n]||Rm)return;Hi[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=fb().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,S){m.setAttribute("width","24"),m.setAttribute("id",S),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Rm=!0,o()},m}function u(m,S){m.setAttribute("id",S),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=pb(r),S=t("text"),E=document.getElementById(S)||document.createElement("span"),w=t("learnmore"),C=document.getElementById(w)||document.createElement("a"),N=t("preprendIcon"),x=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let M=m.element;a(M),u(C,w);let b=l();c(x,N),M.append(x,E,C,b),document.body.appendChild(M)}s?(E.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function mb(){var n;let e=(n=Al())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lm(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Fm(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Bm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Um(){return!mb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function qm(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var gb="FirebaseError",dt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gb,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}},ln=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dt(i,a,r)}};function yb(n,e){return n.replace(vb,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var vb=/\{\$([^}]+)}/g;function xt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Dm(s)&&Dm(o)){if(!xt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Dm(n){return n!==null&&typeof n=="object"}function So(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Vr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Vm(n,e){let t=new Il(n,e);return t.subscribe.bind(t)}var Il=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_b(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wl),i.error===void 0&&(i.error=wl),i.complete===void 0&&(i.complete=wl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _b(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wl(){}var DL=4*60*60*1e3;function Mt(n){return n&&n._delegate?n._delegate:n}ab.NODE_CLIENT=!0;var ht=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var lr="[DEFAULT]";var Nl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new vo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sb(e))try{this.getOrInitializeService({instanceIdentifier:lr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lr){return this.instances.has(e)}getOptions(e=lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lr){return this.component?this.component.multipleInstances?e:lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tb(n){return n===lr?void 0:n}function Sb(n){return n.instantiationMode==="EAGER"}var Eo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Nl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Eb=[],$;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($||($={}));var bb={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},wb=$.INFO,Cb={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},Ib=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Cb[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},An=class{constructor(e){this.name=e,this._logLevel=wb,this._logHandler=Ib,this._userLogHandler=null,Eb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...e),this._logHandler(this,$.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...e),this._logHandler(this,$.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$.INFO,...e),this._logHandler(this,$.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$.WARN,...e),this._logHandler(this,$.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...e),this._logHandler(this,$.ERROR,...e)}};var Ab=(n,e)=>e.some(t=>n instanceof t),zm,Gm;function Rb(){return zm||(zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Db(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jm=new WeakMap,Pl=new WeakMap,Wm=new WeakMap,kl=new WeakMap,Ml=new WeakMap;function Ob(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Lt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jm.set(t,n)}).catch(()=>{}),Ml.set(e,n),e}function Nb(n){if(Pl.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Pl.set(n,e)}var xl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Pl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Wm.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Hm(n){xl=n(xl)}function kb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(bo(this),e,...t);return Wm.set(r,e.sort?e.sort():[e]),Lt(r)}:Db().includes(n)?function(...e){return n.apply(bo(this),e),Lt(jm.get(this))}:function(...e){return Lt(n.apply(bo(this),e))}}function Pb(n){return typeof n=="function"?kb(n):(n instanceof IDBTransaction&&Nb(n),Ab(n,Rb())?new Proxy(n,xl):n)}function Lt(n){if(n instanceof IDBRequest)return Ob(n);if(kl.has(n))return kl.get(n);let e=Pb(n);return e!==n&&(kl.set(n,e),Ml.set(e,n)),e}var bo=n=>Ml.get(n);function Km(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Lt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Lt(o.result),c.oldVersion,c.newVersion,Lt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var xb=["get","getKey","getAll","getAllKeys","count"],Mb=["put","add","delete","clear"],Ll=new Map;function $m(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ll.get(e))return Ll.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Mb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xb.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return Ll.set(e,s),s}Hm(n=>({...n,get:(e,t,r)=>$m(e,t)||n.get(e,t,r),has:(e,t)=>!!$m(e,t)||n.has(e,t)}));var Bl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lb(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Lb(n){let e=n.getComponent();return e?.type==="VERSION"}var Ul="@firebase/app",Qm="0.12.3";var un=new An("@firebase/app"),Fb="@firebase/app-compat",Bb="@firebase/analytics-compat",Ub="@firebase/analytics",qb="@firebase/app-check-compat",Vb="@firebase/app-check",zb="@firebase/auth",Gb="@firebase/auth-compat",jb="@firebase/database",Wb="@firebase/data-connect",Hb="@firebase/database-compat",$b="@firebase/functions",Kb="@firebase/functions-compat",Qb="@firebase/installations",Yb="@firebase/installations-compat",Jb="@firebase/messaging",Xb="@firebase/messaging-compat",Zb="@firebase/performance",ew="@firebase/performance-compat",tw="@firebase/remote-config",nw="@firebase/remote-config-compat",rw="@firebase/storage",iw="@firebase/storage-compat",sw="@firebase/firestore",ow="@firebase/vertexai",aw="@firebase/firestore-compat",cw="firebase",lw="11.7.3";var ql="[DEFAULT]",uw={[Ul]:"fire-core",[Fb]:"fire-core-compat",[Ub]:"fire-analytics",[Bb]:"fire-analytics-compat",[Vb]:"fire-app-check",[qb]:"fire-app-check-compat",[zb]:"fire-auth",[Gb]:"fire-auth-compat",[jb]:"fire-rtdb",[Wb]:"fire-data-connect",[Hb]:"fire-rtdb-compat",[$b]:"fire-fn",[Kb]:"fire-fn-compat",[Qb]:"fire-iid",[Yb]:"fire-iid-compat",[Jb]:"fire-fcm",[Xb]:"fire-fcm-compat",[Zb]:"fire-perf",[ew]:"fire-perf-compat",[tw]:"fire-rc",[nw]:"fire-rc-compat",[rw]:"fire-gcs",[iw]:"fire-gcs-compat",[sw]:"fire-fst",[aw]:"fire-fst-compat",[ow]:"fire-vertex","fire-js":"fire-js",[cw]:"fire-js-all"};var wo=new Map,dw=new Map,Vl=new Map;function Ym(n,e){try{n.container.addComponent(e)}catch(t){un.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dn(n){let e=n.name;if(Vl.has(e))return un.debug(`There were multiple attempts to register component ${e}.`),!1;Vl.set(e,n);for(let t of wo.values())Ym(t,n);for(let t of dw.values())Ym(t,n);return!0}function Yi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ft(n){return n==null?!1:n.settings!==void 0}var hw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rn=new ln("app","Firebase",hw);var zl=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}};var zr=lw;function Wl(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ql,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rn.create("bad-app-name",{appName:String(i)});if(t||(t=Dl()),!t)throw Rn.create("no-options");let s=wo.get(i);if(s){if(xt(t,s.options)&&xt(r,s.config))return s;throw Rn.create("duplicate-app",{appName:i})}let o=new Eo(i);for(let c of Vl.values())o.addComponent(c);let a=new zl(t,r,o);return wo.set(i,a),a}function Co(n=ql){let e=wo.get(n);if(!e&&n===ql&&Dl())return Wl();if(!e)throw Rn.create("no-app",{appName:n});return e}function bt(n,e,t){var r;let i=(r=uw[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),un.warn(a.join(" "));return}Dn(new ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fw="firebase-heartbeat-database",pw=1,Qi="firebase-heartbeat-store",Fl=null;function eg(){return Fl||(Fl=Km(fw,pw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qi)}catch(t){console.warn(t)}}}}).catch(n=>{throw Rn.create("idb-open",{originalErrorMessage:n.message})})),Fl}async function mw(n){try{let t=(await eg()).transaction(Qi),r=await t.objectStore(Qi).get(tg(n));return await t.done,r}catch(e){if(e instanceof dt)un.warn(e.message);else{let t=Rn.create("idb-get",{originalErrorMessage:e?.message});un.warn(t.message)}}}async function Jm(n,e){try{let r=(await eg()).transaction(Qi,"readwrite");await r.objectStore(Qi).put(e,tg(n)),await r.done}catch(t){if(t instanceof dt)un.warn(t.message);else{let r=Rn.create("idb-set",{originalErrorMessage:t?.message});un.warn(r.message)}}}function tg(n){return`${n.name}!${n.options.appId}`}var gw=1024,yw=30,Gl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jl(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>yw){let o=_w(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Xm(),{heartbeatsToSend:r,unsentEntries:i}=vw(this._heartbeatsCache.heartbeats),s=$i(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return un.warn(t),""}}};function Xm(){return new Date().toISOString().substring(0,10)}function vw(n,e=gw){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Zm(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Zm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var jl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ol()?qm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await mw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Zm(n){return $i(JSON.stringify({version:2,heartbeats:n})).length}function _w(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Tw(n){Dn(new ht("platform-logger",e=>new Bl(e),"PRIVATE")),Dn(new ht("heartbeat",e=>new Gl(e),"PRIVATE")),bt(Ul,Qm,n),bt(Ul,Qm,"esm2017"),bt("fire-js","")}Tw("");function Io(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fg=hg,pg=new ln("auth","Firebase",hg());var Oo=new An("@firebase/auth");function Sw(n,...e){Oo.logLevel<=$.WARN&&Oo.warn(`Auth (${zr}): ${n}`,...e)}function Do(n,...e){Oo.logLevel<=$.ERROR&&Oo.error(`Auth (${zr}): ${n}`,...e)}function dr(n,...e){throw uu(n,...e)}function lu(n,...e){return uu(n,...e)}function mg(n,e,t){let r=Object.assign(Object.assign({},fg()),{[e]:t});return new ln("auth","Firebase",r).create(e,{appName:n.name})}function Xi(n){return mg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pg.create(n,...e)}function H(n,e,...t){if(!n)throw uu(e,...t)}function Bt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Do(e),new Error(e)}function No(n,e){n||Bt(e)}function Ew(){return ng()==="http:"||ng()==="https:"}function ng(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function bw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ew()||Fm()||"connection"in navigator)?navigator.onLine:!0}function ww(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ql=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,No(t>e,"Short delay should be less than long delay!"),this.isMobile=Mm()||Bm()}get(){return bw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Cw(n,e){No(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ts=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Iw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Aw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rw=new Ql(3e4,6e4);function wt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ut(n,e,t,r,i={}){return gg(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=So(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return Lm()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Ur(n.emulatorConfig.host)&&(l.credentials="include"),ts.fetch()(await yg(n,n.config.apiHost,t,a),l)})}async function gg(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Iw),e);try{let i=new Yl(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Ao(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ao(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ao(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ao(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mg(n,u,l);dr(n,u)}}catch(i){if(i instanceof dt)throw i;dr(n,"network-request-failed",{message:String(i)})}}async function ls(n,e,t,r,i={}){let s=await Ut(n,e,t,r,i);return"mfaPendingCredential"in s&&dr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function yg(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Cw(n.config,i):`${n.config.apiScheme}://${i}`;return Aw.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Dw(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Yl=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lu(this.auth,"network-request-failed")),Rw.get())})}};function Ao(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=lu(n,e,r);return i.customData._tokenResponse=t,i}function rg(n){return n!==void 0&&n.enterprise!==void 0}var Jl=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Dw(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Ow(n,e){return Ut(n,"GET","/v2/recaptchaConfig",wt(n,e))}async function Nw(n,e){return Ut(n,"POST","/v1/accounts:delete",e)}async function ko(n,e){return Ut(n,"POST","/v1/accounts:lookup",e)}function Zi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vg(n,e=!1){let t=Mt(n),r=await t.getIdToken(e),i=_g(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zi(Hl(i.auth_time)),issuedAtTime:Zi(Hl(i.iat)),expirationTime:Zi(Hl(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Hl(n){return Number(n)*1e3}function _g(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Do("JWT malformed, contained fewer than 3 sections"),null;try{let i=_o(t);return i?JSON.parse(i):(Do("Failed to decode base64 JWT payload"),null)}catch(i){return Do("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ig(n){let e=_g(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof dt&&kw(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Zl=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ns=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Po(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Xl(n,ko(t,{idToken:r}));H(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Sg(s.providerUserInfo):[],a=Pw(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ns(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,p)}async function Tg(n){let e=Mt(n);await Po(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pw(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sg(n){return n.map(e=>{var{providerId:t}=e,r=Io(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function xw(n,e){let t=await gg(n,{},async()=>{let r=So({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await yg(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ts.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Mw(n,e){return Ut(n,"POST","/v2/accounts:revokeToken",wt(n,e))}var es=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ig(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=ig(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await xw(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Bt("not implemented")}};function On(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Nn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Io(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ns(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Xl(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vg(this,e)}reload(){return Tg(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Po(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Xi(this.auth));let e=await this.getIdToken();return await Xl(this,Nw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,C=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,N=(l=t.createdAt)!==null&&l!==void 0?l:void 0,x=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:b,isAnonymous:z,providerData:U,stsTokenManager:_}=t;H(M&&_,e,"internal-error");let g=es.fromJSON(this.name,_);H(typeof M=="string",e,"internal-error"),On(p,e.name),On(m,e.name),H(typeof b=="boolean",e,"internal-error"),H(typeof z=="boolean",e,"internal-error"),On(S,e.name),On(E,e.name),On(w,e.name),On(C,e.name),On(N,e.name),On(x,e.name);let y=new n({uid:M,auth:e,email:m,emailVerified:b,displayName:p,isAnonymous:z,photoURL:E,phoneNumber:S,tenantId:w,stsTokenManager:g,createdAt:N,lastLoginAt:x});return U&&Array.isArray(U)&&(y.providerData=U.map(v=>Object.assign({},v))),C&&(y._redirectEventId=C),y}static async _fromIdTokenResponse(e,t,r=!1){let i=new es;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Po(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];H(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Sg(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new es;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ns(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var sg=new Map;function ur(n){No(n instanceof Function,"Expected a class definition");let e=sg.get(n);return e?(No(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sg.set(n,e),e)}var xo=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};xo.type="NONE";var eu=xo;function $l(n,e,t){return`firebase:${n}:${e}:${t}`}var Mo=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$l(this.userKey,i.apiKey,s),this.fullPersistenceKey=$l("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await ko(this.auth,{idToken:e}).catch(()=>{});return t?Nn._fromGetAccountInfoResponse(this.auth,t,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ur(eu),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||ur(eu),o=$l(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=await l._get(o);if(u){let p;if(typeof u=="string"){let m=await ko(e,{idToken:u}).catch(()=>{});if(!m)break;p=await Nn._fromGetAccountInfoResponse(e,m,u)}else p=Nn._fromJSON(e,u);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function og(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vw(e))return"Blackberry";if(zw(e))return"Webos";if(Fw(e))return"Safari";if((e.includes("chrome/")||Bw(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Lw(n=rt()){return/firefox\//i.test(n)}function Fw(n=rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bw(n=rt()){return/crios\//i.test(n)}function Uw(n=rt()){return/iemobile/i.test(n)}function qw(n=rt()){return/android/i.test(n)}function Vw(n=rt()){return/blackberry/i.test(n)}function zw(n=rt()){return/webos/i.test(n)}function Eg(n,e=[]){let t;switch(n){case"Browser":t=og(rt());break;case"Worker":t=`${og(rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zr}/${r}`}var tu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Gw(n,e={}){return Ut(n,"GET","/v2/passwordPolicy",wt(n,e))}var jw=6,nu=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:jw,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Lo=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fo(this),this.idTokenSubscription=new Fo(this),this.beforeStateQueue=new tu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await ko(this,{idToken:e}),r=await Nn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ft(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Po(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ww()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Xi(this));let t=e?Mt(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Gw(this),t=new nu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ln("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mw(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ur(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Eg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Sw(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Go(n){return Mt(n)}var Fo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vm(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ww(n){return bg.loadJS(n)}function Hw(){return bg.recaptchaEnterpriseScript}var ru=class{constructor(){this.enterprise=new iu}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},iu=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},$w="recaptcha-enterprise",wg="NO_RECAPTCHA",su=class{constructor(e){this.type=$w,this.auth=Go(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Ow(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Jl(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){let c=window.grecaptcha;rg(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(wg)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ru().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&rg(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Hw();c.length!==0&&(c+=a),Ww(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}};async function Ji(n,e,t,r=!1,i=!1){let s=new su(n),o;if(i)o=wg;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ag(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Ji(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=await Ji(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=await Ji(n,e,t);return r(n,a).catch(async c=>{var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=await Ji(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)})}else{let a=await Ji(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}function Cg(n,e){let t=Yi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(xt(s,e??{}))return i;dr(i,"already-initialized")}return t.initialize({options:e})}function Kw(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ur);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ig(n,e,t){let r=Go(n);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ag(e),{host:o,port:a}=Qw(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(xt(l,r.config.emulator)&&xt(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ur(o)?(Ki("Auth",!0),To(`${s}//${o}${c}`)):i||Yw()}function Ag(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Qw(n){let e=Ag(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:cg(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:cg(o)}}}function cg(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Yw(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rs=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bt("not implemented")}_getIdTokenResponse(e){return Bt("not implemented")}_linkToIdToken(e,t){return Bt("not implemented")}_getReauthenticationResolver(e){return Bt("not implemented")}};async function Jw(n,e){return Ut(n,"POST","/v1/accounts:signUp",e)}async function Xw(n,e){return ls(n,"POST","/v1/accounts:signInWithPassword",wt(n,e))}async function Zw(n,e){return ls(n,"POST","/v1/accounts:signInWithEmailLink",wt(n,e))}async function e0(n,e){return ls(n,"POST","/v1/accounts:signInWithEmailLink",wt(n,e))}var is=class n extends rs{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,t,"signInWithPassword",Xw,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Zw(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,r,"signUpPassword",Jw,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return e0(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Kl(n,e){return ls(n,"POST","/v1/accounts:signInWithIdp",wt(n,e))}var t0="http://localhost",hr=class n extends rs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Io(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Kl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Kl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}buildRequest(){let e={requestUri:t0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=So(t)}return e}};function n0(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function r0(n){let e=qr(Vr(n)).link,t=e?qr(Vr(e)).deep_link_id:null,r=qr(Vr(n)).deep_link_id;return(r?qr(Vr(r)).link:null)||r||t||e||n}var Bo=class n{constructor(e){var t,r,i,s,o,a;let c=qr(Vr(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,p=n0((i=c.mode)!==null&&i!==void 0?i:null);H(l&&u&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=r0(e);try{return new n(t)}catch{return null}}};var Gr=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return is._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=Bo.parseLink(t);return H(r,"argument-error"),is._fromEmailAndCode(e,r.code,r.tenantId)}};Gr.PROVIDER_ID="password";Gr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ou=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var jr=class extends ou{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ss=class n extends jr{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";var os=class n extends jr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return n.credential(t,r)}catch{return null}}};os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";var as=class n extends jr{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";var cs=class n extends jr{constructor(){super("twitter.com")}static credential(e,t){return hr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return n.credential(t,r)}catch{return null}}};cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";async function i0(n,e){return ls(n,"POST","/v1/accounts:signUp",wt(n,e))}var Uo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Nn._fromIdTokenResponse(e,r,i),o=lg(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=lg(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function lg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function du(n){var e;if(Ft(n.app))return Promise.reject(Xi(n));let t=Go(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Uo({user:t.currentUser,providerId:null,operationType:"signIn"});let r=await i0(t,{returnSecureToken:!0}),i=await Uo._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}function s0(n,e){return Ut(n,"POST","/v2/accounts/mfaEnrollment:start",wt(n,e))}function o0(n,e){return Ut(n,"POST","/v2/accounts/mfaEnrollment:finalize",wt(n,e))}var ug="@firebase/auth",dg="1.10.4";var au=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function a0(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c0(n){Dn(new ht("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Eg(n)},l=new Lo(r,i,s,c);return Kw(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new ht("auth-internal",e=>{let t=Go(e.getProvider("auth").getImmediate());return(r=>new au(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bt(ug,dg,a0(n)),bt(ug,dg,"esm2017")}ts.initialize(fetch,Headers,Response);function hu(n=Co()){let e=Yi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Cg(n),r=Rl("auth");return r&&Ig(t,`http://${r}`),t}c0("Node");var t2=lu("operation-not-supported-in-this-environment");Lo.prototype.setPersistence=async()=>{};function l0(n,e){return Ut(n,"POST","/v2/accounts/mfaSignIn:finalize",wt(n,e))}var cu=class{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Bt("unexpected MultiFactorSessionType")}}},qo=class{static assertionForEnrollment(e,t){return Vo._fromSecret(e,t)}static assertionForSignIn(e,t){return Vo._fromEnrollmentId(e,t)}static async generateSecret(e){var t;let r=e;H(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");let i=await s0(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return zo._fromStartTotpMfaEnrollmentResponse(i,r.user.auth)}};qo.FACTOR_ID="totp";var Vo=class n extends cu{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}async _finalizeEnroll(e,t,r){return H(typeof this.secret<"u",e,"argument-error"),o0(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let r={verificationCode:this.otp};return l0(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}},zo=class n{constructor(e,t,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let i=!1;return(Ro(e)||Ro(t))&&(i=!0),i&&(Ro(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),Ro(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Ro(n){return typeof n>"u"||n?.length===0}var u0="firebase",d0="11.7.3";bt(u0,d0,"app");var lo=require("util");var RS=require("crypto");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dg={};var jo,Og;(function(){var n;function e(_,g){function y(){}y.prototype=g.prototype,_.D=g.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(v,h,T){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return g.prototype[h].apply(v,d)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var h=0;16>h;++h)v[h]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(h=0;16>h;++h)v[h]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=_.g[0],y=_.g[1],h=_.g[2];var T=_.g[3],d=g+(T^y&(h^T))+v[0]+3614090360&4294967295;g=y+(d<<7&4294967295|d>>>25),d=T+(h^g&(y^h))+v[1]+3905402710&4294967295,T=g+(d<<12&4294967295|d>>>20),d=h+(y^T&(g^y))+v[2]+606105819&4294967295,h=T+(d<<17&4294967295|d>>>15),d=y+(g^h&(T^g))+v[3]+3250441966&4294967295,y=h+(d<<22&4294967295|d>>>10),d=g+(T^y&(h^T))+v[4]+4118548399&4294967295,g=y+(d<<7&4294967295|d>>>25),d=T+(h^g&(y^h))+v[5]+1200080426&4294967295,T=g+(d<<12&4294967295|d>>>20),d=h+(y^T&(g^y))+v[6]+2821735955&4294967295,h=T+(d<<17&4294967295|d>>>15),d=y+(g^h&(T^g))+v[7]+4249261313&4294967295,y=h+(d<<22&4294967295|d>>>10),d=g+(T^y&(h^T))+v[8]+1770035416&4294967295,g=y+(d<<7&4294967295|d>>>25),d=T+(h^g&(y^h))+v[9]+2336552879&4294967295,T=g+(d<<12&4294967295|d>>>20),d=h+(y^T&(g^y))+v[10]+4294925233&4294967295,h=T+(d<<17&4294967295|d>>>15),d=y+(g^h&(T^g))+v[11]+2304563134&4294967295,y=h+(d<<22&4294967295|d>>>10),d=g+(T^y&(h^T))+v[12]+1804603682&4294967295,g=y+(d<<7&4294967295|d>>>25),d=T+(h^g&(y^h))+v[13]+4254626195&4294967295,T=g+(d<<12&4294967295|d>>>20),d=h+(y^T&(g^y))+v[14]+2792965006&4294967295,h=T+(d<<17&4294967295|d>>>15),d=y+(g^h&(T^g))+v[15]+1236535329&4294967295,y=h+(d<<22&4294967295|d>>>10),d=g+(h^T&(y^h))+v[1]+4129170786&4294967295,g=y+(d<<5&4294967295|d>>>27),d=T+(y^h&(g^y))+v[6]+3225465664&4294967295,T=g+(d<<9&4294967295|d>>>23),d=h+(g^y&(T^g))+v[11]+643717713&4294967295,h=T+(d<<14&4294967295|d>>>18),d=y+(T^g&(h^T))+v[0]+3921069994&4294967295,y=h+(d<<20&4294967295|d>>>12),d=g+(h^T&(y^h))+v[5]+3593408605&4294967295,g=y+(d<<5&4294967295|d>>>27),d=T+(y^h&(g^y))+v[10]+38016083&4294967295,T=g+(d<<9&4294967295|d>>>23),d=h+(g^y&(T^g))+v[15]+3634488961&4294967295,h=T+(d<<14&4294967295|d>>>18),d=y+(T^g&(h^T))+v[4]+3889429448&4294967295,y=h+(d<<20&4294967295|d>>>12),d=g+(h^T&(y^h))+v[9]+568446438&4294967295,g=y+(d<<5&4294967295|d>>>27),d=T+(y^h&(g^y))+v[14]+3275163606&4294967295,T=g+(d<<9&4294967295|d>>>23),d=h+(g^y&(T^g))+v[3]+4107603335&4294967295,h=T+(d<<14&4294967295|d>>>18),d=y+(T^g&(h^T))+v[8]+1163531501&4294967295,y=h+(d<<20&4294967295|d>>>12),d=g+(h^T&(y^h))+v[13]+2850285829&4294967295,g=y+(d<<5&4294967295|d>>>27),d=T+(y^h&(g^y))+v[2]+4243563512&4294967295,T=g+(d<<9&4294967295|d>>>23),d=h+(g^y&(T^g))+v[7]+1735328473&4294967295,h=T+(d<<14&4294967295|d>>>18),d=y+(T^g&(h^T))+v[12]+2368359562&4294967295,y=h+(d<<20&4294967295|d>>>12),d=g+(y^h^T)+v[5]+4294588738&4294967295,g=y+(d<<4&4294967295|d>>>28),d=T+(g^y^h)+v[8]+2272392833&4294967295,T=g+(d<<11&4294967295|d>>>21),d=h+(T^g^y)+v[11]+1839030562&4294967295,h=T+(d<<16&4294967295|d>>>16),d=y+(h^T^g)+v[14]+4259657740&4294967295,y=h+(d<<23&4294967295|d>>>9),d=g+(y^h^T)+v[1]+2763975236&4294967295,g=y+(d<<4&4294967295|d>>>28),d=T+(g^y^h)+v[4]+1272893353&4294967295,T=g+(d<<11&4294967295|d>>>21),d=h+(T^g^y)+v[7]+4139469664&4294967295,h=T+(d<<16&4294967295|d>>>16),d=y+(h^T^g)+v[10]+3200236656&4294967295,y=h+(d<<23&4294967295|d>>>9),d=g+(y^h^T)+v[13]+681279174&4294967295,g=y+(d<<4&4294967295|d>>>28),d=T+(g^y^h)+v[0]+3936430074&4294967295,T=g+(d<<11&4294967295|d>>>21),d=h+(T^g^y)+v[3]+3572445317&4294967295,h=T+(d<<16&4294967295|d>>>16),d=y+(h^T^g)+v[6]+76029189&4294967295,y=h+(d<<23&4294967295|d>>>9),d=g+(y^h^T)+v[9]+3654602809&4294967295,g=y+(d<<4&4294967295|d>>>28),d=T+(g^y^h)+v[12]+3873151461&4294967295,T=g+(d<<11&4294967295|d>>>21),d=h+(T^g^y)+v[15]+530742520&4294967295,h=T+(d<<16&4294967295|d>>>16),d=y+(h^T^g)+v[2]+3299628645&4294967295,y=h+(d<<23&4294967295|d>>>9),d=g+(h^(y|~T))+v[0]+4096336452&4294967295,g=y+(d<<6&4294967295|d>>>26),d=T+(y^(g|~h))+v[7]+1126891415&4294967295,T=g+(d<<10&4294967295|d>>>22),d=h+(g^(T|~y))+v[14]+2878612391&4294967295,h=T+(d<<15&4294967295|d>>>17),d=y+(T^(h|~g))+v[5]+4237533241&4294967295,y=h+(d<<21&4294967295|d>>>11),d=g+(h^(y|~T))+v[12]+1700485571&4294967295,g=y+(d<<6&4294967295|d>>>26),d=T+(y^(g|~h))+v[3]+2399980690&4294967295,T=g+(d<<10&4294967295|d>>>22),d=h+(g^(T|~y))+v[10]+4293915773&4294967295,h=T+(d<<15&4294967295|d>>>17),d=y+(T^(h|~g))+v[1]+2240044497&4294967295,y=h+(d<<21&4294967295|d>>>11),d=g+(h^(y|~T))+v[8]+1873313359&4294967295,g=y+(d<<6&4294967295|d>>>26),d=T+(y^(g|~h))+v[15]+4264355552&4294967295,T=g+(d<<10&4294967295|d>>>22),d=h+(g^(T|~y))+v[6]+2734768916&4294967295,h=T+(d<<15&4294967295|d>>>17),d=y+(T^(h|~g))+v[13]+1309151649&4294967295,y=h+(d<<21&4294967295|d>>>11),d=g+(h^(y|~T))+v[4]+4149444226&4294967295,g=y+(d<<6&4294967295|d>>>26),d=T+(y^(g|~h))+v[11]+3174756917&4294967295,T=g+(d<<10&4294967295|d>>>22),d=h+(g^(T|~y))+v[2]+718787259&4294967295,h=T+(d<<15&4294967295|d>>>17),d=y+(T^(h|~g))+v[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(h+(d<<21&4294967295|d>>>11))&4294967295,_.g[2]=_.g[2]+h&4294967295,_.g[3]=_.g[3]+T&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var y=g-this.blockSize,v=this.B,h=this.h,T=0;T<g;){if(h==0)for(;T<=y;)i(this,_,T),T+=this.blockSize;if(typeof _=="string"){for(;T<g;)if(v[h++]=_.charCodeAt(T++),h==this.blockSize){i(this,v),h=0;break}}else for(;T<g;)if(v[h++]=_[T++],h==this.blockSize){i(this,v),h=0;break}}this.h=h,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var y=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=y&255,y/=256;for(this.u(_),_=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)_[y++]=this.g[g]>>>v&255;return _};function s(_,g){var y=a;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=g(_)}function o(_,g){this.h=g;for(var y=[],v=!0,h=_.length-1;0<=h;h--){var T=_[h]|0;v&&T==g||(y[h]=T,v=!1)}this.g=y}var a={};function c(_){return-128<=_&&128>_?s(_,function(g){return new o([g|0],0>g?-1:0)}):new o([_|0],0>_?-1:0)}function l(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return C(l(-_));for(var g=[],y=1,v=0;_>=y;v++)g[v]=_/y|0,y*=4294967296;return new o(g,0)}function u(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return C(u(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=l(Math.pow(g,8)),v=p,h=0;h<_.length;h+=8){var T=Math.min(8,_.length-h),d=parseInt(_.substring(h,h+T),g);8>T?(T=l(Math.pow(g,T)),v=v.j(T).add(l(d))):(v=v.j(y),v=v.add(l(d)))}return v}var p=c(0),m=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(w(this))return-C(this).m();for(var _=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);_+=(0<=v?v:4294967296+v)*g,g*=4294967296}return _},n.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E(this))return"0";if(w(this))return"-"+C(this).toString(_);for(var g=l(Math.pow(_,6)),y=this,v="";;){var h=b(y,g).g;y=N(y,h.j(g));var T=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=h,E(y))return T+v;for(;6>T.length;)T="0"+T;v=T+v}},n.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function E(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function w(_){return _.h==-1}n.l=function(_){return _=N(this,_),w(_)?-1:E(_)?0:1};function C(_){for(var g=_.g.length,y=[],v=0;v<g;v++)y[v]=~_.g[v];return new o(y,~_.h).add(m)}n.abs=function(){return w(this)?C(this):this},n.add=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],v=0,h=0;h<=g;h++){var T=v+(this.i(h)&65535)+(_.i(h)&65535),d=(T>>>16)+(this.i(h)>>>16)+(_.i(h)>>>16);v=d>>>16,T&=65535,d&=65535,y[h]=d<<16|T}return new o(y,y[y.length-1]&-2147483648?-1:0)};function N(_,g){return _.add(C(g))}n.j=function(_){if(E(this)||E(_))return p;if(w(this))return w(_)?C(this).j(C(_)):C(C(this).j(_));if(w(_))return C(this.j(C(_)));if(0>this.l(S)&&0>_.l(S))return l(this.m()*_.m());for(var g=this.g.length+_.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var h=0;h<_.g.length;h++){var T=this.i(v)>>>16,d=this.i(v)&65535,f=_.i(h)>>>16,k=_.i(h)&65535;y[2*v+2*h]+=d*k,x(y,2*v+2*h),y[2*v+2*h+1]+=T*k,x(y,2*v+2*h+1),y[2*v+2*h+1]+=d*f,x(y,2*v+2*h+1),y[2*v+2*h+2]+=T*f,x(y,2*v+2*h+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new o(y,0)};function x(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function M(_,g){this.g=_,this.h=g}function b(_,g){if(E(g))throw Error("division by zero");if(E(_))return new M(p,p);if(w(_))return g=b(C(_),g),new M(C(g.g),C(g.h));if(w(g))return g=b(_,C(g)),new M(C(g.g),g.h);if(30<_.g.length){if(w(_)||w(g))throw Error("slowDivide_ only works with positive integers.");for(var y=m,v=g;0>=v.l(_);)y=z(y),v=z(v);var h=U(y,1),T=U(v,1);for(v=U(v,2),y=U(y,2);!E(v);){var d=T.add(v);0>=d.l(_)&&(h=h.add(y),T=d),v=U(v,1),y=U(y,1)}return g=N(_,h.j(g)),new M(h,g)}for(h=p;0<=_.l(g);){for(y=Math.max(1,Math.floor(_.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),T=l(y),d=T.j(g);w(d)||0<d.l(_);)y-=v,T=l(y),d=T.j(g);E(T)&&(T=m),h=h.add(T),_=N(_,d)}return new M(h,_)}n.A=function(_){return b(this,_).h},n.and=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&_.i(v);return new o(y,this.h&_.h)},n.or=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|_.i(v);return new o(y,this.h|_.h)},n.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^_.i(v);return new o(y,this.h^_.h)};function z(_){for(var g=_.g.length+1,y=[],v=0;v<g;v++)y[v]=_.i(v)<<1|_.i(v-1)>>>31;return new o(y,_.h)}function U(_,g){var y=g>>5;g%=32;for(var v=_.g.length-y,h=[],T=0;T<v;T++)h[T]=0<g?_.i(T+y)>>>g|_.i(T+y+1)<<32-g:_.i(T+y);return new o(h,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Og=Dg.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,jo=Dg.Integer=o}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Rr=Br(QT(),1),DS=Br(ch(),1),YT="@firebase/firestore",JT="4.7.14";var ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ke.UNAUTHENTICATED=new ke(null);ke.GOOGLE_CREDENTIALS=new ke("google-credentials-uid");ke.FIRST_PARTY=new ke("first-party-uid");ke.MOCK_USER=new ke("mock-user");var Ak="11.7.3";var ji=Ak;function Rk(n){ji=n}function Dk(n){return(0,lo.inspect)(n,{depth:100})}var Dr=new An("@firebase/firestore");function Di(){return Dr.logLevel}function V(n,...e){if(Dr.logLevel<=$.DEBUG){let t=e.map(om);Dr.debug(`Firestore (${ji}): ${n}`,...t)}}function Sn(n,...e){if(Dr.logLevel<=$.ERROR){let t=e.map(om);Dr.error(`Firestore (${ji}): ${n}`,...t)}}function sm(n,...e){if(Dr.logLevel<=$.WARN){let t=e.map(om);Dr.warn(`Firestore (${ji}): ${n}`,...t)}}function om(n){if(typeof n=="string")return n;try{return Dk(n)}catch{return n}}function Q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,OS(n,r,t)}function OS(n,e,t){let r=`FIRESTORE (${ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{let i=JSON.stringify(t);r+=" CONTEXT: "+i}catch{r+=" CONTEXT: "+t}throw Sn(r),new Error(r)}function ge(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||OS(e,i,r)}function le(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends dt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var jc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ke.UNAUTHENTICATED))}shutdown(){}},qf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Vf=class{constructor(e){this.authProvider=e,this.currentUser=ke.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.tokenListener===void 0,42304);let r=this.tokenCounter,i=c=>this.tokenCounter!==r?(r=this.tokenCounter,t(c)):Promise.resolve(),s=new sn;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),o())};this.authProvider.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.authProvider.getImmediate({optional:!0});c?a(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),o()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.tokenCounter!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{tokenData:r}),new jc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{currentUid:e}),new ke(e)}},zf=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=ke.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},Gf=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new zf(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jf=class{constructor(e,t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null,this.serverAppAppCheckToken=null,Ft(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken)}start(e,t){ge(this.tokenListener===void 0,3512);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.serverAppAppCheckToken)return Promise.resolve(new Wc(this.serverAppAppCheckToken));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.latestAppCheckToken=t.token,new Wc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}};function Ok(n){if(!n)return new Uf;switch(n.type){case"firstParty":return new Gf(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new G(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function Nk(n){return(0,RS.randomBytes)(n)}function kk(){return new lo.TextEncoder}var Hc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",i=20;for(;r.length<i;){let s=Nk(40);for(let o=0;o<s.length;++o)r.length<i&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}};function ne(n,e){return n<e?-1:n>e?1:0}function am(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ne(r,i);{let s=kk(),o=s.encode(XT(n,t)),a=s.encode(XT(e,t)),c=Pk(o,a);return c!==0?c:ne(r,i)}}t+=r>65535?2:1}return ne(n.length,e.length)}function XT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Pk(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ne(n[t],e[t]);return ne(n.length,e.length)}function Or(n,e,t){return n.length!==e.length?!1:n.every((r,i)=>t(r,e[i]))}var ZT=-62135596800,eS=1e6,Ge=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-t*1e3)*eS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZT)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/eS}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-ZT,t=String(e).padStart(12,"0"),r=String(this.nanoseconds).padStart(9,"0");return t+"."+r}};var me=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ge(0,0))}static max(){return new n(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var tS="__name__",$c=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):am(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jo.fromString(e.substring(4,e.length-2))}},Oe=class n extends $c{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ct=class n extends $c{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tS}static keyField(){return new n([tS])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(!(c==="\\"||c==="."||c==="`"))throw new G(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a==="."&&!o?(s(),i++):(r+=a,i++)}if(s(),o)throw new G(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(Oe.fromString(e))}static fromName(e){return new n(Oe.fromString(e).popFirst(5))}static empty(){return new n(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Oe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new n(new Oe(e.slice()))}};var Js=-1;var Wf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Wf.UNKNOWN_ID=-1;function Mk(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Ge(t+1,0):new Ge(t,r));return new Nr(i,J.empty(),e)}function Lk(n){return new Nr(n.readTime,n.key,Js)}var Nr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(me.min(),J.empty(),Js)}static max(){return new n(me.max(),J.empty(),Js)}};function Fk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0||(t=J.comparator(n.documentKey,e.documentKey),t!==0)?t:ne(n.largestBatchId,e.largestBatchId)}var Bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function cm(n){if(n.code===P.FAILED_PRECONDITION&&n.message===Bk)V("LocalStore","Unexpectedly lost primary lease");else throw n}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Uk(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function uo(n){return n.name==="IndexedDbTransactionError"}var xU=15*1e3,MU=60*1e3;var Xs=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.setPreviousValue(r),this.writeNewSequenceNumber=r=>t.writeSequenceNumber(r))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}};Xs.INVALID=-1;var zc="",qk="",Vk="",zk="";function Gk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nS(e)),e=jk(n.get(t),e);return nS(e)}function jk(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+=zc+Vk;break;case zc:t+=zc+zk;break;default:t+=s}}return t}function nS(n){return n+zc+qk}var Wk="remoteDocuments";var NS="owner";var kS="mutationQueues";var PS="mutations";var xS="documentMutations",Hk="remoteDocumentsV14";var MS="remoteDocumentGlobal";var LS="targets";var FS="targetDocuments";var BS="targetGlobal",US="collectionParents";var qS="clientMetadata";var VS="bundles";var zS="namedQueries";var $k="indexConfiguration";var Kk="indexState";var Qk="indexEntries";var GS="documentOverlays";var Yk="globals";var Jk=[kS,PS,xS,Wk,LS,NS,BS,FS],Xk=Jk,Zk=[...Xk,qS],e1=[...Zk,MS],t1=[...e1,US],n1=[...t1,VS,zS],LU=[...n1,GS],r1=[kS,PS,xS,Hk,LS,NS,BS,FS,qS,MS,US,VS,zS,GS],i1=r1,s1=[...i1,$k,Kk,Qk];var FU=[...s1,Yk];function rS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var lt=class n{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oi(this.root,e,this.comparator,!0)}},Oi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},on=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return!e.left.isRed()&&!e.left.left.isRed()&&(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed()&&!i.left.left.isRed()&&(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),!i.right.isEmpty()&&!i.right.isRed()&&!i.right.left.isRed()&&(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};on.EMPTY=null;on.RED=!0;on.BLACK=!1;var $f=class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};on.EMPTY=new $f;var je=class n{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(t!==void 0?r=this.data.getIteratorFrom(t):r=this.data.getIterator();r.hasNext();){let i=r.getNext();if(!e(i.key))return}}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kc(this.data.getIterator())}getIteratorFrom(e){return new Kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Kc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class n{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new n([])}unionWith(e){let t=new je(ct.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Or(this.fields,e.fields,(t,r)=>t.isEqual(r))}};function o1(n){return Buffer.from(n,"base64").toString("binary")}function a1(n){return Buffer.from(n,"binary").toString("base64")}var En=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=o1(e);return new n(t)}static fromUint8Array(e){let t=c1(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return a1(this.binaryString)}toUint8Array(){return l1(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};En.EMPTY_BYTE_STRING=new En("");function c1(n){let e="";for(let t=0;t<n.length;++t)e+=String.fromCharCode(n[t]);return e}function l1(n){let e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}var u1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(ge(!!n,39018),typeof n=="string"){let e=0,t=u1.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}else{let e=Ee(n.seconds),t=Ee(n.nanos);return{seconds:e,nanos:t}}}function Ee(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kr(n){return typeof n=="string"?En.fromBase64String(n):En.fromUint8Array(n)}var WS="server_timestamp",HS="__type__",$S="__previous_value__",KS="__local_write_time__";function lm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[HS])===null||t===void 0?void 0:t.stringValue)===WS}function d1(n,e){let t={fields:{[HS]:{stringValue:WS},[KS]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return e&&lm(e)&&(e=um(e)),e&&(t.fields[$S]=e),{mapValue:t}}function um(n){let e=n.mapValue.fields[$S];return lm(e)?um(e):e}function Qc(n){let e=sr(n.mapValue.fields[KS].timestampValue);return new Ge(e.seconds,e.nanos)}var Kf=class{constructor(e,t,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},Qf="(default)",Yf=class n{constructor(e,t){this.projectId=e,this.database=t||Qf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Qf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function h1(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new G(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yf(n.options.projectId,e)}var dm=-1;function hm(n){return n==null}function Zs(n){return n===0&&1/n===-1/0}function f1(n){return typeof n=="number"&&Number.isInteger(n)&&!Zs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var fm="__type__",QS="__max__",Uc={mapValue:{fields:{__type__:{stringValue:QS}}}},pm="__vector__",eo="value";function Pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:XS(n)?9007199254740991:JS(n)?10:11:Q(28295,{value:n})}function Pt(n,e){if(n===e)return!0;let t=Pr(n),r=Pr(e);if(t!==r)return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return p1(n,e);case 5:return n.stringValue===e.stringValue;case 6:return g1(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return m1(n,e);case 2:return y1(n,e);case 9:return Or(n.arrayValue.values||[],e.arrayValue.values||[],Pt);case 10:case 11:return v1(n,e);case 9007199254740991:return!0;default:return Q(52216,{left:n})}}function p1(n,e){if(typeof n.timestampValue=="string"&&typeof e.timestampValue=="string"&&n.timestampValue.length===e.timestampValue.length)return n.timestampValue===e.timestampValue;let t=sr(n.timestampValue),r=sr(e.timestampValue);return t.seconds===r.seconds&&t.nanos===r.nanos}function m1(n,e){return Ee(n.geoPointValue.latitude)===Ee(e.geoPointValue.latitude)&&Ee(n.geoPointValue.longitude)===Ee(e.geoPointValue.longitude)}function g1(n,e){return kr(n.bytesValue).isEqual(kr(e.bytesValue))}function y1(n,e){if("integerValue"in n&&"integerValue"in e)return Ee(n.integerValue)===Ee(e.integerValue);if("doubleValue"in n&&"doubleValue"in e){let t=Ee(n.doubleValue),r=Ee(e.doubleValue);return t===r?Zs(t)===Zs(r):isNaN(t)&&isNaN(r)}return!1}function v1(n,e){let t=n.mapValue.fields||{},r=e.mapValue.fields||{};if(rS(t)!==rS(r))return!1;for(let i in t)if(t.hasOwnProperty(i)&&(r[i]===void 0||!Pt(t[i],r[i])))return!1;return!0}function to(n,e){return(n.values||[]).find(t=>Pt(t,e))!==void 0}function Pi(n,e){if(n===e)return 0;let t=Pr(n),r=Pr(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return _1(n,e);case 3:return iS(n.timestampValue,e.timestampValue);case 4:return iS(Qc(n),Qc(e));case 5:return am(n.stringValue,e.stringValue);case 6:return E1(n.bytesValue,e.bytesValue);case 7:return T1(n.referenceValue,e.referenceValue);case 8:return S1(n.geoPointValue,e.geoPointValue);case 9:return YS(n.arrayValue,e.arrayValue);case 10:return b1(n.mapValue,e.mapValue);case 11:return w1(n.mapValue,e.mapValue);default:throw Q(23264,{leftType:t})}}function _1(n,e){let t=Ee(n.integerValue||n.doubleValue),r=Ee(e.integerValue||e.doubleValue);return t<r?-1:t>r?1:t===r?0:isNaN(t)?isNaN(r)?0:-1:1}function iS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ne(n,e);let t=sr(n),r=sr(e),i=ne(t.seconds,r.seconds);return i!==0?i:ne(t.nanos,r.nanos)}function T1(n,e){let t=n.split("/"),r=e.split("/");for(let i=0;i<t.length&&i<r.length;i++){let s=ne(t[i],r[i]);if(s!==0)return s}return ne(t.length,r.length)}function S1(n,e){let t=ne(Ee(n.latitude),Ee(e.latitude));return t!==0?t:ne(Ee(n.longitude),Ee(e.longitude))}function E1(n,e){let t=kr(n),r=kr(e);return t.compareTo(r)}function YS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Pi(t[i],r[i]);if(s)return s}return ne(t.length,r.length)}function b1(n,e){var t,r,i,s;let o=n.fields||{},a=e.fields||{},c=(t=o[eo])===null||t===void 0?void 0:t.arrayValue,l=(r=a[eo])===null||r===void 0?void 0:r.arrayValue,u=ne(((i=c?.values)===null||i===void 0?void 0:i.length)||0,((s=l?.values)===null||s===void 0?void 0:s.length)||0);return u!==0?u:YS(c,l)}function w1(n,e){if(n===Uc.mapValue&&e===Uc.mapValue)return 0;if(n===Uc.mapValue)return 1;if(e===Uc.mapValue)return-1;let t=n.fields||{},r=Object.keys(t),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){let a=am(r[o],s[o]);if(a!==0)return a;let c=Pi(t[r[o]],i[s[o]]);if(c!==0)return c}return ne(r.length,s.length)}function xi(n){return mm(n)}function mm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?I1(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?C1(n.bytesValue):"referenceValue"in n?R1(n.referenceValue):"geoPointValue"in n?A1(n.geoPointValue):"arrayValue"in n?O1(n.arrayValue):"mapValue"in n?D1(n.mapValue):Q(61005,{value:n})}function C1(n){return kr(n).toBase64()}function I1(n){let e=sr(n);return`time(${e.seconds},${e.nanos})`}function A1(n){return`geo(${n.latitude},${n.longitude})`}function R1(n){return J.fromName(n).toString()}function D1(n){let e=Object.keys(n.fields||{}).sort(),t="{",r=!0;for(let i of e)r?r=!1:t+=",",t+=`${i}:${mm(n.fields[i])}`;return t+"}"}function O1(n){let e="[",t=!0;for(let r of n.values||[])t?t=!1:e+=",",e+=mm(r);return e+"]"}function fl(n){switch(Pr(n)){case 0:return 4;case 1:return 4;case 2:return 8;case 3:return 16;case 4:let e=um(n);return e?16+fl(e):16;case 5:return n.stringValue.length*2;case 6:return kr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 8:return 16;case 9:return k1(n.arrayValue);case 10:case 11:return N1(n.mapValue);default:throw Q(13486,{value:n})}}function N1(n){let e=0;return Wi(n.fields,(t,r)=>{e+=t.length+fl(r)}),e}function k1(n){return(n.values||[]).reduce((e,t)=>e+fl(t),0)}function Jf(n){return!!n&&"integerValue"in n}function P1(n){return!!n&&"doubleValue"in n}function x1(n){return Jf(n)||P1(n)}function gm(n){return!!n&&"arrayValue"in n}function Gc(n){return!!n&&"mapValue"in n}function JS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fm])===null||t===void 0?void 0:t.stringValue)===pm}function Qs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qs(r)),e}else if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qs(n.arrayValue.values[t]);return e}else return Object.assign({},n)}function XS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QS}var BU={mapValue:{fields:{[fm]:{stringValue:pm},[eo]:{arrayValue:{}}}}};var nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){let r=this.getFieldsMap(e.popLast());r[e.lastSegment()]=Qs(t)}setAll(e){let t=ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Qs(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];(!Gc(i)||!i.mapValue.fields)&&(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Qs(this.value))}};function ZS(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new ct([t]);if(Gc(r)){let o=ZS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new rn(e)}var Mi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,me.min(),me.min(),me.min(),nn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,me.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,me.min(),me.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,me.min(),me.min(),nn.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(me.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function M1(n,e,t){let r=e.data.field(n),i=t.data.field(n);return r!==null&&i!==null?Pi(r,i):Q(42886)}var Li=class{constructor(e,t){this.position=e,this.inclusive=t}};function eE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField())r=J.comparator(J.fromName(o.referenceValue),t.key);else{let a=t.data.field(s.field);r=Pi(o,a)}if(s.dir==="desc"&&(r=r*-1),r!==0)break}return r}function L1(n,e,t){let r=eE(n,e,t);return n.inclusive?r>=0:r>0}function F1(n,e,t){let r=eE(n,e,t);return n.inclusive?r<=0:r<0}function sS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++){let r=n.position[t],i=e.position[t];if(!Pt(r,i))return!1}return!0}var Fi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function B1(n){return n.field.canonicalString()+n.dir}function U1(n){return`${n.field.canonicalString()} (${n.dir})`}function q1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yc=class{},Ne=class n extends Yc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Zf(e,t,r):t==="array-contains"?new np(e,r):t==="in"?new rp(e,r):t==="not-in"?new ip(e,r):t==="array-contains-any"?new sp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ep(e,r):new tp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pi(t,this.value)):t!==null&&Pr(this.value)===Pr(t)&&this.matchesComparison(Pi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class n extends Yc{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new n(e,t)}matches(e){return tE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}};function tE(n){return n.op==="and"}function nE(n){return V1(n)&&tE(n)}function V1(n){for(let e of n.filters)if(e instanceof or)return!1;return!0}function Xf(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+xi(n.value);if(nE(n))return n.filters.map(e=>Xf(e)).join(",");{let e=n.filters.map(t=>Xf(t)).join(",");return`${n.op}(${e})`}}function rE(n,e){if(n instanceof Ne)return z1(n,e);if(n instanceof or)return G1(n,e);Q(19439)}function z1(n,e){return e instanceof Ne&&n.op===e.op&&n.field.isEqual(e.field)&&Pt(n.value,e.value)}function G1(n,e){return e instanceof or&&n.op===e.op&&n.filters.length===e.filters.length?n.filters.reduce((r,i,s)=>r&&rE(i,e.filters[s]),!0):!1}function iE(n){return n instanceof Ne?W1(n):n instanceof or?j1(n):"Filter"}function j1(n){return n.op.toString()+" {"+n.getFilters().map(iE).join(" ,")+"}"}function W1(n){return`${n.field.canonicalString()} ${n.op} ${xi(n.value)}`}var Zf=class extends Ne{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},ep=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=sE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tp=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=sE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function sE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}var np=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gm(t)&&to(t.arrayValue,this.value)}},rp=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&to(this.value.arrayValue,t)}},ip=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!to(this.value.arrayValue,t)}},sp=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!gm(t)||!t.arrayValue.values?!1:t.arrayValue.values.some(r=>to(this.value.arrayValue,r))}};var op=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}};function oS(n,e=null,t=[],r=[],i=null,s=null,o=null){return new op(n,e,t,r,i,s,o)}function ym(n){let e=le(n);if(e.memoizedCanonicalId===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>B1(r)).join(","),hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xi(r)).join(",")),e.memoizedCanonicalId=t}return e.memoizedCanonicalId}function H1(n){let e=n.path.canonicalString();return n.collectionGroup!==null&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>iE(t)).join(", ")}]`),hm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>U1(t)).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>xi(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>xi(t)).join(",")),`Target(${e})`}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup!==e.collectionGroup||!n.path.isEqual(e.path)||!sS(n.startAt,e.startAt)?!1:sS(n.endAt,e.endAt)}var Bi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}};function $1(n,e,t,r,i,s,o,a){return new Bi(n,e,t,r,i,s,o,a)}function K1(n){return new Bi(n)}function Q1(n,e){return new Bi(e,null,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function aS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Y1(n){let e=new je(ct.comparator);return n.filters.forEach(t=>{t.getFlattenedFilters().forEach(i=>{i.isInequality()&&(e=e.add(i.field))})}),e}function J1(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function X1(n){return n.collectionGroup!==null}function no(n){let e=le(n);if(e.memoizedNormalizedOrderBy===null){e.memoizedNormalizedOrderBy=[];let t=new Set;for(let s of e.explicitOrderBy)e.memoizedNormalizedOrderBy.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";Y1(e).forEach(s=>{!t.has(s.canonicalString())&&!s.isKeyField()&&e.memoizedNormalizedOrderBy.push(new Fi(s,r))}),t.has(ct.keyField().canonicalString())||e.memoizedNormalizedOrderBy.push(new Fi(ct.keyField(),r))}return e.memoizedNormalizedOrderBy}function Ir(n){let e=le(n);return e.memoizedTarget||(e.memoizedTarget=Z1(e,no(n))),e.memoizedTarget}function Z1(n,e){if(n.limitType==="F")return oS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Fi(i.field,s)});let t=n.endAt?new Li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Li(n.startAt.position,n.startAt.inclusive):null;return oS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ap(n,e,t){return new Bi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oE(n,e){return vm(Ir(n),Ir(e))&&n.limitType===e.limitType}function aE(n){return`${ym(Ir(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${H1(Ir(n))}; limitType=${n.limitType})`}function _m(n,e){return e.isFoundDocument()&&eP(n,e)&&tP(n,e)&&nP(n,e)&&rP(n,e)}function eP(n,e){let t=e.key.path;return n.collectionGroup!==null?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(t):J.isDocumentKey(n.path)?n.path.isEqual(t):n.path.isImmediateParentOf(t)}function tP(n,e){for(let t of no(n))if(!t.field.isKeyField()&&e.data.field(t.field)===null)return!1;return!0}function nP(n,e){for(let t of n.filters)if(!t.matches(e))return!1;return!0}function rP(n,e){return!(n.startAt&&!F1(n.startAt,no(n),e)||n.endAt&&!L1(n.endAt,no(n),e))}function iP(n){return(e,t)=>{let r=!1;for(let i of no(n)){let s=sP(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sP(n,e,t){let r=n.field.isKeyField()?J.comparator(e.key,t.key):M1(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:n.dir})}}var bn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0){this.inner[r]=[[e,t]],this.innerSize++;return}for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e)){i[s]=[e,t];return}i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return jS(this.inner)}size(){return this.innerSize}};var oP=new lt(J.comparator);function Jc(){return oP}var cE=new lt(J.comparator);function qc(...n){let e=cE;for(let t of n)e=e.insert(t.key,t);return e}function aP(){return ro()}function lE(n){let e=cE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cr(){return ro()}function uE(){return ro()}function ro(){return new bn(n=>n.toString(),(n,e)=>n.isEqual(e))}var cP=new lt(J.comparator);function lP(){return cP}var uP=new je(J.comparator);function ze(...n){let e=uP;for(let t of n)e=e.add(t);return e}var dP=new je(ne);function hP(){return dP}function Tm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zs(e)?"-0":e}}function dE(n){return{integerValue:""+n}}function fP(n,e){return f1(e)?dE(e):Tm(n,e)}var Ui=class{constructor(){this._=void 0}};function pP(n,e,t){return n instanceof qi?d1(t,e):n instanceof xr?fE(n,e):n instanceof Mr?pE(n,e):yP(n,e)}function mP(n,e,t){return n instanceof xr?fE(n,e):n instanceof Mr?pE(n,e):t}function hE(n,e){return n instanceof Vi?x1(e)?e:{integerValue:0}:null}function gP(n,e){return n instanceof xr&&e instanceof xr||n instanceof Mr&&e instanceof Mr?Or(n.elements,e.elements,Pt):n instanceof Vi&&e instanceof Vi?Pt(n.operand,e.operand):n instanceof qi&&e instanceof qi}var qi=class extends Ui{},xr=class extends Ui{constructor(e){super(),this.elements=e}};function fE(n,e){let t=mE(e);for(let r of n.elements)t.some(i=>Pt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Mr=class extends Ui{constructor(e){super(),this.elements=e}};function pE(n,e){let t=mE(e);for(let r of n.elements)t=t.filter(i=>!Pt(i,r));return{arrayValue:{values:t}}}var Vi=class extends Ui{constructor(e,t){super(),this.serializer=e,this.operand=t}};function yP(n,e){let t=hE(n,e),r=cS(t)+cS(n.operand);return Jf(t)&&Jf(n.operand)?dE(r):Tm(n.serializer,r)}function cS(n){return Ee(n.integerValue||n.doubleValue)}function mE(n){return gm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vP(n,e){return n.field.isEqual(e.field)&&gP(n.transform,e.transform)}function _P(n,e){return n===void 0&&e===void 0?!0:n&&e?Or(n,e,(t,r)=>vP(t,r)):!1}var cp=class{constructor(e,t){this.version=e,this.transformResults=t}},Ar=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists!==void 0?n.exists===e.isFoundDocument():!0}var zi=class{};function gE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Xc(n.key,Ar.none()):new Lr(n.key,n.data,Ar.none());{let t=n.data,r=nn.empty(),i=new je(ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wn(n.key,r,new rn(i.toArray()),Ar.none())}}function TP(n,e,t){n instanceof Lr?EP(n,e,t):n instanceof wn?wP(n,e,t):IP(n,e,t)}function Ys(n,e,t,r){return n instanceof Lr?bP(n,e,t,r):n instanceof wn?CP(n,e,t,r):AP(n,e,t)}function SP(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=hE(r.transform,i||null);s!=null&&(t===null&&(t=nn.empty()),t.set(r.field,s))}return t||null}function lS(n,e){return n.type!==e.type||!n.key.isEqual(e.key)||!n.precondition.isEqual(e.precondition)||!_P(n.fieldTransforms,e.fieldTransforms)?!1:n.type===0?n.value.isEqual(e.value):n.type===1?n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask):!0}var Lr=class extends zi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}};function EP(n,e,t){let r=n.value.clone(),i=vE(n.fieldTransforms,e,t.transformResults);r.setAll(i),e.convertToFoundDocument(t.version,r).setHasCommittedMutations()}function bP(n,e,t,r){if(!pl(n.precondition,e))return t;let i=n.value.clone(),s=_E(n.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}var wn=class extends zi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function wP(n,e,t){if(!pl(n.precondition,e)){e.convertToUnknownDocument(t.version);return}let r=vE(n.fieldTransforms,e,t.transformResults),i=e.data;i.setAll(yE(n)),i.setAll(r),e.convertToFoundDocument(t.version,i).setHasCommittedMutations()}function CP(n,e,t,r){if(!pl(n.precondition,e))return t;let i=_E(n.fieldTransforms,r,e),s=e.data;return s.setAll(yE(n)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),t===null?null:t.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(o=>o.field))}function yE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vE(n,e,t){let r=new Map;ge(n.length===t.length,32656,{serverTransformResultCount:t.length,fieldTransformCount:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mP(o,a,t[i]))}return r}function _E(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,pP(s,o,e))}return r}var Xc=class extends zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};function IP(n,e,t){e.convertToNoDocument(t.version).setHasCommittedMutations()}function AP(n,e,t){return pl(n.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):t}var lp=class extends zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var up=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];if(s.key.isEqual(e.key)){let o=r[i];TP(s,e,o)}}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ys(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ys(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=uE();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=gE(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&Or(this.mutations,e.mutations,(t,r)=>lS(t,r))&&Or(this.baseMutations,e.baseMutations,(t,r)=>lS(t,r))}},dp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ge(e.mutations.length===r.length,58842,{mutationsSent:e.mutations.length,resultsReceived:r.length});let i=lP(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var hp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var we;(function(n){n[n.OK=0]="OK",n[n.CANCELLED=1]="CANCELLED",n[n.UNKNOWN=2]="UNKNOWN",n[n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n[n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n[n.NOT_FOUND=5]="NOT_FOUND",n[n.ALREADY_EXISTS=6]="ALREADY_EXISTS",n[n.PERMISSION_DENIED=7]="PERMISSION_DENIED",n[n.UNAUTHENTICATED=16]="UNAUTHENTICATED",n[n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n[n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n[n.ABORTED=10]="ABORTED",n[n.OUT_OF_RANGE=11]="OUT_OF_RANGE",n[n.UNIMPLEMENTED=12]="UNIMPLEMENTED",n[n.INTERNAL=13]="INTERNAL",n[n.UNAVAILABLE=14]="UNAVAILABLE",n[n.DATA_LOSS=15]="DATA_LOSS"})(we||(we={}));function RP(n){switch(n){case P.OK:return Q(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return Q(15467,{code:n})}}function DP(n){return RP(n)&&n!==P.ABORTED}function Pf(n){if(n===void 0)return Sn("GRPC error has no .code"),P.UNKNOWN;switch(n){case we.OK:return P.OK;case we.CANCELLED:return P.CANCELLED;case we.UNKNOWN:return P.UNKNOWN;case we.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case we.INTERNAL:return P.INTERNAL;case we.UNAVAILABLE:return P.UNAVAILABLE;case we.UNAUTHENTICATED:return P.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case we.NOT_FOUND:return P.NOT_FOUND;case we.ALREADY_EXISTS:return P.ALREADY_EXISTS;case we.PERMISSION_DENIED:return P.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case we.ABORTED:return P.ABORTED;case we.OUT_OF_RANGE:return P.OUT_OF_RANGE;case we.UNIMPLEMENTED:return P.UNIMPLEMENTED;case we.DATA_LOSS:return P.DATA_LOSS;default:return Q(39323,{code:n})}}var UU=new jo([4294967295,4294967295],0);var qU=(()=>{let n={};return n.asc="ASCENDING",n.desc="DESCENDING",n})(),VU=(()=>{let n={};return n["<"]="LESS_THAN",n["<="]="LESS_THAN_OR_EQUAL",n[">"]="GREATER_THAN",n[">="]="GREATER_THAN_OR_EQUAL",n["=="]="EQUAL",n["!="]="NOT_EQUAL",n["array-contains"]="ARRAY_CONTAINS",n.in="IN",n["not-in"]="NOT_IN",n["array-contains-any"]="ARRAY_CONTAINS_ANY",n})(),zU=(()=>{let n={};return n.and="AND",n.or="OR",n})();var fp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function OP(n){let e;return typeof n=="object"?e=n.value:e=n,hm(e)?null:e}function pp(n,e){if(n.useProto3Json){let r=new Date(e.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),i=("000000000"+e.nanoseconds).slice(-9);return`${r}.${i}Z`}else return{seconds:""+e.seconds,nanos:e.nanoseconds}}function NP(n){let e=sr(n);return new Ge(e.seconds,e.nanos)}function kP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PP(n,e){return pp(n,e.toTimestamp())}function ki(n){return ge(!!n,49232),me.fromTimestamp(NP(n))}function TE(n,e){return mp(n,e).canonicalString()}function mp(n,e){let t=FP(n).child("documents");return e===void 0?t:t.child(e)}function xP(n){let e=Oe.fromString(n);return ge(rx(e),10190,{key:e.toString()}),e}function gp(n,e){return TE(n.databaseId,e.path)}function MP(n){let e=xP(n);return e.length===4?Oe.emptyPath():BP(e)}function LP(n){return new Oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FP(n){return new Oe(["projects",n.projectId,"databases",n.database])}function BP(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function uS(n,e,t){return{name:gp(n,e),fields:t.value.mapValue.fields}}function UP(n,e){let t;if(e instanceof Lr)t={update:uS(n,e.key,e.value)};else if(e instanceof Xc)t={delete:gp(n,e.key)};else if(e instanceof wn)t={update:uS(n,e.key,e.data),updateMask:nx(e.fieldMask)};else if(e instanceof lp)t={verify:gp(n,e.key)};else return Q(16599,{mutationType:e.type});return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>GP(n,r))),e.precondition.isNone||(t.currentDocument=qP(n,e.precondition)),t}function qP(n,e){return e.updateTime!==void 0?{updateTime:PP(n,e.updateTime)}:e.exists!==void 0?{exists:e.exists}:Q(27497)}function VP(n,e){let t=n.updateTime?ki(n.updateTime):ki(e);return t.isEqual(me.min())&&(t=ki(e)),new cp(t,n.transformResults||[])}function zP(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map(t=>VP(t,e))):[]}function GP(n,e){let t=e.transform;if(t instanceof qi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(t instanceof xr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:t.elements}};if(t instanceof Mr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:t.elements}};if(t instanceof Vi)return{fieldPath:e.field.canonicalString(),increment:t.operand};throw Q(20930,{transform:e.transform})}function jP(n){let e=MP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ge(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=WP(t.where));let o=[];t.orderBy&&(o=HP(t.orderBy));let a=null;t.limit&&(a=OP(t.limit));let c=null;t.startAt&&(c=$P(t.startAt));let l=null;return t.endAt&&(l=KP(t.endAt)),$1(e,i,o,s,a,"F",c,l)}function WP(n){let e=SE(n);return e instanceof or&&nE(e)?e.getFilters():[e]}function SE(n){return n.unaryFilter!==void 0?ZP(n):n.fieldFilter!==void 0?ex(n):n.compositeFilter!==void 0?tx(n):Q(30097,{filter:n})}function HP(n){return n.map(e=>XP(e))}function $P(n){let e=!!n.before,t=n.values||[];return new Li(t,e)}function KP(n){let e=!n.before,t=n.values||[];return new Li(t,e)}function QP(n){switch(n){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function YP(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}function JP(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}function Ni(n){return ct.fromServerFormat(n.fieldPath)}function XP(n){return new Fi(Ni(n.field),QP(n.direction))}function ZP(n){switch(n.unaryFilter.op){case"IS_NAN":let e=Ni(n.unaryFilter.field);return Ne.create(e,"==",{doubleValue:NaN});case"IS_NULL":let t=Ni(n.unaryFilter.field);return Ne.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Ni(n.unaryFilter.field);return Ne.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=Ni(n.unaryFilter.field);return Ne.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}function ex(n){return Ne.create(Ni(n.fieldFilter.field),YP(n.fieldFilter.op),n.fieldFilter.value)}function tx(n){return or.create(n.compositeFilter.filters.map(e=>SE(e)),JP(n.compositeFilter.op))}function nx(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yp=class{constructor(e){this.remoteSerializer=e}};function ix(n){let e=jP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ap(e,e.limit,"L"):e}function sx(n){return{name:n.name,query:ix(n.bundledQuery),readTime:ki(n.readTime)}}function ox(n){return{id:n.id,version:n.version,createTime:ki(n.createTime)}}var ax=5,cx=10,lx=13,xf=15,ux=20,dx=25,hx=30,fx=37,px=45,mx=50,gx=53,yx=55,vx=60,_x=2,Zc=class{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,ax);else if("booleanValue"in e)this.writeValueTypeLabel(t,cx),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,xf),t.writeNumber(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,lx):(this.writeValueTypeLabel(t,xf),Zs(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,ux),typeof r=="string"&&(r=sr(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,hx),t.writeBytes(kr(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,px),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?XS(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):JS(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):Q(19022,{indexValue:e})}writeIndexString(e,t){this.writeValueTypeLabel(t,dx),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};this.writeValueTypeLabel(t,yx);for(let i of Object.keys(r))this.writeIndexString(i,t),this.writeIndexValueAux(r[i],t)}writeIndexVector(e,t){var r,i;let s=e.fields||{};this.writeValueTypeLabel(t,gx);let o=eo,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.writeValueTypeLabel(t,xf),t.writeNumber(Ee(a)),this.writeIndexString(o,t),this.writeIndexValueAux(s[o],t)}writeIndexArray(e,t){let r=e.values||[];this.writeValueTypeLabel(t,mx);for(let i of r)this.writeIndexValueAux(i,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,fx),J.fromName(e).path.forEach(i=>{this.writeValueTypeLabel(t,vx),this.writeUnlabeledIndexString(i,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(_x)}};Zc.INSTANCE=new Zc;var vp=class{constructor(){this.collectionParentIndex=new _p}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Nr.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},_p=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(Oe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Oe.comparator)).toArray()}};var GU=new Uint8Array(0);var Mf=2,io=class n{constructor(e){this.lastId=e}next(){return this.lastId+=Mf,this.lastId}static forTargetCache(){return new n(2-Mf)}static forSyncEngine(){return new n(1-Mf)}};var dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ml=-1,EE=40*1024*1024,Et=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Et.DEFAULT_COLLECTION_PERCENTILE=10;Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;Et.DEFAULT=new Et(EE,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);Et.DISABLED=new Et(ml,0,0);var hS="LruGarbageCollector",fS=1*1024*1024,Tx=1*60*1e3,Sx=5*60*1e3;function pS([n,e],[t,r]){let i=ne(n,t);return i===0?ne(e,r):i}var Tp=class{constructor(e){this.maxElements=e,this.buffer=new je(pS),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Sp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==ml&&this.scheduleGC(Tx)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return this.gcTask!==null}scheduleGC(e){V(hS,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){uo(t)?V(hS,"Ignoring IndexedDB error during garbage collection: ",t):await cm(t)}await this.scheduleGC(Sx)})}},Ep=class{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Xs.INVALID);let r=new Tp(t);return this.delegate.forEachTarget(e,i=>r.addElement(i.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,i=>r.addElement(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===ml?(V("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(dS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>{if(l=Date.now(),Di()<=$.DEBUG){let m=`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in ${a-o}ms
	Removed ${s} targets in ${c-a}ms
	Removed ${p} documents in ${l-c}ms
Total Duration: ${l-u}ms`;V("LruGarbageCollector",m)}return O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})})}};function Ex(n,e){return new Ep(n,e)}var bp=class{constructor(){this.changes=new bn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Cp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ys(r.mutation,i,rn.empty(),Ge.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){let i=Cr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=qc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Jc(),o=ro(),a=aP();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof wn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Ys(u.mutation,l,u.mutation.getFieldMask(),Ge.now())):o.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var p;return a.set(l,new wp(u,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ro(),i=new lt((o,a)=>o-a),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||rn.empty();u=a.applyToLocalView(l,u),r.set(c,u);let p=(i.get(a.batchId)||ze()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,p=uE();u.forEach(m=>{if(!s.has(m)){let S=gE(t.get(m),r.get(m));S!==null&&p.set(m,S),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return J1(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Cr()),a=Js,c=s;return o.next(l=>O.forEach(l,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(u)?O.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ze())).next(u=>({batchId:a,changes:lE(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=qc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=qc();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=Q1(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Mi.newInvalidDocument(u)))});let a=qc();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Ys(u.mutation,l,rn.empty(),Ge.now()),_m(t,l)&&(a=a.insert(c,l))}),a})}};var Ip=class{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return O.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,ox(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,sx(t)),O.resolve()}};var Ap=class{constructor(){this.overlays=new lt(J.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Cr();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.saveOverlay(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.overlayByBatchId.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.overlayByBatchId.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Cr(),s=t.length+1,o=new J(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new lt((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let m=s.get(u.largestBatchId);m===null&&(m=Cr(),s=s.insert(u.largestBatchId,m)),m.set(u.getKey(),u)}}let a=Cr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((p,m)=>a.set(p,m)),!(a.size()>=i)););return O.resolve(a)}saveOverlay(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.overlayByBatchId.get(i.largestBatchId).delete(r.key);this.overlayByBatchId.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hp(t,r));let s=this.overlayByBatchId.get(t);s===void 0&&(s=ze(),this.overlayByBatchId.set(t,s)),this.overlayByBatchId.set(t,s.add(r.key))}};var Rp=class{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var so=class{constructor(){this.refsByKey=new je(Se.compareByKey),this.refsByTarget=new je(Se.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new Se(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.removeRef(new Se(e,t))}removeReferences(e,t){e.forEach(r=>this.removeReference(r,t))}removeReferencesForId(e){let t=new J(new Oe([])),r=new Se(t,e),i=new Se(t,e+1),s=[];return this.refsByTarget.forEachInRange([r,i],o=>{this.removeRef(o),s.push(o.key)}),s}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new J(new Oe([])),r=new Se(t,e),i=new Se(t,e+1),s=ze();return this.refsByTarget.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Se(e,0),r=this.refsByKey.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Se=class{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return J.comparator(e.key,t.key)||ne(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return ne(e.targetOrBatchId,t.targetOrBatchId)||J.comparator(e.key,t.key)}};var Dp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new je(Se.compareByKey)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new up(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Se(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.indexOfBatchId(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?dm:this.nextBatchId-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Se(t,0),i=new Se(t,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([r,i],o=>{let a=this.findMutationBatch(o.targetOrBatchId);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(ne);return t.forEach(i=>{let s=new Se(i,0),o=new Se(i,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([s,o],a=>{r=r.add(a.targetOrBatchId)})}),O.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;J.isDocumentKey(s)||(s=s.child(""));let o=new Se(new J(s),0),a=new je(ne);return this.batchesByDocumentKey.forEachWhile(c=>{let l=c.key.path;return r.isPrefixOf(l)?(l.length===i&&(a=a.add(c.targetOrBatchId)),!0):!1},o),O.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(r=>{let i=this.findMutationBatch(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){let r=this.indexOfExistingBatchId(t.batchId,"removed");ge(r===0,55003),this.mutationQueue.shift();let i=this.batchesByDocumentKey;return O.forEach(t.mutations,s=>{let o=new Se(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.batchesByDocumentKey=i})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new Se(t,0),i=this.batchesByDocumentKey.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){if(this.mutationQueue.length===0)return 0;let t=this.mutationQueue[0].batchId;return e-t}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bx="-9223372036854775808";function wx(){return new lt(J.comparator)}var Op=class{constructor(e){this.sizer=e,this.docs=wx(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Mi.newInvalidDocument(t))}getEntries(e,t){let r=Jc();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Mi.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Jc(),o=t.path,a=new J(o.child("__id"+bx+"__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Fk(Lk(u),r)<=0||!i.has(u.key)&&!_m(t,u)||(s=s.insert(u.key,u.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Q(9500)}forEachDocumentKey(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Np(this)}getSize(e){return O.resolve(this.size)}};function Cx(n){return new Op(n)}var Np=class extends bp{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.documentCache.addEntry(e,i)):this.documentCache.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}};var kp=class{constructor(e){this.persistence=e,this.targets=new bn(t=>ym(t),vm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new so,this.targetCount=0,this.targetIdGenerator=io.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),O.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new io(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.saveTargetData(t),O.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.targets.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.targets.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.references.containsKey(t))}};var Ix="MemoryPersistence",el=class{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new Xs(0),this._started=!1,this._started=!0,this.globalsCache=new Rp,this.referenceDelegate=e(this),this.targetCache=new kp(this);let r=i=>this.referenceDelegate.documentSize(i);this.indexManager=new vp,this.remoteDocumentCache=Cx(r),this.serializer=new yp(t),this.bundleCache=new Ip(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ap,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new Dp(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){V(Ix,"Starting transaction:",e);let i=new Pp(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(i).next(s=>this.referenceDelegate.onTransactionCommitted(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}mutationQueuesContainKey(e,t){return O.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}},Pp=class extends Hf{constructor(e){super(),this.currentSequenceNumber=e}},xp=class n{constructor(e){this.persistence=e,this.localViewReferences=new so,this._orphanedDocuments=null}static factory(e){return new n(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw Q(60996)}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),O.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(s=>this.orphanedDocuments.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.orphanedDocuments.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.orphanedDocuments,i=>{let s=J.fromPath(i);return this.isReferenced(e,s).next(o=>{o||r.removeEntry(s,me.min())})}).next(()=>(this._orphanedDocuments=null,r.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(r=>{r?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return O.or([()=>O.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}},tl=class n{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new bn(r=>Gk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Ex(this,t)}static factory(e,t){return new n(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,r=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return O.forEach(this.orphanedSequenceNumbers,(r,i)=>this.isPinned(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.forEachDocumentKey(e,a=>this.isPinned(e,a,t).next(c=>{c||(r++,s.removeEntry(a,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),O.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fl(e.data.value)),t}isPinned(e,t,r){return O.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.orphanedSequenceNumbers.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var jU=30*60*1e3;function Ax(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}var Rx="LocalStore",WU=5*60*1e6,Mp=class{constructor(e,t,r,i){this.persistence=e,this.queryEngine=t,this.serializer=i,this.targetDataByTarget=new lt(ne),this.targetIdByTarget=new bn(s=>ym(s),vm),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cp(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}};function Dx(n,e,t,r){return new Mp(n,e,t,r)}async function bE(n,e){let t=le(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,t.initializeUserComponents(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],l=ze();for(let u of s){a.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}for(let u of o){c.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(i,l).next(u=>({affectedDocuments:u,removedBatchIds:a,addedBatchIds:c}))})})}function Ox(n,e){let t=le(n),r=Ge.now(),i=e.reduce((a,c)=>a.add(c.key),ze()),s,o;return t.persistence.runTransaction("Locally write mutations","readwrite",a=>{let c=Jc(),l=ze();return t.remoteDocuments.getEntries(a,i).next(u=>{c=u,c.forEach((p,m)=>{m.isValidDocument()||(l=l.add(p))})}).next(()=>t.localDocuments.getOverlayedDocuments(a,c)).next(u=>{s=u;let p=[];for(let m of e){let S=SP(m,s.get(m.key).overlayedDocument);S!=null&&p.push(new wn(m.key,S,ZS(S.value.mapValue),Ar.exists(!0)))}return t.mutationQueue.addMutationBatch(a,r,p,e)}).next(u=>{o=u;let p=u.applyToLocalDocumentSet(s,l);return t.documentOverlayCache.saveOverlays(a,u.batchId,p)})}).then(()=>({batchId:o.batchId,changes:lE(s)}))}function Nx(n,e){let t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return Fx(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,kx(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kx(n){let e=ze();for(let t=0;t<n.mutationResults.length;++t)n.mutationResults[t].transformResults.length>0&&(e=e.add(n.batch.mutations[t].key));return e}function Px(n,e){let t=le(n);return t.persistence.runTransaction("Reject batch","readwrite-primary",r=>{let i;return t.mutationQueue.lookupMutationBatch(r,e).next(s=>(ge(s!==null,37113),i=s.keys(),t.mutationQueue.removeMutationBatch(r,s))).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,i)).next(()=>t.localDocuments.getDocuments(r,i))})}function xx(n){let e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.targetCache.getLastRemoteSnapshotVersion(t))}async function Mx(n,e){let t=le(n);try{await t.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>O.forEach(e,i=>O.forEach(i.addedKeys,s=>t.persistence.referenceDelegate.addReference(r,i.targetId,s)).next(()=>O.forEach(i.removedKeys,s=>t.persistence.referenceDelegate.removeReference(r,i.targetId,s)))))}catch(r){if(uo(r))V(Rx,"Failed to update sequence numbers: "+r);else throw r}for(let r of e){let i=r.targetId;if(!r.fromCache){let s=t.targetDataByTarget.get(i),o=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(o);t.targetDataByTarget=t.targetDataByTarget.insert(i,a)}}}function Lx(n,e){let t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fx(n,e,t,r){let i=t.batch,s=i.keys(),o=O.resolve();return s.forEach(a=>{o=o.next(()=>r.getEntry(e,a)).next(c=>{let l=t.docVersions.get(a);ge(l!==null,48541),c.version.compareTo(l)<0&&(i.applyToRemoteDocument(c,t),c.isValidDocument()&&(c.setReadTime(t.commitVersion),r.addEntry(c)))})}),o.next(()=>n.mutationQueue.removeMutationBatch(e,i))}var Lp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bx=100;function Ux(){return Um()?8:Uk(rt())>0?6:4}var Fp=class{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=Bx,this.relativeIndexReadCostPerDocument=Ux()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.performQueryUsingIndex(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.performQueryUsingRemoteKeys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Lp;return this.executeFullCollectionScan(e,t,o).next(a=>{if(s.result=a,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,o,a.size)})}).next(()=>s.result)}createCacheIndexes(e,t,r,i){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(Di()<=$.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ks(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),O.resolve()):(Di()<=$.DEBUG&&V("QueryEngine","Query:",Ks(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*i?(Di()<=$.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ks(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):O.resolve())}performQueryUsingIndex(e,t){if(aS(t))return O.resolve(null);let r=Ir(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ap(t,null,"F"),r=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ze(...s);return this.localDocumentsView.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.applyQuery(t,a);return this.needsRefill(t,l,o,c.readTime)?this.performQueryUsingIndex(e,ap(t,null,"F")):this.appendRemainingResults(e,l,t,c)}))})))}performQueryUsingRemoteKeys(e,t,r,i){return aS(t)||i.isEqual(me.min())?O.resolve(null):this.localDocumentsView.getDocuments(e,r).next(s=>{let o=this.applyQuery(t,s);return this.needsRefill(t,o,r,i)?O.resolve(null):(Di()<=$.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(t)),this.appendRemainingResults(e,o,t,Mk(i,Js)).next(a=>a))})}applyQuery(e,t){let r=new je(iP(e));return t.forEach((i,s)=>{_m(e,s)&&(r=r.add(s))}),r}needsRefill(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return s?s.hasPendingWrites||s.version.compareTo(i)>0:!1}executeFullCollectionScan(e,t,r){return Di()<=$.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ks(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Nr.min(),r)}appendRemainingResults(e,t,r,i){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var nl=class{constructor(){this.activeTargetIds=hP()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bp=class{constructor(){this.localState=new nl,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new nl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Up=class{addCallback(e){}shutdown(){}};var qp=class{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}};var Vc=null;function qx(){return 268435456+Math.round(2147483648*Math.random())}function Lf(){return Vc===null?Vc=qx():Vc++,"0x"+Vc.toString(16)}function Vx(n){return new Promise((e,t)=>{n((r,i)=>{r?t(r):e(i)})})}var zx="1.9.15",Je="GrpcConnection",Gx=`gl-node/${process.versions.node} fire/${ji} grpc/${zx}`;function Ff(n,e,t,r){ge(e===null||e.type==="OAuth",36936);let i=new Rr.Metadata;return e&&e.headers.forEach((s,o)=>i.set(o,s)),t&&t.headers.forEach((s,o)=>i.set(o,s)),r&&i.set("X-Firebase-GMPID",r),i.set("X-Goog-Api-Client",Gx),i.set("Google-Cloud-Resource-Prefix",n),i.set("x-goog-request-params",n),i}var Vp=class{get shouldResourcePathBeIncludedInRequest(){return!0}constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}ensureActiveStub(){if(!this.cachedStub){V(Je,"Creating Firestore stub.");let e=this.databaseInfo.ssl?Rr.credentials.createSsl():Rr.credentials.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,i,s){let o=Lf(),a=this.ensureActiveStub(),c=Ff(this.databasePath,i,s,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return Vx(u=>(V(Je,`RPC '${e}' ${o} invoked with request:`,r),a[e](l,c,(p,m)=>{p?(V(Je,`RPC '${e}' ${o} failed with error:`,p),u(new G(Pf(p.code),p.message))):(V(Je,`RPC '${e}' ${o} completed with response:`,m),u(void 0,m))})))}invokeStreamingRPC(e,t,r,i,s,o){let a=Lf(),c=[],l=new sn;V(Je,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),p=Ff(this.databasePath,i,s,this.databaseInfo.appId),m=Object.assign(Object.assign({},r),{database:this.databasePath}),S=u[e](m,p),E=!1;return S.on("data",w=>{V(Je,`RPC ${e} ${a} received result:`,w),c.push(w),o!==void 0&&c.length===o&&(E=!0,l.resolve(c))}),S.on("end",()=>{V(Je,`RPC '${e}' ${a} completed.`),E||(E=!0,l.resolve(c))}),S.on("error",w=>{V(Je,`RPC '${e}' ${a} failed with error:`,w);let C=Pf(w.code);l.reject(new G(C,w.message))}),l.promise}openStream(e,t,r){let i=Lf(),s=this.ensureActiveStub(),o=Ff(this.databasePath,t,r,this.databaseInfo.appId),a=s[e](o),c=!1,l=m=>{c||(c=!0,u.callOnClose(m),a.end())},u=new qp({sendFn:m=>{if(c)V(Je,`RPC '${e}' stream ${i} not sending because gRPC stream is closed:`,m);else{V(Je,`RPC '${e}' stream ${i} sending:`,m);try{a.write(m)}catch(S){throw Sn("Failure sending:",m),Sn("Error:",S),S}}},closeFn:()=>{V(Je,`RPC '${e}' stream ${i} closed locally via close().`),l()}}),p=!1;return a.on("data",m=>{c||(V(Je,`RPC '${e}' stream ${i} received:`,m),p||(u.callOnConnected(),p=!0),u.callOnMessage(m))}),a.on("end",()=>{V(Je,`RPC '${e}' stream ${i} ended.`),l()}),a.on("error",m=>{if(!c){sm(Je,`RPC '${e}' stream ${i} error. Code:`,m.code,"Message:",m.message);let S=Pf(m.code);l(new G(S,m.message))}}),V(Je,`Opening RPC '${e}' stream ${i} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}},wE={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}},jx={nested:wE},Wx=Object.freeze({__proto__:null,nested:wE,default:jx});var Hx={longs:String,enums:String,defaults:!0,oneofs:!1};function $x(){let n=DS.fromJSON(Wx,Hx);return Rr.loadPackageDefinition(n)}function Kx(n){let e=$x();return new Vp(e,n)}function Qx(){return new Up}function gl(n){return new fp(n,!1)}var Yx="ExponentialBackoff",Jx=1e3,Xx=1.5,Zx=60*1e3,rl=class{constructor(e,t,r=Jx,i=Xx,s=Zx){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,t-r);i>0&&V(Yx,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var mS="PersistentStream",eM=60*1e3,tM=10*1e3,zp=class{constructor(e,t,r,i,s,o,a,c){this.queue=e,this.idleTimerId=r,this.healthTimerId=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new rl(e,t)}isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.responseCount=0,this.state===4){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,eM,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,e!==4?this.backoff.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Sn(t.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.closeCount===t&&this.startStream(r,i)},r=>{e(()=>{let i=new G(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.handleStreamClose(i)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,tM,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(i=>{r(()=>this.handleStreamClose(i))}),this.stream.onMessage(i=>{r(()=>++this.responseCount===1?this.onFirst(i):this.onNext(i))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return V(mS,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(V(mS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var Gp=class extends zp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.onHandshakeComplete()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=zP(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=LP(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>UP(this.serializer,r))};this.sendRequest(t)}};var jp=class{},Wp=class extends jp{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.invokeRPC(e,mp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(P.UNKNOWN,s.toString())})}invokeStreamingRPC(e,t,r,i,s){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.invokeStreamingRPC(e,mp(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(P.UNKNOWN,o.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}};function nM(n,e,t,r){return new Wp(n,e,t,r)}function rM(n,e,t){let r=le(n);return r.verifyInitialized(),new Gp(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,t)}var iM="OnlineStateTracker",gS=1,yS=10*1e3,Hp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",yS,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${yS/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){this.state==="Online"?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=gS&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${gS} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(Sn(t),this.shouldWarnClientIsOffline=!1):V(iM,t)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var ho="RemoteStore",sM=10,$p=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=s,this.connectivityMonitor.addCallback(o=>{r.enqueueAndForget(async()=>{po(this)&&(V(ho,"Restarting streams for network reachability change."),await mM(this))})}),this.onlineStateTracker=new Hp(r,i)}};function oM(n,e,t,r,i){return new $p(n,e,t,r,i)}async function yl(n){if(po(n))for(let e of n.onNetworkStatusChange)await e(!0)}async function fo(n){for(let e of n.onNetworkStatusChange)await e(!1)}async function aM(n){let e=le(n);V(ho,"RemoteStore shutting down."),e.offlineCauses.add(5),await fo(e),e.connectivityMonitor.shutdown(),e.onlineStateTracker.set("Unknown")}function po(n){return le(n).offlineCauses.size===0}async function CE(n,e,t){if(uo(e))n.offlineCauses.add(1),await fo(n),n.onlineStateTracker.set("Offline"),t||(t=()=>xx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{V(ho,"Retrying IndexedDB access"),await t(),n.offlineCauses.delete(1),await yl(n)});else throw e}function IE(n,e){return e().catch(t=>CE(n,t,e))}async function vl(n){let e=le(n),t=cr(e),r=e.writePipeline.length>0?e.writePipeline[e.writePipeline.length-1].batchId:dm;for(;cM(e);)try{let i=await Lx(e.localStore,r);if(i===null){e.writePipeline.length===0&&t.markIdle();break}else r=i.batchId,lM(e,i)}catch(i){await CE(e,i)}AE(e)&&RE(e)}function cM(n){return po(n)&&n.writePipeline.length<sM}function lM(n,e){n.writePipeline.push(e);let t=cr(n);t.isOpen()&&t.handshakeComplete&&t.writeMutations(e.mutations)}function AE(n){return po(n)&&!cr(n).isStarted()&&n.writePipeline.length>0}function RE(n){cr(n).start()}async function uM(n){cr(n).writeHandshake()}async function dM(n){let e=cr(n);for(let t of n.writePipeline)e.writeMutations(t.mutations)}async function hM(n,e,t){let r=n.writePipeline.shift(),i=dp.from(r,e,t);await IE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await vl(n)}async function fM(n,e){e&&cr(n).handshakeComplete&&await pM(n,e),AE(n)&&RE(n)}async function pM(n,e){if(DP(e.code)){let t=n.writePipeline.shift();cr(n).inhibitBackoff(),await IE(n,()=>n.remoteSyncer.rejectFailedWrite(t.batchId,e)),await vl(n)}}async function mM(n){let e=le(n);e.offlineCauses.add(4),await fo(e),e.onlineStateTracker.set("Unknown"),e.offlineCauses.delete(4),await yl(e)}async function vS(n,e){let t=le(n);t.asyncQueue.verifyOperationInProgress(),V(ho,"RemoteStore received new credentials");let r=po(t);t.offlineCauses.add(3),await fo(t),r&&t.onlineStateTracker.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.offlineCauses.delete(3),await yl(t)}async function gM(n,e){let t=le(n);e?(t.offlineCauses.delete(2),await yl(t)):e||(t.offlineCauses.add(2),await fo(t),t.onlineStateTracker.set("Unknown"))}function cr(n){return n.writeStream||(n.writeStream=rM(n.datastore,n.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:uM.bind(null,n),onClose:fM.bind(null,n),onHandshakeComplete:dM.bind(null,n),onMutationResult:hM.bind(null,n)}),n.onNetworkStatusChange.push(async e=>{e?(n.writeStream.inhibitBackoff(),await vl(n)):(await n.writeStream.stop(),n.writePipeline.length>0&&(V(ho,`Stopping write stream with ${n.writePipeline.length} pending writes`),n.writePipeline=[]))})),n.writeStream}var yM="AsyncQueue",Kp=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function DE(n,e){if(Sn(yM,`${e}: ${n}`),uo(n))return new G(P.UNAVAILABLE,`${e}: ${n}`);throw n}function vM(){return new Qp}var Qp=class{constructor(){this.queries=OE(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){TM(this,new G(P.ABORTED,"Firestore shutting down"))}};function OE(){return new bn(n=>aE(n),oE)}function _M(n,e){let t=le(n);t.onlineState=e;let r=!1;t.queries.forEach((i,s)=>{for(let o of s.listeners)o.applyOnlineStateChange(e)&&(r=!0)}),r&&SM(t)}function TM(n,e){let t=le(n),r=t.queries;t.queries=OE(),r.forEach((i,s)=>{for(let o of s.listeners)o.onError(e)})}function SM(n){n.snapshotsInSyncListeners.forEach(e=>{e.next()})}var _S;(function(n){n.Default="default",n.Cache="cache"})(_S||(_S={}));var Yp=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=i}static fromSnapshot(e,t){let r=ze(),i=ze();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key);break}return new n(e,t.fromCache,r,i)}};var EM="SyncEngine";var Jp=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.syncEngineListener={},this.queryViewsByQuery=new bn(a=>aE(a),oE),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new lt(J.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new so,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=io.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return this._isPrimaryClient===!0}};function bM(n,e,t,r,i,s,o){let a=new Jp(n,e,t,r,i,s);return o&&(a._isPrimaryClient=!0),a}async function wM(n,e,t){let r=OM(n);try{let i=await Ox(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),RM(r,i.batchId,t),await _l(r,i.changes),await vl(r.remoteStore)}catch(i){let s=DE(i,"Failed to persist write");t.reject(s)}}function TS(n,e,t){let r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.queryViewsByQuery.forEach((s,o)=>{let a=o.view.applyOnlineStateChange(e);a.snapshot&&i.push(a.snapshot)}),_M(r.eventManager,e),i.length&&r.syncEngineListener.onWatchChange(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CM(n,e){let t=le(n),r=e.batch.batchId;try{let i=await Nx(t.localStore,e);kE(t,r,null),NE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _l(t,i)}catch(i){await cm(i)}}async function IM(n,e,t){let r=le(n);try{let i=await Px(r.localStore,e);kE(r,e,t),NE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _l(r,i)}catch(i){await cm(i)}}function NE(n,e){(n.pendingWritesCallbacks.get(e)||[]).forEach(t=>{t.resolve()}),n.pendingWritesCallbacks.delete(e)}function AM(n,e){n.pendingWritesCallbacks.forEach(t=>{t.forEach(r=>{r.reject(new G(P.CANCELLED,e))})}),n.pendingWritesCallbacks.clear()}function RM(n,e,t){let r=n.mutationUserCallbacks[n.currentUser.toKey()];r||(r=new lt(ne)),r=r.insert(e,t),n.mutationUserCallbacks[n.currentUser.toKey()]=r}function kE(n,e,t){let r=le(n),i=r.mutationUserCallbacks[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.mutationUserCallbacks[r.currentUser.toKey()]=i}}async function _l(n,e,t){let r=le(n),i=[],s=[],o=[];r.queryViewsByQuery.isEmpty()||(r.queryViewsByQuery.forEach((a,c)=>{o.push(r.applyDocChanges(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Yp.fromSnapshot(c.targetId,l);s.push(p)}}))}),await Promise.all(o),r.syncEngineListener.onWatchChange(i),await Mx(r.localStore,s))}async function DM(n,e){let t=le(n);if(!t.currentUser.isEqual(e)){V(EM,"User change. New user:",e.toKey());let i=await bE(t.localStore,e);t.currentUser=e,AM(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _l(t,i.affectedDocuments)}}function OM(n){let e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,e),e}var Gi=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Dx(this.persistence,new Fp,e.initialUser,this.serializer)}createPersistence(e){return new el(xp.factory,this.serializer)}createSharedClientState(e){return new Bp}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Gi.provider={build:()=>new Gi};var Xp=class extends Gi{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){ge(this.persistence.referenceDelegate instanceof tl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Sp(r,e.asyncQueue,t)}createPersistence(e){let t=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new el(r=>tl.factory(r,t),this.serializer)}};var oo=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>TS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DM.bind(null,this.syncEngine),await gM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return vM()}createDatastore(e){let t=gl(e.databaseInfo.databaseId),r=Kx(e.databaseInfo);return nM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return oM(this.localStore,this.datastore,e.asyncQueue,t=>TS(this.syncEngine,t,0),Qx())}createSyncEngine(e,t){return bM(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await aM(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}};oo.provider={build:()=>new oo};function NM(n,e,t){if(!t)throw new G(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kM(n,e,t,r){if(e===!0&&r===!0)throw new G(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SS(n){if(!J.isDocumentKey(n))throw new G(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PM(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=xM(n);return e?`a custom ${e} object`:"an object"}}else return typeof n=="function"?"a function":Q(12329,{type:typeof n})}function xM(n){return n.constructor?n.constructor.name:null}function Zp(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sm(n);throw new G(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ar="FirestoreClient",MM=100,LM=11,FM=20,BM=22,em=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ke.UNAUTHENTICATED,this.clientId=Hc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{V(ar,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(V(ar,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:MM}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=DE(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Bf(n,e){n.asyncQueue.verifyOperationInProgress(),V(ar,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ES(n,e){n.asyncQueue.verifyOperationInProgress();let t=await qM(n);V(ar,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vS(e.remoteStore,i)),n._onlineComponents=e}function UM(n){return n.name==="FirebaseError"?n.code===P.FAILED_PRECONDITION||n.code===P.UNIMPLEMENTED:typeof DOMException<"u"&&n instanceof DOMException?n.code===BM||n.code===FM||n.code===LM:!0}async function qM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(ar,"Using user provided OfflineComponentProvider");try{await Bf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!UM(t))throw t;sm("Error using user provided cache. Falling back to memory cache: "+t),await Bf(n,new Gi)}}else V(ar,"Using default OfflineComponentProvider"),await Bf(n,new Xp(void 0));return n._offlineComponents}async function VM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(ar,"Using user provided OnlineComponentProvider"),await ES(n,n._uninitializedComponentsProvider._online)):(V(ar,"Using default OnlineComponentProvider"),await ES(n,new oo))),n._onlineComponents}function zM(n){return VM(n).then(e=>e.syncEngine)}function GM(n,e){let t=new sn;return n.asyncQueue.enqueueAndForget(async()=>{let r=await zM(n);return wM(r,e,t)}),t.promise}function jM(n,e){return n.timeoutSeconds===e.timeoutSeconds}function PE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WM="ComponentProvider",bS=new Map;function HM(n){let e=bS.get(n);e&&(V(WM,"Removing Datastore"),bS.delete(n),e.terminate())}function $M(n,e,t,r){return new Kf(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,PE(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}var xE="firestore.googleapis.com",wS=!0,CS=5,IS=30,KM=!0,il=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xE,this.ssl=wS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EE;else{if(e.cacheSizeBytes!==ml&&e.cacheSizeBytes<fS)throw new G(P.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${fS}`);this.cacheSizeBytes=e.cacheSizeBytes}kM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=KM:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),QM(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&jM(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function QM(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<CS)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is ${CS})`);if(n.timeoutSeconds>IS)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is ${IS})`)}}var ao=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new il({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new il(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=Ok(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ki("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return HM(this),Promise.resolve()}};function YM(n,e,t,r={}){var i;n=Zp(n,ao);let s=Ur(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==xE&&o.host!==c&&sm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!xt(l,a)&&(n._setSettings(l),s&&(To(`https://${c}`),Ki("Firestore",!0)),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=ke.MOCK_USER;else{u=xm(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new G(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ke(m)}n._authCredentials=new qf(new jc(u,p))}}var tm=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},co=class n extends tm{constructor(e,t,r){super(e,t,K1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ME(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Hc.newId()),NM("doc","path",e),n instanceof ao){let r=Oe.fromString(e,...t);return SS(r),new Tn(n,null,new J(r))}else{if(!(n instanceof Tn)&&!(n instanceof co))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Oe.fromString(e,...t));return SS(r),new Tn(n.firestore,n instanceof co?n.converter:null,new J(r))}}var JM="AsyncQueue",sl=class{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new rl(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new sn;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(this.retryableOps.length!==0){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(uo(e))V(JM,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(r=>{this.failure=r,this.operationInProgress=!1;let i=AS(r);throw Sn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.operationInProgress=!1,r))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let i=Kp.createAndSchedule(this,e,t,r,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&Q(47125,{messageOrStack:AS(this.failure)})}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.delayedOperations)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}};function AS(n){let e=n.message||"";return n.stack&&(n.stack.includes(n.message)?e=n.stack:e=n.message+`
`+n.stack),e}var ol=class extends ao{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sl,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sl(e),this._firestoreClient=void 0,await e}}};function LE(n,e){let t=typeof n=="object"?n:Co(),r=typeof n=="string"?n:e||Qf,i=Yi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Pm("firestore");s&&YM(i,...s)}return i}function XM(n){if(n._terminated)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZM(n),n._firestoreClient}function ZM(n){var e,t,r;let i=n._freezeSettings(),s=$M(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new em(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&eL(n._componentsProvider))}function eL(n){let e=n?._online.build();return{_offline:n?._offline.build(e),_online:e}}function tL(n,e=!0){Rk(zr),Dn(new ht("firestore",(t,{instanceIdentifier:r,options:i})=>{let s=t.getProvider("app").getImmediate(),o=new ol(new Vf(t.getProvider("auth-internal")),new jf(s,t.getProvider("app-check-internal")),h1(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),bt(YT,JT,n),bt(YT,JT,"esm2017")}var al=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(En.fromBase64String(e))}catch(t){throw new G(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var cl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ll=class{constructor(e){this._methodName=e}};var ul=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}};var dl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return Ax(this._values,e._values)}};var nL=/^__.*__$/,nm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lr(e,this.data,t,this.fieldTransforms)}};function FE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{dataSource:n})}}var rm=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(FE(this.dataSource)&&nL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},im=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gl(e)}createContext(e,t,r,i=!1){return new rm({dataSource:e,methodName:t,targetDoc:r,path:ct.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rL(n){let e=n._freezeSettings(),t=gl(n._databaseId);return new im(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iL(n,e,t,r,i,s={}){let o=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);VE("Data must be an object, but it was:",o,r);let a=UE(r,o),c,l;if(s.merge)c=new rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let p of s.mergeFields){let m=lL(e,p,t);if(!o.contains(m))throw new G(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hL(u,m)||u.push(m)}c=new rn(u),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new nm(new nn(a),c,l)}function BE(n,e){if(n=Mt(n),qE(n))return VE("Unsupported field value:",e,n),UE(n,e);if(n instanceof ll)return oL(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return sL(n,e)}else return aL(n,e)}function UE(n,e){let t={};return jS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let s=BE(i,e.childContextForField(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function sL(n,e){let t=[],r=0;for(let i of n){let s=BE(i,e.childContextForArray(r));s==null&&(s={nullValue:"NULL_VALUE"}),t.push(s),r++}return{arrayValue:{values:t}}}function oL(n,e){if(!FE(e.dataSource))throw e.createError(`${n._methodName}() can only be used with update() and set()`);if(!e.path)throw e.createError(`${n._methodName}() is not currently supported inside arrays`);let t=n._toFieldTransform(e);t&&e.fieldTransforms.push(t)}function aL(n,e){if(n=Mt(n),n===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fP(e.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let t=Ge.fromDate(n);return{timestampValue:pp(e.serializer,t)}}else if(n instanceof Ge){let t=new Ge(n.seconds,Math.floor(n.nanoseconds/1e3)*1e3);return{timestampValue:pp(e.serializer,t)}}else{if(n instanceof ul)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof al)return{bytesValue:kP(e.serializer,n._byteString)};if(n instanceof Tn){let t=e.databaseId,r=n.firestore._databaseId;if(!r.isEqual(t))throw e.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${t.projectId}/${t.database}`);return{referenceValue:TE(n.firestore._databaseId||e.databaseId,n._key.path)}}else{if(n instanceof dl)return cL(n,e);throw e.createError(`Unsupported field value: ${Sm(n)}`)}}}function cL(n,e){return{mapValue:{fields:{[fm]:{stringValue:pm},[eo]:{arrayValue:{values:n.toArray().map(r=>{if(typeof r!="number")throw e.createError("VectorValues must only contain numeric values.");return Tm(e.serializer,r)})}}}}}}function qE(n){return typeof n=="object"&&n!==null&&!(n instanceof Array)&&!(n instanceof Date)&&!(n instanceof Ge)&&!(n instanceof ul)&&!(n instanceof al)&&!(n instanceof Tn)&&!(n instanceof ll)&&!(n instanceof dl)}function VE(n,e,t){if(!qE(t)||!PM(t)){let r=Sm(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function lL(n,e,t){if(e=Mt(e),e instanceof cl)return e._internalPath;if(typeof e=="string")return dL(n,e);throw hl("Field path arguments must be of type string or ",n,!1,void 0,t)}var uL=new RegExp("[~\\*/\\[\\]]");function dL(n,e,t){if(e.search(uL)>=0)throw hl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cl(...e.split("."))._internalPath}catch{throw hl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hl(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new G(P.INVALID_ARGUMENT,a+n+c)}function hL(n,e){return n.some(t=>t.isEqual(e))}function fL(n,e,t){let r;return n?t&&(t.merge||t.mergeFields)?r=n.toFirestore(e,t):r=n.toFirestore(e):r=e,r}function zE(n,e,t){n=Zp(n,Tn);let r=Zp(n.firestore,ol),i=fL(n.converter,e,t),s=rL(r),a=iL(s,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ar.none());return pL(r,[a])}function pL(n,e){let t=XM(n);return GM(t,e)}tL("node");var mL={apiKey:"AIzaSyAWvHQuHxroAGd3z620v5I1l7_LWNeI2bI",authDomain:"tcc-timetocode.firebaseapp.com",projectId:"tcc-timetocode",storageBucket:"tcc-timetocode.appspot.com",messagingSenderId:"803148399009",appId:"1:803148399009:web:29a78f54a3a686f2af8be0",measurementId:"G-PSW4MK3P0K"},Em=Wl(mL),GE=LE(Em);var gL=hu(Em);async function jE(){try{let e=(await du(gL)).user;return console.log("Usu\xE1rio an\xF4nimo autenticado:",e.uid),{uid:e.uid}}catch(n){return console.error("Erro ao autenticar anonimamente:",n),null}}var El=Br(require("os")),bm=!1,Cn=null,nt=null,In=[],ut={},an=null,Sl=0,wm=null,Cm=Date.now(),Tl=!1,WE=Me.workspace.workspaceFolders?.[0]?.name||"sem-projeto",HE=El.hostname(),yL=null;function vL(){let n=El.networkInterfaces();for(let e of Object.keys(n))for(let t of n[e]||[])if(t.family==="IPv4"&&!t.internal)return t.address;return"unknown"}var $E=vL();function _L(n){jE().then(l=>{l?(yL=l.uid,console.log("Usu\xE1rio autenticado:",l)):console.log("Usu\xE1rio n\xE3o autenticado.")}),console.log("Extens\xE3o ativada.");let e=n.globalState.get("fileDurations"),t=n.globalState.get("activityLog");e&&(ut=e),t&&(In=t),bm||(ut={},In=[],Sl=0,Cn=null,nt=null,bm=!0);let r=()=>{an?an.reveal(Me.ViewColumn.Beside):(an=Me.window.createWebviewPanel("workTimeTracker","Monitor de Trabalho",Me.ViewColumn.Beside,{enableScripts:!0}),an.webview.html=QE(),an.webview.postMessage({fileDurations:ut}),an.onDidDispose(()=>{an=null,bm=!1}))};function i(l){l.globalState.update("fileDurations",ut),l.globalState.update("activityLog",In),an&&an.webview.postMessage({fileDurations:ut}),YE()}let s=()=>{Tl||(Tl=!0,Cm=Date.now(),In.push({time:new Date().toISOString(),action:"inatividade detectada",file:nt||"",duration:"---"}),i(n))},o=()=>{if(Tl){let u=Date.now()-Cm;Sl+=u,In.push({time:new Date().toISOString(),action:"retorno da inatividade",file:nt||"",duration:Fr(u)}),Tl=!1,i(n)}Cm=Date.now()},a=Me.window.createStatusBarItem(Me.StatusBarAlignment.Left,100);a.text="\u{1F4DD} Painel",a.tooltip="Clique para abrir o painel de produtividade",a.command="extension.toggleDashboard",a.show();let c=Me.commands.registerCommand("extension.toggleDashboard",()=>{r()});Me.workspace.onDidChangeTextDocument(()=>{o(),wm&&clearTimeout(wm),wm=setTimeout(s,60*1e3)}),Me.window.onDidChangeWindowState(l=>{l.focused?o():s()}),Me.window.onDidChangeActiveTextEditor(l=>{if(l){if(Cn!==null&&nt){let u=Date.now()-Cn;ut[nt]=(ut[nt]||0)+u,In.push({time:new Date().toISOString(),action:"troca de arquivo",file:nt,duration:Fr(u)}),i(n)}nt=l.document.uri.fsPath,Cn=Date.now()}}),Me.workspace.onDidCloseTextDocument(()=>{if(Cn!==null&&nt){let l=Date.now()-Cn;ut[nt]=(ut[nt]||0)+l,In.push({time:new Date().toISOString(),action:"fechamento",file:nt,duration:Fr(l)}),i(n),Cn=null}}),r(),n.subscriptions.push(a,c)}function TL(){bL(),an?.dispose()}function Fr(n){let e=Math.floor(n/1e3)%60,t=Math.floor(n/(1e3*60))%60,r=Math.floor(n/(1e3*60*60));return`${String(r).padStart(2,"0")}:${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`}function QE(){let n=Object.values(ut).reduce((r,i)=>r+i,0),e=Object.keys(ut).length,t=e>0?n/e:0;return`
        <html>
        <head>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <style>
                body { font-family: Arial, sans-serif; background: #36393f; color: white; padding: 20px; }
                .container { background: #2f3136; padding: 15px; border-radius: 8px; }
                .log { background: #202225; padding: 10px; border-radius: 5px; max-height: 300px; overflow-y: auto; }
                .log-entry { font-size: 12px; padding: 5px 0; border-bottom: 1px solid #40444b; }
                .stats { margin-top: 20px; }
                canvas { background: white; border-radius: 8px; }
            </style>
        </head>
        <body>
            <div class="container">
                <h2>Monitor de Trabalho</h2>
                <p><strong>Arquivo atual:</strong> ${nt?mo.basename(nt):"Nenhum arquivo"}</p>
                <p><strong>Tempo de edi\xE7\xE3o atual:</strong> ${Cn?Fr(Date.now()-Cn):"Inativo"}</p>
                <div class="stats">
                    <p><strong>Tempo total de edi\xE7\xE3o:</strong> ${Fr(n)}</p>
                    <p><strong>Tempo m\xE9dio por arquivo:</strong> ${Fr(t)}</p>
                    <p><strong>Tempo total de inatividade:</strong> ${Fr(Sl)}</p>
                </div>
                <canvas id="chart"></canvas>
                <p style="margin-top: 10px; font-size: 12px; color: #aaa;">
                    Atualizado em: <span id="dataAtualizada"></span>
                </p>
            </div>

            <div class="log">
                <strong>Atividades Recentes:</strong>
                ${In.map(r=>`<div class="log-entry">${new Date(r.time).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})} - ${r.action}: <strong>${mo.basename(r.file)}</strong> (${r.duration||"00:00:00"})</div>`).join("")}

            </div>

            <script>
                function formatChartTime(ms) {
                    const sec = Math.floor(ms / 1000) % 60;
                    const min = Math.floor(ms / (1000 * 60)) % 60;
                    const hours = Math.floor(ms / (1000 * 60 * 60));
                    return \`\${String(hours).padStart(2, '0')}:\${String(min).padStart(2, '0')}:\${String(sec).padStart(2, '0')}\`;
                }

                window.addEventListener('message', event => {
                    const data = event.data;
                    const ctx = document.getElementById('chart').getContext('2d');
                    const labels = Object.keys(data.fileDurations).map(file => file.split(/[\\\\/]/).pop());
                    const values = Object.values(data.fileDurations);

                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Tempo de Edi\xE7\xE3o',
                                data: values,
                                backgroundColor: 'rgba(75, 192, 192, 0.6)',
                                borderColor: 'rgba(75, 192, 192, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                tooltip: {
                                    callbacks: {
                                        label: context => formatChartTime(context.raw)
                                    }
                                }
                            }
                        }
                    });

                    // Atualiza a data no formato pt-BR
                    const dataAtual = new Date();
                    const formatado = dataAtual.toLocaleString('pt-BR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    document.getElementById('dataAtualizada').innerText = formatado;
                });
            </script>
        </body>
        </html>
    `}function SL(n){let e=new Date;return n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()}function EL(){return new Date().toISOString().split("T")[0]}function YE(){let n=In.filter(a=>SL(new Date(a.time))),e=n.map(a=>a.file),t={};e.forEach(a=>{ut[a]&&(t[a]=ut[a])});let r=EL(),i=`${WE}-${r}`,s={fileDurations:t,activityLog:n,inactivityDuration:Sl,timestamp:new Date().toISOString(),machineName:HE,machineIp:$E,projeto:WE,identifier:`${HE}-${$E}`},o=ME(GE,"relatorios",i);zE(o,s).then(()=>console.log(`\u2705 Relat\xF3rio salvo como: ${i}`)).catch(a=>console.error("\u274C Erro ao enviar relat\xF3rio:",a))}function bL(){let n=mo.join(Me.workspace.workspaceFolders?.[0]?.uri.fsPath||"","log.html");KE.writeFileSync(n,QE()),console.log("\u{1F4C4} Relat\xF3rio HTML salvo em:",n),YE()}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

@grpc/proto-loader/build/src/util.js:
  (**
   * @license
   * Copyright 2018 gRPC authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   *)

long/umd/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)

@grpc/proto-loader/build/src/index.js:
  (**
   * @license
   * Copyright 2018 gRPC authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/node-esm/index.node.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/logger/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/node-esm/totp-1a843a99.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/index.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.node.mjs:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
